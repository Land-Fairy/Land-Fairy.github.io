<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JAVA, SpringBoot,">










<meta name="description" content="SpringBoot &amp;#x7684;&amp;#x4F7F;&amp;#x7528;">
<meta name="keywords" content="JAVA, SpringBoot">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot">
<meta property="og:url" content="http://yoursite.com/2019/10/16/SpringBoot/index.html">
<meta property="og:site_name" content="DayByDayの小屋">
<meta property="og:description" content="SpringBoot &amp;#x7684;&amp;#x4F7F;&amp;#x7528;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191003114745.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191003121712.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004111615.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/concrete-bindings.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/legacy.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004133120.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004133529.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004134350.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004135103.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004234339.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191004234518.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005121543.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005121646.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005122153.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005122229.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005123927.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005125453.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005143413.png">
<meta property="og:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191005145159.png">
<meta property="og:updated_time" content="2019-11-19T03:58:32.566Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SpringBoot">
<meta name="twitter:description" content="SpringBoot &amp;#x7684;&amp;#x4F7F;&amp;#x7528;">
<meta name="twitter:image" content="http://yoursite.com/2019/10/16/SpringBoot/20191003114745.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/10/16/SpringBoot/">





  <title>SpringBoot | DayByDayの小屋</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DayByDayの小屋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">编程之路</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/16/SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DayByDay">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DayByDayの小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SpringBoot</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-16T20:40:03+08:00">
                2019-10-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>SpringBoot &#x7684;&#x4F7F;&#x7528;</p>
</blockquote>
<a id="more"></a>

<h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="&#x4E00;-&#x5165;&#x95E8;Helloworld"><a href="#&#x4E00;-&#x5165;&#x95E8;Helloworld" class="headerlink" title="&#x4E00;. &#x5165;&#x95E8;Helloworld"></a>&#x4E00;. &#x5165;&#x95E8;Helloworld</h2><h3 id="1-Spring-initlize-&#x65B9;&#x5F0F;"><a href="#1-Spring-initlize-&#x65B9;&#x5F0F;" class="headerlink" title="1. Spring initlize &#x65B9;&#x5F0F;"></a>1. Spring initlize &#x65B9;&#x5F0F;</h3><ol>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Spring initlize &#x5DE5;&#x7A0B;</li>
<li>&#x5728;**Application.java&#x7684;&#x540C;&#x7EA7; &#x5305;&#x4E0B;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; controller</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.SpringBoot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;</p>
<p>&#x76F4;&#x63A5;&#x70B9;&#x51FB; Main &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x8FD0;&#x884C;&#x5373;&#x53EF;</p>
</li>
<li><p>&#x90E8;&#x7F72;</p>
<p>&#x5728; pom &#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F15;&#x5165;&#x6253;&#x5305; plugin &#x914D;&#x7F6E;&#xFF08;&#x81EA;&#x52A8;&#x6253;&#x5305;&#x6210; jar &#x5305;)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p>   &#x5728;&#x53F3;&#x4FA7;&#x8FB9;&#x680F; Maven=&gt;Lifecycle=&gt;package &#xFF0C;&#x5373;&#x53EF;&#x6253;&#x5305;(&#x5728; target &#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF0C;&#x6709;&#x4E00;&#x4E2A; **.jar)</p>
<p>   &#x5728;&#x547D;&#x4EE4;&#x884C;&#xFF0C;&#x6267;&#x884C; java -jar **.jar &#x5373;&#x53EF;&#x8FD0;&#x884C;</p>
<h3 id="2-&#x539F;&#x7406;"><a href="#2-&#x539F;&#x7406;" class="headerlink" title="2. &#x539F;&#x7406;"></a>2. &#x539F;&#x7406;</h3><h4 id="1-POM&#x4E2D;-&#x5BFC;&#x5165;-&#x7236;&#x9879;&#x76EE;-&#x7248;&#x672C;&#x4EF2;&#x88C1;"><a href="#1-POM&#x4E2D;-&#x5BFC;&#x5165;-&#x7236;&#x9879;&#x76EE;-&#x7248;&#x672C;&#x4EF2;&#x88C1;" class="headerlink" title="1. POM&#x4E2D; &#x5BFC;&#x5165; &#x7236;&#x9879;&#x76EE;(&#x7248;&#x672C;&#x4EF2;&#x88C1;)"></a>1. POM&#x4E2D; &#x5BFC;&#x5165; &#x7236;&#x9879;&#x76EE;(&#x7248;&#x672C;&#x4EF2;&#x88C1;)</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x5BFC;&#x5165;&#x4E86; spring-boot-starter-parent&#xFF0C; &#x800C;&#x5176;&#x7236;&#x9879;&#x76EE;pom&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86; &#x5F88;&#x591A;&#x76F8;&#x5173;&#x5305;&#x7684; &#x7248;&#x672C;&#x53F7; &#xFF08;&#x4E3A;&#x4E86;&#x4E8E;&#x8BE5; springboot&#x7248;&#x672C;&#x517C;&#x5BB9;&#x5427;&#xFF09;</p>
<p>==&#x300B; &#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x5F15;&#x5165;&#x4E00;&#x4E9B;&#x5305;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x53F7;&#x4E86;</p>
<h4 id="2-&#x542F;&#x52A8;&#x5668;"><a href="#2-&#x542F;&#x52A8;&#x5668;" class="headerlink" title="2. &#x542F;&#x52A8;&#x5668;"></a>2. &#x542F;&#x52A8;&#x5668;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x7D27;&#x63A5;&#x7740;&#xFF0C;&#x5728; pom&#x4E2D; &#x5BFC;&#x5165;&#x4E86; spring-boot-starter-web&#xFF0C;&#x5176;&#x5185;&#x5BB9;&#x5982;&#x4E0B;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.17.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x53D1;&#x73B0;&#xFF0C;spring-boot-starter-web &#x5C31;&#x662F;&#x5C06; web &#x5F00;&#x53D1;&#x73AF;&#x5883;&#x6240;&#x9700;&#x8981;&#x7684; jar&#x5305;&#x4F9D;&#x8D56; &#x90FD;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x4E86;</p>
<p>==&gt; spring-boot-starter-* &#x7CFB;&#x5217;pom&#xFF0C;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x4E86; &#x8981;&#x5B9E;&#x73B0;&#x8BE5;&#x5757;&#x529F;&#x80FD;&#x9700;&#x8981;&#x7684; jar &#x4F9D;&#x8D56;&#xFF0C;&#x76F4;&#x63A5;&#x5BFC;&#x5165; &#x8FD9;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
<h4 id="3-&#x4E3B;&#x7A0B;&#x5E8F;"><a href="#3-&#x4E3B;&#x7A0B;&#x5E8F;" class="headerlink" title="3. &#x4E3B;&#x7A0B;&#x5E8F;"></a>3. &#x4E3B;&#x7A0B;&#x5E8F;</h4><p>@SpringBootApplication &#x7528;&#x6765;&#x6807;&#x6CE8;&#x5728;&#x67D0;&#x5404;&#x7C7B;&#x4E0A;&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;&#x7C7B;&#x662F; springboot&#x7684; &#x4E3B;&#x914D;&#x7F6E;&#x7C7B;</p>
<p>==&#x300B; springboot &#x5E94;&#x8BE5;&#x5141;&#x8BB8;&#x8BE5;&#x7C7B;&#x7684; main&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x542F;&#x52A8;springboot &#x5E94;&#x7528;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.SpringBoot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBoot01Application</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        </span><br><span class="line">        SpringApplication.run(SpringBoot01Application.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x539F;&#x7406;:</p>
<ol>
<li>&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x529F;&#x80FD;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	@SpringBootApplication </span><br><span class="line"></span><br><span class="line">&#x200B;		=&gt; @SpringBootConfiguration </span><br><span class="line"></span><br><span class="line">&#x200B;			=&gt; @Configuration</span><br></pre></td></tr></table></figure>

<p>&#x200B;    ==&gt; &#x5373; &#x5176;&#x5E95;&#x5C42;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x7684;   @Configuration &#x6CE8;&#x89E3;</p>
<ol start="2">
<li><p>&#x81EA;&#x52A8;&#x626B;&#x63CF;&#x54EA;&#x4E9B;&#x5305;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	@EnableAutoConfiguration</span><br><span class="line"></span><br><span class="line">&#x200B;		=&gt;@AutoConfigurationPackage</span><br><span class="line"></span><br><span class="line">&#x200B;			=&gt;@Import({Registrar.class})</span><br><span class="line"></span><br><span class="line">&#x200B;				=&gt; Registrar &#x7684;registerBeanDefinitions &#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x4E86; @SpringBootApplication &#x6CE8;&#x89E3;&#x7C7B;&#x6240;&#x5728;&#x7684;&#x5305;&#xFF0C;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>&#x200B;    ==&gt; &#x5C06;@SpringBootApplication &#x6CE8;&#x89E3;&#x7C7B;&#x6240;&#x5728;&#x7684;&#x5305; &#x53CA;&#x4E0B;&#x9762;&#x6240;&#x6709;&#x5B50;&#x5305;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#xFF0C;&#x626B;&#x63CF;&#x5230;&#x5BB9;&#x5668; &#x4E2D;</p>
<ol start="3">
<li><p>&#x5BFC;&#x5165;&#x7EC4;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Import({AutoConfigurationImportSelector.class})</span><br><span class="line">&#x4F1A;&#x7ED9;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5BFC;&#x5165;&#x975E;&#x5E38;&#x591A;&#x7684; &#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7C7B; (**AutoConfiguration)</span><br><span class="line">	==&gt; &#x5373;&#x7ED9;&#x5BB9;&#x5668;&#x4E2D;&#x5BFC;&#x5165; &#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x6240;&#x9700;&#x8981;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x597D;&#x8FD9;&#x4E9B;&#x7EC4;&#x4EF6;</span><br></pre></td></tr></table></figure>

<p>SpringBoot &#x5728;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x4ECE; &#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#x7684; META-INFO/spring.factories &#x4E2D; &#x83B7;&#x53D6; EnableAutoConfiguration &#x6307;&#x5B9A;&#x7684;&#x503C;&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E9B;&#x503C; &#x4F5C;&#x4E3A; &#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x5BFC;&#x5165; &#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x5C31;&#x4F1A;&#x751F;&#x6548;</p>
<p><img src="/2019/10/16/SpringBoot/20191003114745.png" alt></p>
</li>
</ol>
<p>==&gt; &#x539F;&#x6765;&#x5728; xml &#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x73B0;&#x5728; AutoConfiguration &#x5DF2;&#x7ECF;&#x505A;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E86;</p>
<h2 id="&#x4E8C;-resources-&#x76EE;&#x5F55;&#x7ED3;&#x6784;"><a href="#&#x4E8C;-resources-&#x76EE;&#x5F55;&#x7ED3;&#x6784;" class="headerlink" title="&#x4E8C;. resources &#x76EE;&#x5F55;&#x7ED3;&#x6784;"></a>&#x4E8C;. resources &#x76EE;&#x5F55;&#x7ED3;&#x6784;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">	- static: &#x4FDD;&#x5B58;&#x6240;&#x6709;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90; js css images</span><br><span class="line">	- templates: &#x4FDD;&#x5B58;&#x6240;&#x6709;&#x7684;&#x6A21;&#x677F;&#x9875;&#x9762;(Spring Boot &#x9ED8;&#x8BA4;jar&#x5305;&#x4F7F;&#x7528; &#x9ED8;&#x8BA4;&#x7684;Tomcat&#xFF0C;&#x4E0D;&#x652F;&#x6301;JSP&#x9875;&#x9762;)&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x5F15;&#x64CE;(freemarker&#xFF0C;thymeleaf&#x7B49;&#x7B49;)</span><br><span class="line">	- application.properties: SpringBoot &#x5E94;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E09;-&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x4E09;-&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x4E09;. &#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x4E09;. &#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2><h3 id="1-&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#1-&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="1. &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>1. &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>SpringBoot &#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x662F;&#x56FA;&#x5B9A;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">application.properties</span><br><span class="line">application.yml</span><br></pre></td></tr></table></figure>

<h3 id="2-&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x503C;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;&#x7C7B;&#x7684;&#x5C5E;&#x6027;"><a href="#2-&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x503C;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;&#x7C7B;&#x7684;&#x5C5E;&#x6027;" class="headerlink" title="2. &#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x503C;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;&#x7C7B;&#x7684;&#x5C5E;&#x6027;"></a>2. &#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x503C;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;&#x7C7B;&#x7684;&#x5C5E;&#x6027;</h3><h4 id="&#x7F16;&#x5199;-application-yml-&#x6587;&#x4EF6;"><a href="#&#x7F16;&#x5199;-application-yml-&#x6587;&#x4EF6;" class="headerlink" title="&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;"></a>&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span> </span><br><span class="line"><span class="attr">  lastName:</span> <span class="string">hello</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  boss:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  birth:</span> <span class="number">2017</span><span class="string">/11/11</span></span><br><span class="line"><span class="attr">  maps:</span> <span class="string">{k1:</span> <span class="string">v1,</span> <span class="attr">k2:</span> <span class="number">12</span><span class="string">}</span></span><br><span class="line"><span class="attr">  lists:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">lisi</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">wangwu</span></span><br><span class="line"><span class="attr">  dog:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">fg</span></span><br><span class="line"><span class="attr">    age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h4 id="&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;"><a href="#&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;" class="headerlink" title="&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;"></a>&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;</h4><p>&#x4F7F;&#x7528; @ConfigurationProperties &#x6CE8;&#x89E3;&#xFF0C;&#x5373;&#x53EF;&#x5173;&#x8054;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x503C;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.SpringBoot.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * &#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x6620;&#x5C04;&#x5230;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E2D;</span></span><br><span class="line"><span class="comment"> * prefix: &#x5C06; person &#x4E0B;&#x7684;&#x6240;&#x6709;&#x5B57;&#x6BB5;&#xFF0C;&#x914D;&#x7F6E;&#x5230;&#x8BE5;&#x7C7B;</span></span><br><span class="line"><span class="comment"> * Component: &#x53EA;&#x6709;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#x662F;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x624D;&#x80FD;&#x4F7F;&#x7528; ConfigurationProperties &#x5BAB;&#x55EF;&#x90A3;&#x4E2A;</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">&quot;person&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">	<span class="comment">// &#x5FFD;&#x7565; getter setter toString &#x65B9;&#x6CD5;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.SpringBoot.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.security.PrivateKey;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">	<span class="comment">// &#x5FFD;&#x7565; getter setter toString &#x65B9;&#x6CD5;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.SpringBoot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.day.SpringBoot.bean.Person;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SpringBoot &#x7684; &#x5355;&#x5143;&#x6D4B;&#x8BD5;</span></span><br><span class="line"><span class="comment"> * &#x5728;&#x6D4B;&#x8BD5;&#x671F;&#x95F4;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x81EA;&#x52A8;&#x6CE8;&#x5165;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBoot01ApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6253;&#x5370;&#x7ED3;&#x679C;</span></span><br><span class="line">Person{lastName=<span class="string">&apos;hello&apos;</span>, age=<span class="number">10</span>, boss=<span class="keyword">false</span>, birth=Sat Nov <span class="number">11</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2017</span>, maps={k1=v1, k2=<span class="number">12</span>}, lists=[lisi, wangwu], dog=Dog{name=<span class="string">&apos;fg&apos;</span>, age=<span class="number">3</span>}}</span><br></pre></td></tr></table></figure>

<h4 id="&#x4F7F;&#x7528;-properties&#x65B9;&#x5F0F;"><a href="#&#x4F7F;&#x7528;-properties&#x65B9;&#x5F0F;" class="headerlink" title="&#x4F7F;&#x7528; properties&#x65B9;&#x5F0F;"></a>&#x4F7F;&#x7528; properties&#x65B9;&#x5F0F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server.port=8081</span><br><span class="line"></span><br><span class="line">person.last-name=aa</span><br><span class="line">person.age=12</span><br></pre></td></tr></table></figure>

<p>&#x5BF9;&#x4E8E; properties &#x4E2D;&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x95EE;&#x9898;&#x89E3;&#x51B3;:</p>
<p><img src="/2019/10/16/SpringBoot/20191003121712.png" alt></p>
<h3 id="3-value-&#x4E0E;-ConfigurationProperties-&#x6BD4;&#x8F83;"><a href="#3-value-&#x4E0E;-ConfigurationProperties-&#x6BD4;&#x8F83;" class="headerlink" title="3. @value &#x4E0E; @ConfigurationProperties &#x6BD4;&#x8F83;"></a>3. @value &#x4E0E; @ConfigurationProperties &#x6BD4;&#x8F83;</h3><ul>
<li><p>&#x677E;&#x6563;&#x7ED1;&#x5B9A;</p>
<p>&#x52A0;&#x5165; &#x7C7B;&#x4E2D;&#x5C5E;&#x6027;&#x4E3A; lastName, &#x5219;&#x5728; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;  last-name, last_name, lastName &#x90FD;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5339;&#x914D;</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody><tr>
<td>&#x529F;&#x80FD;</td>
<td>&#x6279;&#x91CF;&#x7684;&#x6CE8;&#x5165; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5C5E;&#x6027;</td>
<td>&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x8FDB;&#x884C;&#x6307;&#x5B9A;</td>
</tr>
<tr>
<td>&#x677E;&#x6563;&#x7ED1;&#x5B9A;</td>
<td>&#x652F;&#x6301;</td>
<td>&#x4E0D;&#x652F;&#x6301;</td>
</tr>
<tr>
<td>SPEL&#x8868;&#x8FBE;&#x5F0F;</td>
<td>&#x4E0D;&#x652F;&#x6301;</td>
<td>&#x652F;&#x6301;</td>
</tr>
<tr>
<td>JSR303&#x6570;&#x636E;&#x6821;&#x9A8C;</td>
<td>&#x652F;&#x6301;</td>
<td>&#x4E0D;&#x652F;&#x6301;</td>
</tr>
<tr>
<td>&#x590D;&#x6742;&#x6570;&#x636E;&#x7C7B;&#x578B;(map &#x7B49;)</td>
<td>&#x652F;&#x6301;</td>
<td>&#x4E0D;&#x652F;&#x6301;</td>
</tr>
</tbody></table>
<h3 id="4-&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;-properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#4-&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;-properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="4. &#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684; properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>4. &#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684; properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><h4 id="1-PropertySource"><a href="#1-PropertySource" class="headerlink" title="1. @PropertySource"></a>1. @PropertySource</h4><p>&#x4E0A;&#x9762;&#x4F7F;&#x7528; @ConfigurationProperties &#x6CE8;&#x89E3; &#x4E3A; Person &#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x503C;&#x65F6;&#xFF0C;person &#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x662F;&#x5B58;&#x653E;&#x5728; application.properties, &#x80FD;&#x5426;&#x5C06;&#x5176;&#x653E;&#x5728; &#x5355;&#x72EC;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5462;?</p>
<p>==&gt; &#x53EF;&#x4EE5;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; @PropertySource(value={&#x201C;classpath:&#x6587;&#x4EF6;&#x5728;&#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#x4F4D;&#x7F6E;&#x201D;}) &#x6CE8;&#x89E3;&#xFF0C;&#x6807;&#x8BC6; &#x5E94;&#x5F53;&#x8BFB;&#x53D6;&#x54EA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<h3 id="5-&#x4E3A;&#x5BB9;&#x5668;&#x6DFB;&#x52A0;&#x7EC4;&#x4EF6;"><a href="#5-&#x4E3A;&#x5BB9;&#x5668;&#x6DFB;&#x52A0;&#x7EC4;&#x4EF6;" class="headerlink" title="5. &#x4E3A;&#x5BB9;&#x5668;&#x6DFB;&#x52A0;&#x7EC4;&#x4EF6;"></a>5. &#x4E3A;&#x5BB9;&#x5668;&#x6DFB;&#x52A0;&#x7EC4;&#x4EF6;</h3><h4 id="1-ImportResource-&#xFF08;&#x4E0D;&#x63A8;&#x8350;"><a href="#1-ImportResource-&#xFF08;&#x4E0D;&#x63A8;&#x8350;" class="headerlink" title="1. @ImportResource &#xFF08;&#x4E0D;&#x63A8;&#x8350;)"></a>1. @ImportResource &#xFF08;&#x4E0D;&#x63A8;&#x8350;)</h4><p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5411; bean &#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; &#x7EC4;&#x4EF6;, &#x6211;&#x4EEC;&#x53EF;&#x4EE5; &#x521B;&#x5EFA;&#x4E00;&#x4E2A; xml&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x91CC;&#x914D;&#x7F6E;bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.day.SpringBoot.bean.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x5C06;&#x8BE5; xml &#x6587;&#x4EF6; &#x5728; springBoot &#x4E2D;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x5462;&#xFF1F;</p>
<blockquote>
<p>&#x4F7F;&#x7528; @ImportResource(value = {&#x201C;classpath:spring.xml&#x201D;})&#x6CE8;&#x89E3;&#xFF0C;&#x5BFC;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684; xml &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource</span>(value = {<span class="string">&quot;classpath:spring.xml&quot;</span>})</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBoot01Application</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(SpringBoot01Application.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="2-&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x7C7B;&#x65B9;&#x5F0F;"><a href="#2-&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x7C7B;&#x65B9;&#x5F0F;" class="headerlink" title="2. &#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x7C7B;&#x65B9;&#x5F0F;"></a>2. &#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x7C7B;&#x65B9;&#x5F0F;</h4><p>SPringBoot &#x63A8;&#x8350;&#x5168;&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4F7F;&#x7528;</p>
<blockquote>
<p>&#x4F7F;&#x7528; &#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x65B9;&#x5F0F;  @Configuration +  @Bean</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* &#x6807;&#x8BC6;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x7C7B;</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConf</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * &#x5C06;&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x653E;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;</span></span><br><span class="line"><span class="comment">     * bean &#x5BF9;&#x5E94; id &#x4E3A; &#x65B9;&#x6CD5;&#x540D;</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">dog</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Dog();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="6-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5360;&#x4F4D;&#x7B26;"><a href="#6-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5360;&#x4F4D;&#x7B26;" class="headerlink" title="6. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5360;&#x4F4D;&#x7B26;"></a>6. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5360;&#x4F4D;&#x7B26;</h3><ol>
<li><p>&#x968F;&#x673A;&#x6570;(random)</p>
</li>
<li><p>&#x4F7F;&#x7528;&#x524D;&#x9762;&#x914D;&#x7F6E;&#x7684;&#x503C;</p>
</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line"><span class="attr">  lastName:</span> <span class="string">hello${random.value}</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  boss:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  birth:</span> <span class="number">2017</span><span class="string">/11/11</span></span><br><span class="line"><span class="attr">  maps:</span> <span class="string">{k1:</span> <span class="string">v1,</span> <span class="attr">k2:</span> <span class="number">12</span><span class="string">}</span></span><br><span class="line"><span class="attr">  lists:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">lisi</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">wangwu</span></span><br><span class="line"><span class="attr">  dog:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">fg</span></span><br><span class="line">    <span class="string">//</span> <span class="string">&#x4F7F;&#x7528;&#x524D;&#x9762;&#x914D;&#x7F6E;&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x627E;&#x5230;&#xFF0C;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x503C;10</span></span><br><span class="line"><span class="attr">    age:</span> <span class="string">${person.age:10}</span></span><br></pre></td></tr></table></figure>

<h3 id="7-Profile"><a href="#7-Profile" class="headerlink" title="7. Profile"></a>7. Profile</h3><p>&#x662F;Spirng &#x5BF9; &#x4E0D;&#x540C;&#x7684;&#x73AF;&#x5883;(dev&#xFF0C;test&#xFF0C;deployment&#x7B49;&#x7B49;)&#xFF0C;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x63D0;&#x4F9B;&#x7684;&#x652F;&#x6301;</p>
<h4 id="1-&#x591A;profile-&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;"><a href="#1-&#x591A;profile-&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="1. &#x591A;profile &#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;"></a>1. &#x591A;profile &#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1&#x3002;&#x4E3A;&#x6BCF;&#x79CD;&#x73AF;&#x5883;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">    application.propertis  (&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;)</span><br><span class="line">    application-dev.propertis (dev &#x73AF;&#x5883;&#x4E0B; &#x914D;&#x7F6E;&#x6587;&#x4EF6;)</span><br><span class="line">    application-test.propertis (test &#x73AF;&#x5883;&#x4E0B; &#x914D;&#x7F6E;&#x6587;&#x4EF6;)</span><br><span class="line">    ....</span><br><span class="line">2. &#x5728; &#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C; &#x6FC0;&#x6D3B;profile (&#x5609;&#x5B9A;&#x6FC0;&#x6D3B; dev &#x73AF;&#x5883;)</span><br><span class="line">	spring.profiles.active=dev</span><br></pre></td></tr></table></figure>

<h4 id="2-yml&#x591A;&#x6587;&#x6863;&#x5757;&#x65B9;&#x5F0F;"><a href="#2-yml&#x591A;&#x6587;&#x6863;&#x5757;&#x65B9;&#x5F0F;" class="headerlink" title="2. yml&#x591A;&#x6587;&#x6863;&#x5757;&#x65B9;&#x5F0F;"></a>2. yml&#x591A;&#x6587;&#x6863;&#x5757;&#x65B9;&#x5F0F;</h4><ol>
<li>&#x4F7F;&#x7528;  &#x2014; &#x540E;&#xFF0C;&#x53D8;&#x6210;&#x591A;&#x4E2A;&#x6587;&#x6863;&#x5FEB;&#xFF0C;&#x6BCF;&#x90E8;&#x5206;&#x662F; &#x4E00;&#x4E2A;&#x6587;&#x6863;&#x5FEB;</li>
<li>&#x5728;&#x6BCF;&#x4E2A;&#x6587;&#x6863;&#x5FEB;&#x5185;&#xFF0C;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#xFF08;&#x8BE5;&#x5C5E;&#x6027;&#x5C5E;&#x4E8E;&#x8BE5;&#x6587;&#x6863;&#x5FEB;), &#x5E76;&#x672A;&#x8BE5;&#x6587;&#x6863;&#x5E93;&#x914D;&#x7F6E; profile&#x5C5E;&#x6027;</li>
<li>&#x6FC0;&#x6D3B;</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line"><span class="attr">  lastName:</span> <span class="string">hello${random.value}</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  boss:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  birth:</span> <span class="number">2017</span><span class="string">/11/11</span></span><br><span class="line"><span class="attr">  maps:</span> <span class="string">{k1:</span> <span class="string">v1,</span> <span class="attr">k2:</span> <span class="number">12</span><span class="string">}</span></span><br><span class="line"><span class="attr">  lists:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">lisi</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">wangwu</span></span><br><span class="line"><span class="attr">  dog:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">fg</span></span><br><span class="line"><span class="attr">    age:</span> <span class="string">${person.age}</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">7000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<h3 id="8-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x4F4D;&#x7F6E;"><a href="#8-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x4F4D;&#x7F6E;" class="headerlink" title="8. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x4F4D;&#x7F6E;"></a>8. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x4F4D;&#x7F6E;</h3><p>SpringBoot &#x5728;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x4F1A;&#x626B;&#x63CF;&#x4E00;&#x4E0B;&#x4F4D;&#x7F6E;&#x7684; application.properties &#x6216;&#x8005; application.yml &#x4F5C;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. file:./config/</span><br><span class="line">2. file:./</span><br><span class="line">3. classpath:/config/</span><br><span class="line">4. classpath:/</span><br><span class="line">&#x5176;&#x4E2D; file &#x8868;&#x793A;  &#x5F53;&#x524D;&#x9879;&#x76EE;&#x8DEF;&#x5F84;</span><br><span class="line">&#x4EE5;&#x4E0A;&#x6392;&#x5E8F;&#x662F;&#x4ECE;&#x4F18;&#x5148;&#x7EA7;&#x4ECE;&#x9AD8;&#x5230;&#x5E95;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C; &#x5E76;&#x4E14;&#x6240;&#x6709;&#x4F4D;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x88AB;&#x52A0;&#x8F7D; ===&gt; &#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x914D;&#x7F6E;&#x5185;&#x5BB9;&#x4F1A;&#x8986;&#x76D6;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; spring.config.location &#x6765;&#x6539;&#x53D8;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;</p>
<p>&#x200B;    ==&#x300B; &#x539F;&#x6765;&#x7684;&#x914D;&#x7F6E;&#x4E5F;&#x5728;&#xFF0C;&#x8DDF;&#x5F53;&#x524D;&#x7684;&#x662F; &#x4E92;&#x8865;&#x914D;&#x7F6E;</p>
<h2 id="&#x56DB;-&#x81EA;&#x5B9A;&#x914D;&#x7F6E;&#x7684;&#x539F;&#x7406;"><a href="#&#x56DB;-&#x81EA;&#x5B9A;&#x914D;&#x7F6E;&#x7684;&#x539F;&#x7406;" class="headerlink" title="&#x56DB;. &#x81EA;&#x5B9A;&#x914D;&#x7F6E;&#x7684;&#x539F;&#x7406;"></a>&#x56DB;. &#x81EA;&#x5B9A;&#x914D;&#x7F6E;&#x7684;&#x539F;&#x7406;</h2><p>&#x5F53;&#x524D;&#x5206;&#x6790;&#x7684; &#x7248;&#x672C; SpringBoot 1.5.10.RELEASE</p>
<p>&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x4F7F;&#x7528;&#x7684;&#x6CE8;&#x89E3;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- @SpringBootApplication</span><br><span class="line">	- @EnableAutoConfiguration</span><br><span class="line">		- @Import({EnableAutoConfigurationImportSelector.class})</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">  &#x5173;&#x952E;: EnableAutoConfigurationImportSelector.class</span><br><span class="line">  &#x5176;&#x7236;&#x7C7B;: AutoConfigurationImportSelector</span><br><span class="line">  	&#x8C03;&#x7528; selectImports&#x65B9;&#x6CD5;</span><br><span class="line">  		&#x8C03;&#x7528; getCandidateConfigurations</span><br><span class="line">  			&#x8C03;&#x7528; loadFactoryNames</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<h5 id="loadFactoryNames"><a href="#loadFactoryNames" class="headerlink" title="loadFactoryNames"></a>loadFactoryNames</h5><p>&#x83B7;&#x53D6;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x7684;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x540D;&#x79F0;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">loadFactoryNames</span><span class="params">(Class&lt;?&gt; factoryClass, ClassLoader classLoader)</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	EnableAutoConfiguration.class</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String factoryClassName = factoryClass.getName();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *	&#x52A0;&#x8F7D;&#x6BCF;&#x4E2A;&#x7C7B;&#x4E0B;&#x9762;&#x7684; META-INF/spring.factories &#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Enumeration&lt;URL&gt; urls = classLoader != <span class="keyword">null</span> ? classLoader.getResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>) : ClassLoader.getSystemResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>);</span><br><span class="line">        ArrayList result = <span class="keyword">new</span> ArrayList();</span><br><span class="line">			</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * &#x5C06;&#x8FD9;&#x4E2A; &#x6587;&#x4EF6;&#x4E2D;&#x7684; &#x5143;&#x7D20;&#x653E;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x62FC;&#x63A5;&#x6210;  properties &#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">while</span>(urls.hasMoreElements()) {</span><br><span class="line">            URL url = (URL)urls.nextElement();</span><br><span class="line">            Properties properties = PropertiesLoaderUtils.loadProperties(<span class="keyword">new</span> UrlResource(url));</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * &#x83B7;&#x53D6; properties &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#xFF0C; EnableAutoConfiguration.class &#x540D;&#x79F0;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x7684;&#x503C;</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            String factoryClassNames = properties.getProperty(factoryClassName);</span><br><span class="line">           <span class="comment">/* &#x5C06;&#x8FD9;&#x4E9B;&#x503C;&#x53D8;&#x4E3A;&#x6570;&#x7EC4;*/</span></span><br><span class="line">           result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    } <span class="keyword">catch</span> (IOException var8) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Unable to load [&quot;</span> + factoryClass.getName() + <span class="string">&quot;] factories from location [&quot;</span> + <span class="string">&quot;META-INF/spring.factories&quot;</span> + <span class="string">&quot;]&quot;</span>, var8);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="/2019/10/16/SpringBoot/20191004111615.png" alt></p>
<p>&#x5206;&#x6790; HttpEncodingAutoConfiguration &#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x5B9E;&#x73B0;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	@Configuration: &#x8868;&#x660E;&#x8BE5;&#x7C7B;&#x662F;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x4F5C;&#x7528;&#x7B49;&#x540C;&#x4E8E; &#x4E00;&#x4E2A; xml &#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * &#x542F;&#x7528;&#x7C7B;&#x7684; ConfigurationProperties &#x529F;&#x80FD;&#xFF1B;</span></span><br><span class="line"><span class="comment"> * &#x5C06; HttpEncodingProperties.class &#x6DFB;&#x52A0;&#x5230; &#x5BB9;&#x5668;&#x4E2D;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>({HttpEncodingProperties.class})</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x5E95;&#x5C42;&#x4F7F;&#x7528; @Conditional &#x6CE8;&#x89E3;</span></span><br><span class="line"><span class="comment"> * &#x8868;&#x793A; &#x53EA;&#x6709;&#x5728; &#x8BE5;&#x7C7B;&#x662F; web &#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x624D;&#x751F;&#x6548;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x8868;&#x793A;&#x53EA;&#x6709;&#x5728; &#x6709; CharacterEncodingFilter &#x7C7B;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D;&#x751F;&#x6548;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>({CharacterEncodingFilter.class})</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x8868;&#x793A;&#x53EA;&#x6709;&#x5728; spring.http.encoding.enabled = true &#x65F6;&#xFF0C;&#x624D;&#x751F;&#x6548;</span></span><br><span class="line"><span class="comment"> *  matchIfMissing = true&#xFF1A; &#x5982;&#x679C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x65F6; ture</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">    prefix = <span class="string">&quot;spring.http.encoding&quot;</span>,</span><br><span class="line">    value = {<span class="string">&quot;enabled&quot;</span>},</span><br><span class="line">    matchIfMissing = <span class="keyword">true</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingAutoConfiguration</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * HttpEncodingProperties: &#x8BE5;&#x7C7B;&#x6709;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x4F1A;&#x4ECE; SpringBoot &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HttpEncodingProperties properties;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6709;&#x53C2;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x5219;&#x4F1A;&#x4ECE; &#x5BB9;&#x5668;&#x4E2D;&#x52A0;&#x8F7D;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingAutoConfiguration</span><span class="params">(HttpEncodingProperties properties)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.properties = properties;</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	@Bean: &#x5C06;&#x8FD4;&#x56DE;&#x503C; CharacterEncodingFilter &#x6DFB;&#x52A0;&#x5230; &#x5BB9;&#x5668;&#x4E2D;(&#x539F;&#x6765;&#x65F6;&#x5728;xml &#x4E2D;&#xFF0C;&#x4F7F;&#x7528; &lt;bean&gt; &#x624B;&#x52A8;&#x914D;&#x7F6E;)</span></span><br><span class="line"><span class="comment">     * @ConditionalOnMissingBean&#xFF1A; &#x53EA;&#x6709;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x6CA1;&#x6709;&#x8BE5;&#x7C7B;&#x65F6;&#xFF0C;&#x624D;&#x8FDB;&#x884C;&#x65B0;&#x589E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>({CharacterEncodingFilter.class})</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CharacterEncodingFilter <span class="title">characterEncodingFilter</span><span class="params">()</span> </span>{</span><br><span class="line">        CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * this.properties.getCharset().name()&#xFF1A; &#x83B7;&#x53D6; HttpEncodingProperties &#x4E2D;&#x7684;&#x503C;&#xFF0C;&#x800C;&#x8BE5;&#x503C;&#x662F;&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#x7684;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">        filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.REQUEST));</span><br><span class="line">        filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.RESPONSE));</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HttpEncodingAutoConfiguration.<span class="function">LocaleCharsetMappingsCustomizer <span class="title">localeCharsetMappingsCustomizer</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HttpEncodingAutoConfiguration.LocaleCharsetMappingsCustomizer(<span class="keyword">this</span>.properties);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LocaleCharsetMappingsCustomizer</span> <span class="keyword">implements</span> <span class="title">EmbeddedServletContainerCustomizer</span>, <span class="title">Ordered</span> </span>{</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> HttpEncodingProperties properties;</span><br><span class="line"></span><br><span class="line">        LocaleCharsetMappingsCustomizer(HttpEncodingProperties properties) {</span><br><span class="line">            <span class="keyword">this</span>.properties = properties;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableEmbeddedServletContainer container)</span> </span>{</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.properties.getMapping() != <span class="keyword">null</span>) {</span><br><span class="line">                container.setLocaleCharsetMappings(<span class="keyword">this</span>.properties.getMapping());</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="HttpEncodingProperties"><a href="#HttpEncodingProperties" class="headerlink" title="HttpEncodingProperties"></a>HttpEncodingProperties</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @ConfigurationProperties&#xFF1A;&#x8868;&#x793A;&#x4ECE; SpringBoot &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684; spring.http.encoding &#x6BB5;&#x4E2D;&#x6620;&#x5C04;&#x6570;&#x636E;&#x5230;&#x8BE5;&#x7C7B;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">    prefix = <span class="string">&quot;spring.http.encoding&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingProperties</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET = Charset.forName(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> Charset charset;  <span class="comment">// &#x7F16;&#x7801;&#x7C7B;&#x578B;</span></span><br><span class="line">    <span class="keyword">private</span> Boolean force;    <span class="comment">// &#x662F;&#x5426;&#x5F3A;&#x5236;&#x7F16;&#x7801;&#x6240;&#x6709;&#x8BF7;&#x6C42;</span></span><br><span class="line">    <span class="keyword">private</span> Boolean forceRequest;</span><br><span class="line">    <span class="keyword">private</span> Boolean forceResponse;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Locale, Charset&gt; mapping;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingProperties</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.charset = DEFAULT_CHARSET;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Charset <span class="title">getCharset</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.charset;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCharset</span><span class="params">(Charset charset)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.charset = charset;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isForce</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Boolean.TRUE.equals(<span class="keyword">this</span>.force);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForce</span><span class="params">(<span class="keyword">boolean</span> force)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.force = force;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isForceRequest</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Boolean.TRUE.equals(<span class="keyword">this</span>.forceRequest);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForceRequest</span><span class="params">(<span class="keyword">boolean</span> forceRequest)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.forceRequest = forceRequest;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isForceResponse</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Boolean.TRUE.equals(<span class="keyword">this</span>.forceResponse);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForceResponse</span><span class="params">(<span class="keyword">boolean</span> forceResponse)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.forceResponse = forceResponse;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;Locale, Charset&gt; <span class="title">getMapping</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.mapping;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMapping</span><span class="params">(Map&lt;Locale, Charset&gt; mapping)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.mapping = mapping;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">shouldForce</span><span class="params">(HttpEncodingProperties.Type type)</span> </span>{</span><br><span class="line">        Boolean force = type == HttpEncodingProperties.Type.REQUEST ? <span class="keyword">this</span>.forceRequest : <span class="keyword">this</span>.forceResponse;</span><br><span class="line">        <span class="keyword">if</span> (force == <span class="keyword">null</span>) {</span><br><span class="line">            force = <span class="keyword">this</span>.force;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (force == <span class="keyword">null</span>) {</span><br><span class="line">            force = type == HttpEncodingProperties.Type.REQUEST;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> force;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">enum</span> Type {</span><br><span class="line">        REQUEST,</span><br><span class="line">        RESPONSE;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Type</span><span class="params">()</span> </span>{</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x603B;&#x7ED3;:</p>
<pre><code>1. SpringBoot &#x5728;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x52A0;&#x8F7D;&#x5927;&#x91CF;&#x7684; &#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;
 2. &#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x540D;&#x79F0;&#x89C4;&#x5219;:  ***AutoConfiguration.class
 3. &#x6BCF;&#x4E2A;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x90FD;&#x4F1A;&#x5173;&#x8054;&#x4E00;&#x4E2A; ***Properties.class, &#x7528;&#x6765;&#x4E0E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5173;&#x8054;&#xFF0C;&#x83B7;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x503C;
 4. &#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x4E2D;&#x9700;&#x8981;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x9996;&#x5148;&#x770B; SpringBoot &#x6709;&#x65E0; &#x5199;&#x597D;&#x7684;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#xFF1B; &#x5982;&#x679C;&#x6709;&#xFF0C;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D; &#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x7EC4;&#x4EF6;&#xFF1B; &#x67E5;&#x770B; &#x8BE5;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;&#x5BF9;&#x4E00;&#x4E2A;&#x7684; Properties &#x6587;&#x4EF6;&#xFF0C;&#x67E5;&#x770B;&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D; &#x914D;&#x7F6E;&#x54EA;&#x4E9B;&#x5C5E;&#x6027;</code></pre><h2 id="&#x4E94;-&#x65E5;&#x5FD7;"><a href="#&#x4E94;-&#x65E5;&#x5FD7;" class="headerlink" title="&#x4E94;. &#x65E5;&#x5FD7;"></a>&#x4E94;. &#x65E5;&#x5FD7;</h2><h3 id="1-&#x65E5;&#x5FD7;&#x6846;&#x67B6;"><a href="#1-&#x65E5;&#x5FD7;&#x6846;&#x67B6;" class="headerlink" title="1. &#x65E5;&#x5FD7;&#x6846;&#x67B6;"></a>1. &#x65E5;&#x5FD7;&#x6846;&#x67B6;</h3><table>
<thead>
<tr>
<th>&#x65E5;&#x5FD7;&#x95E8;&#x9762;(&#x65E5;&#x5FD7;&#x7684;&#x62BD;&#x8C61;&#x5C42;)</th>
</tr>
</thead>
<tbody><tr>
<td>JCL(jakarta commons loggint)</td>
</tr>
<tr>
<td>SLF4J(Simple Logging Facade for Java)</td>
</tr>
<tr>
<td>jboss-logging</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;</th>
</tr>
</thead>
<tbody><tr>
<td>Log4j</td>
</tr>
<tr>
<td>Log4j2</td>
</tr>
<tr>
<td>Logback</td>
</tr>
<tr>
<td>JUL(java.util.logging)</td>
</tr>
</tbody></table>
<p>&#x6700;&#x7EC8;&#x4F7F;&#x7528;:</p>
<p>&#x200B;    &#x65E5;&#x5FD7;&#x95E8;&#x9762;: SJL4j</p>
<p>&#x200B;    &#x65E5;&#x5FD7;&#x5B9E;&#x73B0;: Logback</p>
<h3 id="2-&#x5982;&#x4F55;&#x4F7F;&#x7528;-SLF4j"><a href="#2-&#x5982;&#x4F55;&#x4F7F;&#x7528;-SLF4j" class="headerlink" title="2. &#x5982;&#x4F55;&#x4F7F;&#x7528; SLF4j"></a>2. &#x5982;&#x4F55;&#x4F7F;&#x7528; SLF4j</h3><h5 id="&#x6CE8;&#x610F;"><a href="#&#x6CE8;&#x610F;" class="headerlink" title="&#x6CE8;&#x610F;:"></a>&#x6CE8;&#x610F;:</h5><p>&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x8C03;&#x7528;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E94;&#x8BE5;&#x8C03;&#x7528; &#x65E5;&#x5FD7;&#x95E8;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x4E0D;&#x662F; &#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x7684;</p>
<p>&#x6BCF;&#x4E2A;&#x65E5;&#x5FD7;&#x7684;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x90FD;&#x4F1A;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x4F7F;&#x7528; SLF4J&#x4E4B;&#x540E;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x81EA;&#x5DF1;&#x672C;&#x8EAB;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<h5 id="SLF4J&#x4E0E;&#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x7ED3;&#x5408;"><a href="#SLF4J&#x4E0E;&#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x7ED3;&#x5408;" class="headerlink" title="SLF4J&#x4E0E;&#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x7ED3;&#x5408;"></a>SLF4J&#x4E0E;&#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;&#x6846;&#x67B6;&#x7ED3;&#x5408;</h5><p><img src="/2019/10/16/SpringBoot/concrete-bindings.png" alt></p>
<h4 id="1-&#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6846;&#x67B6;"><a href="#1-&#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6846;&#x67B6;" class="headerlink" title="1. &#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6846;&#x67B6;"></a>1. &#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6846;&#x67B6;</h4><p>SpringBoot &#x9009;&#x62E9;&#x7684;&#x662F; slf4j+logback, &#x4F46;&#x5982;&#x679C;&#x8BE5;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x4E86; &#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#xFF0C;&#x6BD4;&#x5982; Spring(commons-logging), Hibernate(jboss-logging) &#x7B49;&#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x4E2D;&#x5C31;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x5982;&#x4F55;&#x7EDF;&#x4E00;&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5462;&#xFF1F;</p>
<ol>
<li>&#x5C06;&#x7CFB;&#x7EDF;&#x4E2D;&#x5176;&#x4ED6;&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5148;&#x6392;&#x9664;</li>
<li>&#x7528;&#x4E2D;&#x95F4;&#x5305;&#x8FDB;&#x884C;&#x66FF;&#x6362;&#x539F;&#x6709;&#x7684;&#x65E5;&#x5FD7;&#x6846;&#x67B6;</li>
<li>&#x5BFC;&#x5165;SLF4J&#x7684;&#x5176;&#x4ED6;&#x5B9E;&#x73B0;</li>
</ol>
<p><img src="/2019/10/16/SpringBoot/legacy.png" alt></p>
<h5 id="SpringBoot&#x4E2D;&#x4F9D;&#x8D56;"><a href="#SpringBoot&#x4E2D;&#x4F9D;&#x8D56;" class="headerlink" title="SpringBoot&#x4E2D;&#x4F9D;&#x8D56;"></a>SpringBoot&#x4E2D;&#x4F9D;&#x8D56;</h5><p>&#x5728;pom.xml &#x6587;&#x4EF6;&#xFF0C;&#x53F3;&#x952E; show dependes</p>
<p><img src="/2019/10/16/SpringBoot/20191004133120.png" alt></p>
<p>jcl-over-slf4j&#x7684;&#x5B9E;&#x73B0;</p>
<p><img src="/2019/10/16/SpringBoot/20191004133529.png" alt></p>
<h5 id="&#x6392;&#x9664;&#x539F;&#x6846;&#x67B6;&#x4F9D;&#x8D56;"><a href="#&#x6392;&#x9664;&#x539F;&#x6846;&#x67B6;&#x4F9D;&#x8D56;" class="headerlink" title="&#x6392;&#x9664;&#x539F;&#x6846;&#x67B6;&#x4F9D;&#x8D56;"></a>&#x6392;&#x9664;&#x539F;&#x6846;&#x67B6;&#x4F9D;&#x8D56;</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-&#x65E5;&#x5FD7;&#x4F7F;&#x7528;"><a href="#3-&#x65E5;&#x5FD7;&#x4F7F;&#x7528;" class="headerlink" title="3. &#x65E5;&#x5FD7;&#x4F7F;&#x7528;"></a>3. &#x65E5;&#x5FD7;&#x4F7F;&#x7528;</h3><p><img src="/2019/10/16/SpringBoot/20191004134350.png" alt></p>
<p>&#x914D;&#x7F6E;</p>
<p><img src="/2019/10/16/SpringBoot/20191004135103.png" alt></p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<blockquote>
<p>&#x5728;&#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#xFF0C;&#x653E; logback.xml &#x6587;&#x4EF6; &#x6216;&#x8005; logback-spring.xml &#x5373;&#x53EF;</p>
</blockquote>
<p>logback.xml &#x4E0E; logback-spring.xml &#x533A;&#x522B;:</p>
<p>&#x200B;    logback.xml &#xFF1A; &#x76F4;&#x63A5;&#x88AB; &#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x8BC6;&#x522B;</p>
<p>&#x200B;    logback-spring.xml:  &#x88AB; springboot &#x8BC6;&#x522B;&#x52A0;&#x8F7D;&#xFF0C;springboot &#x5728;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86; profile&#xFF0C;&#x5219;&#x6807;&#x8BC6; &#x8BE5;&#x5757;&#x914D;&#x7F6E;&#xFF0C;&#x53EA;&#x5728;&#x5BF9;&#x5E94;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x751F;&#x6548;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;springProfile name=&quot;test&quot;&gt;</span><br><span class="line">	&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x914D;&#x7F6E;</span><br><span class="line">&lt;/springProfile&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5207;&#x6362;"><a href="#4-&#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5207;&#x6362;" class="headerlink" title="4. &#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5207;&#x6362;"></a>4. &#x65E5;&#x5FD7;&#x6846;&#x67B6;&#x5207;&#x6362;</h3><h4 id="1-&#x65B9;&#x5F0F;&#x4E00;"><a href="#1-&#x65B9;&#x5F0F;&#x4E00;" class="headerlink" title="1. &#x65B9;&#x5F0F;&#x4E00;:"></a>1. &#x65B9;&#x5F0F;&#x4E00;:</h4><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x65B9;&#x5F0F;&#xFF0C;&#x6392;&#x9664;&#x5305; + &#x5F15;&#x5165;&#x65B0;&#x7684;&#x5305;&#x5373;&#x53EF;  &#xFF08;&#x6392;&#x9664;&#x5305; &#x53EF;&#x4EE5;&#x5728; Pom.xml &#x53F3;&#x952E; show dependence &#x4E2D;&#xFF0C;&#x9009;&#x62E9;&#x4F9D;&#x8D56;&#x5220;&#x9664;&#x5373;&#x53EF;)</p>
<h4 id="2-&#x65B9;&#x5F0F;&#x4E8C;"><a href="#2-&#x65B9;&#x5F0F;&#x4E8C;" class="headerlink" title="2. &#x65B9;&#x5F0F;&#x4E8C;:"></a>2. &#x65B9;&#x5F0F;&#x4E8C;:</h4><p>&#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;&#x90FD;&#x662F;  spring-boot-starter-logging, &#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x4E3A; spring-boot-starter-*** (&#x5BF9;&#x5E94;&#x7684;&#x65E5;&#x5FD7;&#x5B9E;&#x73B0;) &#x5373;&#x53EF;</p>
<h2 id="&#x516D;-Web&#x5F00;&#x53D1;"><a href="#&#x516D;-Web&#x5F00;&#x53D1;" class="headerlink" title="&#x516D;.Web&#x5F00;&#x53D1;"></a>&#x516D;.Web&#x5F00;&#x53D1;</h2><h3 id="1-&#x4F7F;&#x7528;&#x6B65;&#x9AA4;"><a href="#1-&#x4F7F;&#x7528;&#x6B65;&#x9AA4;" class="headerlink" title="1. &#x4F7F;&#x7528;&#x6B65;&#x9AA4;"></a>1. &#x4F7F;&#x7528;&#x6B65;&#x9AA4;</h3><ol>
<li>&#x521B;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x9009;&#x4E2D;&#x9700;&#x8981;&#x7684;&#x6A21;&#x5757; &#xFF08;springboot&#x4F1A;&#x5C06;&#x8FD9;&#x4E9B;&#x573A;&#x666F;&#x914D;&#x7F6E;&#x5B8C;&#x6BD5;)</li>
<li>&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;&#x5C11;&#x91CF;&#x914D;&#x7F6E;</li>
<li>&#x7F16;&#x5199;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;</li>
</ol>
<h3 id="2-&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x89C4;&#x5219;"><a href="#2-&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x89C4;&#x5219;" class="headerlink" title="2. &#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x89C4;&#x5219;"></a>2. &#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x89C4;&#x5219;</h3><p>&#x5206;&#x6790;&#x7C7B;: WebMvcAutoConfiguration.class</p>
<h4 id="1-webjars-&#x6620;&#x5C04;&#x5230;-classpath-META-INF-resources-webjars"><a href="#1-webjars-&#x6620;&#x5C04;&#x5230;-classpath-META-INF-resources-webjars" class="headerlink" title="1. /webjars/** &#x6620;&#x5C04;&#x5230; classpath:/META-INF/resources/webjars/"></a>1. /webjars/** &#x6620;&#x5C04;&#x5230; classpath:/META-INF/resources/webjars/</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>{</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) {</span><br><span class="line">                logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                Integer cachePeriod = <span class="keyword">this</span>.resourceProperties.getCachePeriod();</span><br><span class="line">                <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) {</span><br><span class="line">                    <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="keyword">new</span> String[]{<span class="string">&quot;/webjars/**&quot;</span>}).addResourceLocations(<span class="keyword">new</span> String[]{<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>}).setCachePeriod(cachePeriod));</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">                <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) {</span><br><span class="line">                    <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="keyword">new</span> String[]{staticPathPattern}).addResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations()).setCachePeriod(cachePeriod));</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br></pre></td></tr></table></figure>

<p>webjars: &#x4EE5;jar&#x5305;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5F15;&#x5165;&#x9759;&#x6001;&#x8D44;&#x6E90;</p>
<p>&#x6BD4;&#x5982;&#x4E00;&#x4E9B; jqury&#x6587;&#x4EF6;&#xFF0C;&#x4F1A;&#x88AB;&#x5C01;&#x88C5;&#x6210; jar&#x5305;&#xFF0C;&#x4F7F;&#x7528;&#x65F6;&#x53EA;&#x9700;&#x8981;&#x8FDB;&#x5165;jar&#x5305;&#x5373;&#x53EF;</p>
<p>localhost:8080/webjars/jquery/3.3.1/jquery.js &#x5373;&#x53EF;&#x8BBF;&#x95EE;</p>
<h4 id="2-&#x6620;&#x5C04;&#x5230;-&#x201C;classpath-META-INF-resources-&#x201C;-&#x201C;classpath-resources-&#x201C;-&#x201C;classpath-static-&#x201C;-&#x201C;classpath-public-&#x201C;&#xFF0C;&#x201D;-&#x201C;"><a href="#2-&#x6620;&#x5C04;&#x5230;-&#x201C;classpath-META-INF-resources-&#x201C;-&#x201C;classpath-resources-&#x201C;-&#x201C;classpath-static-&#x201C;-&#x201C;classpath-public-&#x201C;&#xFF0C;&#x201D;-&#x201C;" class="headerlink" title="2. /** &#x6620;&#x5C04;&#x5230; &#x201C;classpath:/META-INF/resources/&#x201C;, &#x201C;classpath:/resources/&#x201C;, &#x201C;classpath:/static/&#x201C;, &#x201C;classpath:/public/&#x201C;&#xFF0C;&#x201D;/&#x201C;"></a>2. /** &#x6620;&#x5C04;&#x5230; &#x201C;classpath:/META-INF/resources/&#x201C;, &#x201C;classpath:/resources/&#x201C;, &#x201C;classpath:/static/&#x201C;, &#x201C;classpath:/public/&#x201C;&#xFF0C;&#x201D;/&#x201C;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;</span><br><span class="line">classpath:/META-INF/resources/</span><br><span class="line">classpath:/resources/</span><br><span class="line">classpath:/static/</span><br><span class="line">classpath:/public/</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>&#x8BBF;&#x95EE;&#x5F53;&#x524D;&#x9879;&#x76EE;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x4F1A;&#x88AB;&#x6620;&#x5C04;&#x5230;&#x8FD9;&#x4E9B;&#x76EE;&#x5F55;</p>
<h4 id="3-&#x6620;&#x5C04;&#x5230;-&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B;-index-html"><a href="#3-&#x6620;&#x5C04;&#x5230;-&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B;-index-html" class="headerlink" title="3. / &#x6620;&#x5C04;&#x5230; &#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B; index.html"></a>3. / &#x6620;&#x5C04;&#x5230; &#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B; index.html</h4><p>&#x9ED8;&#x8BA4;&#x65F6;&#xFF0C;&#x8BBF;&#x95EE; localhost:8080/ &#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x754C;&#x9762;&#xFF1B;&#x5982;&#x679C;&#x5728;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x6DFB;&#x52A0;&#x4E86; index.html, &#x5219;&#x4F1A;&#x8FDB;&#x5165;&#x8BE5;&#x754C;&#x9762;</p>
<h3 id="3-&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF08;thymeleaf"><a href="#3-&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF08;thymeleaf" class="headerlink" title="3. &#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF08;thymeleaf)"></a>3. &#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF08;thymeleaf)</h3><h3 id="4-&#x6269;&#x5C55;SpringMVC"><a href="#4-&#x6269;&#x5C55;SpringMVC" class="headerlink" title="4. &#x6269;&#x5C55;SpringMVC"></a>4. &#x6269;&#x5C55;SpringMVC</h3><p>&#x5728;&#x4F7F;&#x7528; SpringMVC&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x914D;&#x7F6E; url &#x8F6C;&#x5230; &#x754C;&#x9762;&#xFF0C;&#x5982;&#x4E0B;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#xFF0C;&#x5728;SpringBoot&#x4E2D;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5462;&#xFF1F;</p>
<p>SpringBoot&#x4E2D;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7; &#x7EE7;&#x627F;  WebMvcConfigurerAdapter &#x7C7B;&#xFF0C;&#x5E76;&#x4F7F;&#x7528; @Configuration &#x6CE8;&#x89E3;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6269;&#x5C55;&#x4EC0;&#x4E48;&#x529F;&#x80FD;&#xFF0C;&#x5B9E;&#x73B0; &#x8BE5;&#x7C7B;&#x7684; &#x65B9;&#x6CD5;&#x5373;&#x53EF;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x539F;&#x6765;&#x5728; xml &#x4E2D;&#x914D;&#x7F6E; &#x8BBF;&#x95EE; /hello &#x8FD9;&#x4E2A;url&#xFF0C;&#x76F4;&#x63A5;&#x8DF3;&#x8F6C;&#x5230; success &#x754C;&#x9762;</span></span><br><span class="line"><span class="comment">     * &lt;mvc:view-controller path=&quot;/hello&quot; view-name=&quot;success&quot;/&gt;</span></span><br><span class="line"><span class="comment">     * &#x5728;SpringBoot&#x4E2D;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528; &#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x4E0B;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>{</span><br><span class="line"><span class="comment">//        super.addViewControllers(registry);</span></span><br><span class="line">        registry.addViewController(<span class="string">&quot;/hello&quot;</span>).setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="5-&#x9519;&#x8BEF;&#x5904;&#x7406;"><a href="#5-&#x9519;&#x8BEF;&#x5904;&#x7406;" class="headerlink" title="5. &#x9519;&#x8BEF;&#x5904;&#x7406;"></a>5. &#x9519;&#x8BEF;&#x5904;&#x7406;</h3><p>SpringMVC &#x4F1A;&#x5728;&#x51FA;&#x9519;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x51FA;&#x9519;&#x754C;&#x9762;&#xFF08;&#x6D4F;&#x89C8;&#x5668;&#xFF09;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x6BD4;&#x5982;postman&#x7B49;&#xFF0C;&#x4F1A;&#x8FD4;&#x56DE;json&#x6570;&#x636E;</p>
<h4 id="&#x5B9A;&#x503C;&#x9519;&#x8BEF;&#x754C;&#x9762;"><a href="#&#x5B9A;&#x503C;&#x9519;&#x8BEF;&#x754C;&#x9762;" class="headerlink" title="&#x5B9A;&#x503C;&#x9519;&#x8BEF;&#x754C;&#x9762;:"></a>&#x5B9A;&#x503C;&#x9519;&#x8BEF;&#x754C;&#x9762;:</h4><h5 id="1-&#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;html&#x754C;&#x9762;"><a href="#1-&#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;html&#x754C;&#x9762;" class="headerlink" title="1. &#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;html&#x754C;&#x9762;"></a>1. &#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;html&#x754C;&#x9762;</h5><p>&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;&#x6A21;&#x677F;&#x5F15;&#x64CE;</p>
<blockquote>
<ol>
<li>&#x5C06;&#x9519;&#x8BEF;&#x754C;&#x9762;&#x547D;&#x540D;&#x4E3A; &#x9519;&#x8BEF;&#x7801;.html, &#x653E;&#x7F6E;&#x8DEF;&#x5F84;&#x4E3A; templates/error/&#x9519;&#x8BEF;&#x7801;.html </li>
<li>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;  templates/error/4xx.html  templates/error/5xx.html &#x6765;&#x5904;&#x7406;&#x51FA;&#x7C97;&#x754C;&#x9762;</li>
<li>&#x5728; &#x9519;&#x8BEF;&#x7801;.html &#x548C; 4xx.html 5xx.html &#x90FD;&#x914D;&#x7F6E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CBE;&#x786E;&#x5339;&#x914D;&#x4F18;&#x5148;</li>
</ol>
</blockquote>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x5F15;&#x64CE;</p>
<p>&#x200B;    &#x5728;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF0C;&#x67E5;&#x627E; &#x9519;&#x8BEF;&#x7801;&#x5BF9;&#x5E94;&#x7684;&#x754C;&#x9762;</p>
<p>&#x754C;&#x9762;&#x4E2D;&#xFF0C;&#x53EF;&#x83B7;&#x53D6;&#x7684;&#x4FE1;&#x606F;&#x6709;, &#x7531;&#x4E8E;&#x5728;model&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ${}&#x76F4;&#x63A5;&#x83B7;&#x53D6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">timestamp</span><br><span class="line">status</span><br><span class="line">error</span><br><span class="line">exception</span><br><span class="line">message</span><br><span class="line">path</span><br></pre></td></tr></table></figure>

<h5 id="2-&#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;json&#x6570;&#x636E;"><a href="#2-&#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;json&#x6570;&#x636E;" class="headerlink" title="2. &#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;json&#x6570;&#x636E;"></a>2. &#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x7684;json&#x6570;&#x636E;</h5><p>&#x65B9;&#x5F0F;&#x4E00;:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExceptionHandler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(UserNotExist.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">handleException</span><span class="params">(Exception e)</span> </span>{</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;&#x7684;&#x90FD;&#x662F;json&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x81EA;&#x9002;&#x5E94;</p>
<p>&#x65B9;&#x5F0F;&#x4E8C;:</p>
<p>&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x4E4B;&#x540E;&#xFF0C;&#x8F6C;&#x53D1;&#x5230; /error</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExceptionHandler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(UserNotExist.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleException</span><span class="params">(Exception e, HttpServletRequest request)</span> </span>{</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x5426;&#x5219; /error &#x89E3;&#x6790;&#x5230;&#x7684;&#x72B6;&#x6001;&#x7801;&#x4E3A; 200</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;javax.servlet.error.status_code&quot;</span>, <span class="number">400</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/error&quot;</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#x6B64;&#x65F6;&#xFF0C;&#x867D;&#x7136;&#x80FD;&#x591F;&#x8DF3;&#x8F6C;&#x5230; &#x9519;&#x8BEF;&#x754C;&#x9762;&#xFF0C;&#x4F46;&#x662F; &#x5374;&#x4E0D;&#x80FD;&#x5C06; map &#x6570;&#x636E;&#x4F20;&#x9012;&#x8FC7;&#x53BB;</p>
<p>&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x7B49;&#xFF0C;&#x662F;&#x4F7F;&#x7528; DefaultErrorAttributes &#x7684; getErrorAttributes &#x83B7;&#x53D6;&#x7684;&#xFF1B;&#x5E76;&#x4E14; DefaultErrorAttributes  &#x4E5F;&#x662F;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624D;&#x4F1A;&#x88AB;&#x52A0;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x7684;</p>
<p>&#x200B;    &#x90A3;&#x4E48;&#xFF0C;&#x91CD;&#x5199; DefaultErrorAttributes &#x7C7B;&#xFF0C;&#x5728; getErrorAttributes  &#x6DFB;&#x52A0;&#x4E0A;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x5373;&#x53EF;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    &#x6DFB;&#x52A0;&#x5230; &#x5BB9;&#x5668;&#x4E2D;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorAttributes</span> <span class="keyword">extends</span> <span class="title">DefaultErrorAttributes</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(RequestAttributes requestAttributes, <span class="keyword">boolean</span> includeStackTrace)</span> </span>{</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * &#x9996;&#x5148;&#xFF0C;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;map&#x4E2D;&#x6DFB;&#x52A0;&#x539F;&#x6765;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">super</span>.getErrorAttributes(requestAttributes, includeStackTrace);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * &#x4ECE; request &#x57DF;&#x4E2D;&#xFF0C;&#x53D6;&#x51FA;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x653E;&#x5165;map&#x4E2D;&#x5373;&#x53EF;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; myerrinfo = (Map&lt;String, Object&gt;) requestAttributes.getAttribute(<span class="string">&quot;myerrinfo&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;err&quot;</span>, myerrinfo);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="1-&#x539F;&#x7406;"><a href="#1-&#x539F;&#x7406;" class="headerlink" title="1. &#x539F;&#x7406;"></a>1. &#x539F;&#x7406;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// &#x9519;&#x8BEF;&#x5904;&#x7406;&#x7684; &#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x7C7B;</span><br><span class="line">ErrorMvcAutoConfiguration</span><br></pre></td></tr></table></figure>

<h5 id="ErrorPageCustomizer&#x7EC4;&#x4EF6;"><a href="#ErrorPageCustomizer&#x7EC4;&#x4EF6;" class="headerlink" title="ErrorPageCustomizer&#x7EC4;&#x4EF6;"></a>ErrorPageCustomizer&#x7EC4;&#x4EF6;</h5><p>&#x7CFB;&#x7EDF;&#x4E00;&#x65E6;&#x51FA;&#x73B0;4xx 5xx &#x4E4B;&#x7C7B;&#x9519;&#x8BEF;&#xFF0C;ErrorPageCustomizer&#x5C31;&#x4F1A;&#x751F;&#x6548;</p>
<p>&#x4F5C;&#x7528;: &#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x8C03;&#x7528; /error &#x8BF7;&#x6C42;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorPageCustomizer</span> <span class="keyword">implements</span> <span class="title">ErrorPageRegistrar</span>, <span class="title">Ordered</span> </span>{</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> ServerProperties properties;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="title">ErrorPageCustomizer</span><span class="params">(ServerProperties properties)</span> </span>{</span><br><span class="line">            <span class="keyword">this</span>.properties = properties;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerErrorPages</span><span class="params">(ErrorPageRegistry errorPageRegistry)</span> </span>{</span><br><span class="line">            <span class="comment">// /error</span></span><br><span class="line">            ErrorPage errorPage = <span class="keyword">new</span> ErrorPage(<span class="keyword">this</span>.properties.getServletPrefix() + <span class="keyword">this</span>.properties.getError().getPath());</span><br><span class="line">            errorPageRegistry.addErrorPages(<span class="keyword">new</span> ErrorPage[]{errorPage});</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h5 id="BasicErrorController&#x7EC4;&#x4EF6;"><a href="#BasicErrorController&#x7EC4;&#x4EF6;" class="headerlink" title="BasicErrorController&#x7EC4;&#x4EF6;"></a>BasicErrorController&#x7EC4;&#x4EF6;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	1. &#x7528;&#x6765;&#x5904;&#x7406; /error &#x8BF7;&#x6C42;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>({<span class="string">&quot;${server.error.path:${error.path:/error}}&quot;</span>})</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicErrorController</span> <span class="keyword">extends</span> <span class="title">AbstractErrorController</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ErrorProperties errorProperties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BasicErrorController</span><span class="params">(ErrorAttributes errorAttributes, ErrorProperties errorProperties)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>(errorAttributes, errorProperties, Collections.emptyList());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BasicErrorController</span><span class="params">(ErrorAttributes errorAttributes, ErrorProperties errorProperties, List&lt;ErrorViewResolver&gt; errorViewResolvers)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(errorAttributes, errorViewResolvers);</span><br><span class="line">        Assert.notNull(errorProperties, <span class="string">&quot;ErrorProperties must not be null&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.errorProperties = errorProperties;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorPath</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.errorProperties.getPath();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x8FD4;&#x56DE; html &#x754C;&#x9762; </span></span><br><span class="line"><span class="comment">     *  &#x6839;&#x636E; produces = {&quot;text/html&quot;} &#x533A;&#x5206;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(</span><br><span class="line">        produces = {<span class="string">&quot;text/html&quot;</span>}</span><br><span class="line">    )</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>{</span><br><span class="line">        HttpStatus status = <span class="keyword">this</span>.getStatus(request);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &#x83B7;&#x53D6; model &#x6570;&#x636E; &#x8C03;&#x7528;&#x7684;&#x65F6; DefaultErrorAttributes &#x7684;getErrorAttributes&#x65B9;&#x6CD5;&#x83B7;&#x53D6;model</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; model = Collections.unmodifiableMap(<span class="keyword">this</span>.getErrorAttributes(request, <span class="keyword">this</span>.isIncludeStackTrace(request, MediaType.TEXT_HTML)));</span><br><span class="line">        response.setStatus(status.value());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &#x89E3;&#x6790;&#x8981;&#x8DF3;&#x8F6C;&#x5230;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x548C;&#x6570;&#x636E; &#xFF08;ModelAndView)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">this</span>.resolveErrorView(request, response, status, model);</span><br><span class="line">        <span class="keyword">return</span> modelAndView == <span class="keyword">null</span> ? <span class="keyword">new</span> ModelAndView(<span class="string">&quot;error&quot;</span>, model) : modelAndView;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x8FD4;&#x56DE; json &#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {</span><br><span class="line">        Map&lt;String, Object&gt; body = <span class="keyword">this</span>.getErrorAttributes(request, <span class="keyword">this</span>.isIncludeStackTrace(request, MediaType.ALL));</span><br><span class="line">        HttpStatus status = <span class="keyword">this</span>.getStatus(request);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(body, status);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    	 *	&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;  errorViewResolvers&#xFF0C;&#x89E3;&#x6790;&#x9519;&#x8BEF;</span></span><br><span class="line"><span class="comment">    	 */</span></span><br><span class="line">        Iterator var5 = <span class="keyword">this</span>.errorViewResolvers.iterator();</span><br><span class="line"></span><br><span class="line">        ModelAndView modelAndView;</span><br><span class="line">        <span class="keyword">do</span> {</span><br><span class="line">            <span class="keyword">if</span> (!var5.hasNext()) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            ErrorViewResolver resolver = (ErrorViewResolver)var5.next();</span><br><span class="line">            modelAndView = resolver.resolveErrorView(request, status, model);</span><br><span class="line">        } <span class="keyword">while</span>(modelAndView == <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h5 id="DefaultErrorViewResolver&#x7EC4;&#x4EF6;"><a href="#DefaultErrorViewResolver&#x7EC4;&#x4EF6;" class="headerlink" title="DefaultErrorViewResolver&#x7EC4;&#x4EF6;"></a>DefaultErrorViewResolver&#x7EC4;&#x4EF6;</h5><p>&#x8BE5;&#x7EC4;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684; errorViewResolvers</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * &#x89E3;&#x6790;&#x9519;&#x8BEF; &#x754C;&#x9762;</span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">this</span>.resolve(String.valueOf(status), model);</span><br><span class="line">    	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    	 * SERIES_VIEWS &#x4E2D;&#x5B9A;&#x4E49;&#x4E86; 4xx &#x548C;  5xx &#x9519;&#x8BEF;</span></span><br><span class="line"><span class="comment">    	 * &#x5982;&#x679C; status &#x5BF9;&#x5E94;&#x7684; &#x754C;&#x9762;&#x672A;&#x627E;&#x5230;&#xFF0C;&#x5224;&#x65AD; &#x9519;&#x8BEF;</span></span><br><span class="line"><span class="comment">    	 	&#x5982;&#x679C;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x9519;&#x8BEF;&#xFF0C;&#x67E5;&#x627E; 4xx &#x5BF9;&#x5E94;&#x7684;&#x754C;&#x9762;;</span></span><br><span class="line"><span class="comment">    	 	&#x5982;&#x679C;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9519;&#x8BEF;&#xFF0C;&#x67E5;&#x627E; 5xx &#x5BF9;&#x5E94;&#x7684;&#x754C;&#x9762;</span></span><br><span class="line"><span class="comment">    	 * ==&#x300B; &#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#xFF0C;&#x6BD5;&#x7ADF;&#x6BCF;&#x79CD;&#x72B6;&#x6001;&#x5417;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x53EF;&#x4EE5;&#x5728; &#x63D0;&#x4F9B; error/4xx.html error/5xx.html&#x4E24;&#x4E2A;&#x754C;&#x9762;&#xFF0C;&#x6765;&#x5904;&#x7406;&#x6240;&#x6709;&#x7684; 4xx &#x548C; 5xx &#x9519;&#x8BEF;&#x8BF7;&#x6C42;	</span></span><br><span class="line"><span class="comment">    	 */</span></span><br><span class="line">        <span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) {</span><br><span class="line">            modelAndView = <span class="keyword">this</span>.resolve((String)SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * viewName&#xFF1A; &#x9519;&#x8BEF;&#x7801;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x9519;&#x8BEF;View&#x540D;&#x79F0;&#x4E3A;:  error/&#x9519;&#x8BEF;&#x7801;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String errorViewName = <span class="string">&quot;error/&quot;</span> + viewName;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x5224;&#x65AD;&#x8BE5;&#x540D;&#x79F0;&#x7684;view&#xFF0C;&#x5728; &#x6A21;&#x677F;&#x5F15;&#x64CE;&#x4E0B; &#x80FD;&#x5426;&#x627E;&#x5230;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TemplateAvailabilityProvider provider = <span class="keyword">this</span>.templateAvailabilityProviders.getProvider(errorViewName, <span class="keyword">this</span>.applicationContext);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x5982;&#x679C;&#x80FD;&#x627E;&#x5230;&#xFF0C;&#x5373;  templates/error/&#x9519;&#x8BEF;&#x7801;.html</span></span><br><span class="line"><span class="comment">     *  &#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x904D;&#x5386;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x770B;&#x80FD;&#x5426;&#x627E;&#x5230;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">return</span> provider != <span class="keyword">null</span> ? <span class="keyword">new</span> ModelAndView(errorViewName, model) : <span class="keyword">this</span>.resolveResource(errorViewName, model);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolveResource</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>{</span><br><span class="line">    String[] var3 = <span class="keyword">this</span>.resourceProperties.getStaticLocations();</span><br><span class="line">    <span class="keyword">int</span> var4 = var3.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> var5 = <span class="number">0</span>; var5 &lt; var4; ++var5) {</span><br><span class="line">        String location = var3[var5];</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * &#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x67E5;&#x627E; viewName &#x5BF9;&#x5E94;&#x7684; html</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Resource resource = <span class="keyword">this</span>.applicationContext.getResource(location);</span><br><span class="line">            resource = resource.createRelative(viewName + <span class="string">&quot;.html&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (resource.exists()) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="keyword">new</span> DefaultErrorViewResolver.HtmlResourceView(resource), model);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception var8) {</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">static</span> {</span><br><span class="line">        Map&lt;Series, String&gt; views = <span class="keyword">new</span> HashMap();</span><br><span class="line">        views.put(Series.CLIENT_ERROR, <span class="string">&quot;4xx&quot;</span>);</span><br><span class="line">        views.put(Series.SERVER_ERROR, <span class="string">&quot;5xx&quot;</span>);</span><br><span class="line">        SERIES_VIEWS = Collections.unmodifiableMap(views);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h5 id="DefaultErrorAttributes&#x7EC4;&#x4EF6;"><a href="#DefaultErrorAttributes&#x7EC4;&#x4EF6;" class="headerlink" title="DefaultErrorAttributes&#x7EC4;&#x4EF6;"></a>DefaultErrorAttributes&#x7EC4;&#x4EF6;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * &#x5C06;&#x51FA;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x5C01;&#x88C5;&#x6210;model&#xFF0C;&#x8FD4;&#x56DE;</span></span><br><span class="line"><span class="comment"> * model&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x6709;:</span></span><br><span class="line"><span class="comment"> 	timestamp</span></span><br><span class="line"><span class="comment"> 	status</span></span><br><span class="line"><span class="comment"> 	error</span></span><br><span class="line"><span class="comment"> 	exception</span></span><br><span class="line"><span class="comment"> 	message</span></span><br><span class="line"><span class="comment"> 	path</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(RequestAttributes requestAttributes, <span class="keyword">boolean</span> includeStackTrace)</span> </span>{</span><br><span class="line">        Map&lt;String, Object&gt; errorAttributes = <span class="keyword">new</span> LinkedHashMap();</span><br><span class="line">        errorAttributes.put(<span class="string">&quot;timestamp&quot;</span>, <span class="keyword">new</span> Date());</span><br><span class="line">        <span class="keyword">this</span>.addStatus(errorAttributes, requestAttributes);</span><br><span class="line">        <span class="keyword">this</span>.addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);</span><br><span class="line">        <span class="keyword">this</span>.addPath(errorAttributes, requestAttributes);</span><br><span class="line">        <span class="keyword">return</span> errorAttributes;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h3 id="6-&#x914D;&#x7F6E;&#x5D4C;&#x5165;&#x5F0F;-Servlet-&#x5BB9;&#x5668;"><a href="#6-&#x914D;&#x7F6E;&#x5D4C;&#x5165;&#x5F0F;-Servlet-&#x5BB9;&#x5668;" class="headerlink" title="6. &#x914D;&#x7F6E;&#x5D4C;&#x5165;&#x5F0F; Servlet &#x5BB9;&#x5668;"></a>6. &#x914D;&#x7F6E;&#x5D4C;&#x5165;&#x5F0F; Servlet &#x5BB9;&#x5668;</h3><p>SpringBoot &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x662F; &#x5D4C;&#x5165;&#x5F0F;&#x7684; Servlet (Tomcat)</p>
<h4 id="1-&#x5B9A;&#x5236;&#x4FEE;&#x6539;-Servlet-&#x5BB9;&#x5668;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;"><a href="#1-&#x5B9A;&#x5236;&#x4FEE;&#x6539;-Servlet-&#x5BB9;&#x5668;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;" class="headerlink" title="1. &#x5B9A;&#x5236;&#x4FEE;&#x6539; Servlet &#x5BB9;&#x5668;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;"></a>1. &#x5B9A;&#x5236;&#x4FEE;&#x6539; Servlet &#x5BB9;&#x5668;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;</h4><h5 id="&#x65B9;&#x5F0F;&#x4E00;"><a href="#&#x65B9;&#x5F0F;&#x4E00;" class="headerlink" title="&#x65B9;&#x5F0F;&#x4E00;"></a>&#x65B9;&#x5F0F;&#x4E00;</h5><p>&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4FEE;&#x6539; server&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#xFF08;ServerProperties)</p>
<h5 id="&#x65B9;&#x5F0F;&#x4E8C;"><a href="#&#x65B9;&#x5F0F;&#x4E8C;" class="headerlink" title="&#x65B9;&#x5F0F;&#x4E8C;"></a>&#x65B9;&#x5F0F;&#x4E8C;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EmbeddedServletContainerCustomizer <span class="title">embeddedServletContainerCustomizer</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> EmbeddedServletContainerCustomizer() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableEmbeddedServletContainer container)</span> </span>{</span><br><span class="line">                container.setPort(<span class="number">8081</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h4 id="2-&#x6CE8;&#x518C;-Servlet-Filter-Listener"><a href="#2-&#x6CE8;&#x518C;-Servlet-Filter-Listener" class="headerlink" title="2. &#x6CE8;&#x518C; Servlet, Filter, Listener"></a>2. &#x6CE8;&#x518C; Servlet, Filter, Listener</h4><p>&#x5728;SpringMVC&#x4E2D;&#xFF0C;&#x6CE8;&#x518C; Servlet&#xFF0C;Filter&#xFF0C;Listener &#x7B49;&#xFF0C;&#x90FD;&#x662F;&#x5728; web.xml &#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F; SpringBoot &#x4F7F;&#x7528;&#x7684;&#x662F; &#x5D4C;&#x5165;&#x5F0F;&#x7684; Servlet&#xFF0C;&#x5E76;&#x6CA1;&#x6709; web.xml &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<p>SpringBoot &#x4E2D;&#xFF0C;&#x6CE8;&#x518C;&#x4E09;&#x5927;&#x7EC4;&#x4EF6;&#x65B9;&#x5F0F;</p>
<blockquote>
<p>ServletRegistrationBean</p>
<p>FilterRegistrationBean</p>
<p>ServletlistenerRegistrationBean</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">myServlet</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * &#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x5199;&#x7684; servlet&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; ServletRegistrationBean&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x653E;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> Myservlet(), <span class="string">&quot;/myservlet&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="3-&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;Servlet&#x5BB9;&#x5668;"><a href="#3-&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;Servlet&#x5BB9;&#x5668;" class="headerlink" title="3. &#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;Servlet&#x5BB9;&#x5668;"></a>3. &#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;Servlet&#x5BB9;&#x5668;</h4><p>Jetty(&#x652F;&#x6301;&#x957F;&#x8FDE;&#x63A5;)</p>
<p>Undertow(&#x4E0D;&#x652F;&#x6301;jsp&#xFF0C;&#x4F46;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x9AD8;&#x5E76;&#x53D1;)</p>
<h5 id="&#x5207;&#x6362;&#xFF1A;"><a href="#&#x5207;&#x6362;&#xFF1A;" class="headerlink" title="&#x5207;&#x6362;&#xFF1A;"></a>&#x5207;&#x6362;&#xFF1A;</h5><ol>
<li>&#x53BB;&#x9664;tomcat&#x4F9D;&#x8D56;</li>
</ol>
<p><img src="/2019/10/16/SpringBoot/20191004234339.png" alt></p>
<ol start="2">
<li>&#x6DFB;&#x52A0; jetty</li>
</ol>
<p><img src="/2019/10/16/SpringBoot/20191004234518.png" alt></p>
<h4 id="4-&#x5D4C;&#x5165;&#x5F0F;Servlet-&#x5BB9;&#x5668;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x539F;&#x7406;"><a href="#4-&#x5D4C;&#x5165;&#x5F0F;Servlet-&#x5BB9;&#x5668;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x539F;&#x7406;" class="headerlink" title="4. &#x5D4C;&#x5165;&#x5F0F;Servlet &#x5BB9;&#x5668;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x539F;&#x7406;"></a>4. &#x5D4C;&#x5165;&#x5F0F;Servlet &#x5BB9;&#x5668;&#x81EA;&#x52A8;&#x914D;&#x7F6E;&#x539F;&#x7406;</h4><ol>
<li>&#x6839;&#x636E; &#x5BFC;&#x5165;&#x7684;&#x4F9D;&#x8D56;&#x5305;(tomcat, jety, Undertow&#x7B49;)&#xFF0C;&#x5BB9;&#x5668;&#x4E2D;&#x5C31;&#x4F1A;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x7C7B;&#xFF0C;&#x9009;&#x62E9;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684; ***EmbeddedServletContainerFactory</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	EmbeddedServletContainerAutoConfiguration</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass</span>({Servlet.class, Undertow.class, SslClientAuthMode.class})</span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">        value = {EmbeddedServletContainerFactory.class},</span><br><span class="line">        search = SearchStrategy.CURRENT</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedUndertow</span> </span>{</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedUndertow</span><span class="params">()</span> </span>{</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> UndertowEmbeddedServletContainerFactory <span class="title">undertowEmbeddedServletContainerFactory</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> UndertowEmbeddedServletContainerFactory();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass</span>({Servlet.class, Server.class, Loader.class, WebAppContext.class})</span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">        value = {EmbeddedServletContainerFactory.class},</span><br><span class="line">        search = SearchStrategy.CURRENT</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedJetty</span> </span>{</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedJetty</span><span class="params">()</span> </span>{</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> JettyEmbeddedServletContainerFactory <span class="title">jettyEmbeddedServletContainerFactory</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> JettyEmbeddedServletContainerFactory();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * @ConditionalOnClass({Servlet.class, Tomcat.class}): &#x5F53;&#x5BFC;&#x5165;&#x4E86; tomcat &#x7684;&#x4F9D;&#x8D56;&#x4E4B;&#x540E;&#xFF0C;&#x5BB9;&#x5668;&#x4E2D;&#x624D;&#x4F1A;&#x6709; Tomcat.class, &#x8FD9;&#x4E2A;&#x6761;&#x4EF6;&#x624D;&#x80FD;&#x5224;&#x65AD;&#x6B63;&#x786E; ==&gt; &#x624D;&#x4F1A;&#x521B;&#x5EFA; TomcatEmbeddedServletContainerFactory</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass</span>({Servlet.class, Tomcat.class})</span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">        value = {EmbeddedServletContainerFactory.class},</span><br><span class="line">        search = SearchStrategy.CURRENT</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedTomcat</span> </span>{</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedTomcat</span><span class="params">()</span> </span>{</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> TomcatEmbeddedServletContainerFactory <span class="title">tomcatEmbeddedServletContainerFactory</span><span class="params">()</span> </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> TomcatEmbeddedServletContainerFactory();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x6839;&#x636E; <strong>*EmbeddedServletContainerFactory, &#x521B;&#x5EFA; *</strong>EmbeddedServletContainer</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	TomcatEmbeddedServletContainerFactory &#x7C7B;&#x7684;&#x65B9;&#x6CD5; &#x4E3A;&#x4F8B;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainer <span class="title">getEmbeddedServletContainer</span><span class="params">(ServletContextInitializer... initializers)</span> </span>{</span><br><span class="line">    	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    	 *	&#x521B;&#x5EFA;&#x4E86; Tomcat</span></span><br><span class="line"><span class="comment">    	 */</span></span><br><span class="line">        Tomcat tomcat = <span class="keyword">new</span> Tomcat();</span><br><span class="line">        File baseDir = <span class="keyword">this</span>.baseDirectory != <span class="keyword">null</span> ? <span class="keyword">this</span>.baseDirectory : <span class="keyword">this</span>.createTempDir(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">        tomcat.setBaseDir(baseDir.getAbsolutePath());</span><br><span class="line">        Connector connector = <span class="keyword">new</span> Connector(<span class="keyword">this</span>.protocol);</span><br><span class="line">        tomcat.getService().addConnector(connector);</span><br><span class="line">        <span class="keyword">this</span>.customizeConnector(connector);</span><br><span class="line">        tomcat.setConnector(connector);</span><br><span class="line">        tomcat.getHost().setAutoDeploy(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">this</span>.configureEngine(tomcat.getEngine());</span><br><span class="line">        Iterator var5 = <span class="keyword">this</span>.additionalTomcatConnectors.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var5.hasNext()) {</span><br><span class="line">            Connector additionalConnector = (Connector)var5.next();</span><br><span class="line">            tomcat.getService().addConnector(additionalConnector);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.prepareContext(tomcat.getHost(), initializers);</span><br><span class="line">    	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    	 *	&#x4F20;&#x5165; tomcat&#xFF0C;&#x5F97;&#x5230; EmbeddedServletContainer</span></span><br><span class="line"><span class="comment">    	 *  &#x5E76;&#x4F1A; &#x542F;&#x52A8;&#x8BE5; tomcat &#x5BB9;&#x5668;</span></span><br><span class="line"><span class="comment">    	 */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getTomcatEmbeddedServletContainer(tomcat);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x5982;&#x4F55;&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x8BFB;&#x53D6;&#x5230;&#x7684; tomcat &#x7B49;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x7684;&#xFF1F;</li>
</ol>
<p>&#x6211;&#x4EEC;&#x5728;&#x4FEE;&#x6539; tomcat &#x914D;&#x7F6E;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x5C5E;&#x6027;&#x7684;&#x65B9;&#x5F0F;</span><br><span class="line">	&#x5E95;&#x5C42;&#x662F;&#x4F7F;&#x7528; ServerProperties&#xFF0C;&#x800C; ServerProperties &#x662F;&#x7EE7;&#x627F; EmbeddedServletContainerCustomizer&#x7684;</span><br><span class="line">	public class ServerProperties implements EmbeddedServletContainerCustomizer, EnvironmentAware, Ordered </span><br><span class="line">2. &#x4F7F;&#x7528; EmbeddedServletContainerCustomizer&#xFF0C;&#x5E76;&#x91CD;&#x5199;&#x4ED6;&#x7684; customize &#x65B9;&#x6CD5;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	EmbeddedServletContainerAutoConfiguration</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder</span>(-<span class="number">2147483648</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x8BE5;&#x6CE8;&#x89E3;&#x5BFC;&#x5165;&#x4E86;embeddedServletContainerCustomizerBeanPostProcessor&#xFF08;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x7528;&#x6765;&#x5728; bean&#x521D;&#x59CB;&#x5316;&#x524D;&#x540E;&#xFF0C;&#x8FD8;&#x672A;&#x8D4B;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FDB;&#x884C;&#x8C03;&#x7528;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import</span>({EmbeddedServletContainerAutoConfiguration.BeanPostProcessorsRegistrar.class})</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedServletContainerAutoConfiguration</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedServletContainerAutoConfiguration</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>EmbeddedServletContainerFactory &#x5728;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1; EmbeddedServletContainerCustomizerBeanPostProcessor </p>
<p>&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x8BE5;&#x540E;&#x7F6E;&#x5904;&#x7406;&#x5668;&#x4F1A;&#x62FF;&#x5230; EmbeddedServletContainerCustomizer &#x7C7B;&#x578B;&#x7684;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;&#x7684; customize &#x65B9;&#x6CD5;&#xFF0C;&#x914D;&#x7F6E; &#x521B;&#x5EFA;&#x7684;EmbeddedServletContainer&#x5BF9;&#x8C61;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * EmbeddedServletContainerCustomizerBeanPostProcessor</span></span><br><span class="line"><span class="comment"> * &#x5728; &#x521D;&#x59CB;&#x5316;&#x4E4B;&#x524D;&#x8C03;&#x7528;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * &#x5224;&#x65AD; bean &#x662F;&#x5426;&#x662F; ConfigurableEmbeddedServletContainer &#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> ConfigurableEmbeddedServletContainer) {</span><br><span class="line">        <span class="keyword">this</span>.postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer)bean);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postProcessBeforeInitialization</span><span class="params">(ConfigurableEmbeddedServletContainer bean)</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 	&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684; EmbeddedServletContainerCustomizer &#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Iterator var2 = <span class="keyword">this</span>.getCustomizers().iterator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(var2.hasNext()) {</span><br><span class="line">        EmbeddedServletContainerCustomizer customizer = (EmbeddedServletContainerCustomizer)var2.next();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *	&#x8C03;&#x7528; customize &#x65B9;&#x6CD5;&#xFF0C;&#x4E3A; bean &#x8D4B;&#x503C;</span></span><br><span class="line"><span class="comment">         * ==&#x300B; &#x5BF9;&#x5E94;&#x7740; &#x6211;&#x4EEC;&#x5728;&#x4FEE;&#x6539; tomcat &#x914D;&#x7F6E;&#x65F6;&#xFF0C;&#x91CD;&#x5199;&#x7684; EmbeddedServletContainerCustomizer&#x7C7B;&#x7684;customize &#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        customizer.customize(bean);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *  &#x83B7;&#x53D6;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;  EmbeddedServletContainerCustomizer &#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Collection&lt;EmbeddedServletContainerCustomizer&gt; <span class="title">getCustomizers</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.customizers == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">this</span>.customizers = <span class="keyword">new</span> ArrayList(<span class="keyword">this</span>.beanFactory.getBeansOfType(EmbeddedServletContainerCustomizer.class, <span class="keyword">false</span>, <span class="keyword">false</span>).values());</span><br><span class="line">        Collections.sort(<span class="keyword">this</span>.customizers, AnnotationAwareOrderComparator.INSTANCE);</span><br><span class="line">        <span class="keyword">this</span>.customizers = Collections.unmodifiableList(<span class="keyword">this</span>.customizers);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.customizers;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="5-&#x5D4C;&#x5165;&#x5F0F;Servlet&#x542F;&#x52A8;&#x539F;&#x7406;"><a href="#5-&#x5D4C;&#x5165;&#x5F0F;Servlet&#x542F;&#x52A8;&#x539F;&#x7406;" class="headerlink" title="5. &#x5D4C;&#x5165;&#x5F0F;Servlet&#x542F;&#x52A8;&#x539F;&#x7406;"></a>5. &#x5D4C;&#x5165;&#x5F0F;Servlet&#x542F;&#x52A8;&#x539F;&#x7406;</h4><p>&#x5728; EmbeddedServletContainerAutoConfiguration&#x7C7B;&#x4E2D; &#x8FD4;&#x56DE; TomcatEmbeddedServletContainerFactory &#x5BF9;&#x8C61;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6DFB;&#x52A0;&#x65AD;&#x70B9;&#xFF0C;debug &#x65B9;&#x5F0F;&#x67E5;&#x770B;&#x8C03;&#x7528;&#x6808;</p>
<h4 id="6-&#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x7684;-Servlet-&#x5BB9;&#x5668;"><a href="#6-&#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x7684;-Servlet-&#x5BB9;&#x5668;" class="headerlink" title="6. &#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x7684; Servlet &#x5BB9;&#x5668;"></a>6. &#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x7684; Servlet &#x5BB9;&#x5668;</h4><p>&#x5D4C;&#x5165;&#x5F0F;Servlet:</p>
<pre><code>1. &#x4F7F;&#x7528;&#x65B9;&#x4FBF;
 2. &#x4F46;&#x662F;&#x9ED8;&#x8BA4;&#x4E0D;&#x652F;&#x6301;JSP</code></pre><p>&#x5916;&#x7F6E;&#x7684;Servlet&#x5BB9;&#x5668;</p>
<p>&#x200B;    1. &#x4F7F;&#x7528;&#x5916;&#x9762;&#x6309;&#x7167;&#x7684;Tomcat&#xFF0C;&#x4EE5;war&#x5305;&#x7684;&#x65B9;&#x5F0F;&#x6253;&#x5305;</p>
<h3 id="&#x4E03;-SpringData"><a href="#&#x4E03;-SpringData" class="headerlink" title="&#x4E03;.SpringData"></a>&#x4E03;.SpringData</h3><h4 id="1-JDBC"><a href="#1-JDBC" class="headerlink" title="1. JDBC"></a>1. JDBC</h4><h5 id="1-&#x5BFC;&#x5165;&#x4F9D;&#x8D56;"><a href="#1-&#x5BFC;&#x5165;&#x4F9D;&#x8D56;" class="headerlink" title="1. &#x5BFC;&#x5165;&#x4F9D;&#x8D56;"></a>1. &#x5BFC;&#x5165;&#x4F9D;&#x8D56;</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;"><a href="#2-&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;" class="headerlink" title="2. &#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;"></a>2. &#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">/*</span></span><br><span class="line"> <span class="meta">*</span>	<span class="string">application.properties &#x6587;&#x4EF6;</span></span><br><span class="line"> <span class="meta">*</span>  <span class="string">&#x6CE8;&#x610F;&#xFF1A;&#x4F7F;&#x7528;&#x7684;&#x9AD8;&#x7248;&#x672C;&#xFF08;6.x.x&#x4EE5;&#x4E0A;&#xFF09;Mysql&#x6570;&#x636E;&#x5E93;&#x4F1A;&#x4E0E;&#x7CFB;&#x7EDF;&#x65F6;&#x533A;&#x6709;&#x5DEE;&#x5F02;&#x9020;&#x6210;&#x5F02;&#x5E38;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x5728; jdbc &#x540E;&#x9762;&#x6DFB;&#x52A0; serverTimezone=GMT%2B8</span></span><br><span class="line"> <span class="meta">*</span>   <span class="string"></span></span><br><span class="line"> <span class="attr">*/</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/chongyin?serverTimezone=GMT%2B8</span></span><br></pre></td></tr></table></figure>

<h5 id="3-&#x7F16;&#x5199;&#x6D4B;&#x8BD5;"><a href="#3-&#x7F16;&#x5199;&#x6D4B;&#x8BD5;" class="headerlink" title="3. &#x7F16;&#x5199;&#x6D4B;&#x8BD5;"></a>3. &#x7F16;&#x5199;&#x6D4B;&#x8BD5;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootApplicationTests</span> </span>{</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	1. DataSource &#x5DF2;&#x7ECF;&#x52A0;&#x5165;&#x5230;&#x4E86; &#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x81EA;&#x52A8;&#x88C5;&#x914D;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource datasource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        Connection connection = datasource.getConnection();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *	&#x6253;&#x5370;&#x6570;&#x636E;&#x6E90;&#x7C7B;&#x578B;&#x548C;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(datasource.getClass());</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x6253;&#x5370;&#x7ED3;&#x679C;</span></span><br><span class="line"><span class="comment"> class com.zaxxer.hikari.HikariDataSource                  ==&gt; &#x6570;&#x636E;&#x6E90;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment"> HikariProxyConnection@1869544015 wrapping com.mysql.cj.jdbc.ConnectionImpl@4451f60c</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h5 id="4-&#x539F;&#x7406;"><a href="#4-&#x539F;&#x7406;" class="headerlink" title="4. &#x539F;&#x7406;"></a>4. &#x539F;&#x7406;</h5><h6 id="1-JDBC&#x5305;&#x4E0B;&#x7684;&#x7C7B;"><a href="#1-JDBC&#x5305;&#x4E0B;&#x7684;&#x7C7B;" class="headerlink" title="1. JDBC&#x5305;&#x4E0B;&#x7684;&#x7C7B;"></a>1. JDBC&#x5305;&#x4E0B;&#x7684;&#x7C7B;</h6><p><img src="/2019/10/16/SpringBoot/20191005121543.png" alt></p>
<h6 id="2-&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;"><a href="#2-&#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;" class="headerlink" title="2. &#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;"></a>2. &#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x5C5E;&#x6027;</h6><p><img src="/2019/10/16/SpringBoot/20191005121646.png" alt></p>
<h6 id="3-DataSource-&#x7C7B;&#x578B;&#x9009;&#x62E9;"><a href="#3-DataSource-&#x7C7B;&#x578B;&#x9009;&#x62E9;" class="headerlink" title="3. DataSource &#x7C7B;&#x578B;&#x9009;&#x62E9;"></a>3. DataSource &#x7C7B;&#x578B;&#x9009;&#x62E9;</h6><p>&#x5728; DataSourceConfiguration &#x4E2D;&#xFF0C;&#x6839;&#x636E; spring.datasource.type &#x5C5E;&#x6027;&#x7684;&#x503C;&#xFF0C;&#x9009;&#x62E9;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7C7B;&#x578B;&#x7684; Datasource</p>
<p><img src="/2019/10/16/SpringBoot/20191005122153.png" alt></p>
<p><img src="/2019/10/16/SpringBoot/20191005122229.png" alt="&#x5FAE;&#x4FE1;&#x622A;&#x56FE;_20191005122229"></p>
<h6 id="4-&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x5EFA;&#x8868;sql&#x548C;&#x63D2;&#x5165;&#x6570;&#x636E;sql"><a href="#4-&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x5EFA;&#x8868;sql&#x548C;&#x63D2;&#x5165;&#x6570;&#x636E;sql" class="headerlink" title="4. &#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x5EFA;&#x8868;sql&#x548C;&#x63D2;&#x5165;&#x6570;&#x636E;sql"></a>4. &#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x5EFA;&#x8868;sql&#x548C;&#x63D2;&#x5165;&#x6570;&#x636E;sql</h6><blockquote>
<p>DataSourceInitializer</p>
</blockquote>
<p>&#x6CE8;&#x610F;: &#x6BCF;&#x6B21;&#x542F;&#x52A8;&#x65F6;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#xFF01;&#xFF01;&#xFF01;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x597D;&#x5220;&#x9664;&#x8868;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">createSchema</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x83B7;&#x53D6;&#x5EFA;&#x8868;&#x8BED;&#x53E5; &#x8DEF;&#x5F84;</span></span><br><span class="line"><span class="comment">     * 1. &#x53EF;&#x4EE5;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7; spring.datasource.schema &#x5B57;&#x6BB5;&#x6307;&#x5B9A;</span></span><br><span class="line"><span class="comment">     * 2. &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x7C7B;&#x8DEF;&#x5F84;&#x4E0B; schema.sql &#x6216;&#x8005; schema_&#x5E73;&#x53F0;&#x7C7B;&#x578B;.sql</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Resource&gt; scripts = <span class="keyword">this</span>.getScripts(<span class="string">&quot;spring.datasource.schema&quot;</span>, <span class="keyword">this</span>.properties.getSchema(), <span class="string">&quot;schema&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!scripts.isEmpty()) {</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEnabled()) {</span><br><span class="line">            logger.debug(<span class="string">&quot;Initialization disabled (not running DDL scripts)&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        String username = <span class="keyword">this</span>.properties.getSchemaUsername();</span><br><span class="line">        String password = <span class="keyword">this</span>.properties.getSchemaPassword();</span><br><span class="line">        <span class="keyword">this</span>.runScripts(scripts, username, password);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !scripts.isEmpty();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;Resource&gt; <span class="title">getScripts</span><span class="params">(String propertyName, List&lt;String&gt; resources, String fallback)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (resources != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getResources(propertyName, resources, <span class="keyword">true</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *	&#x9ED8;&#x8BA4;&#x5728; classpath&#x4E0B;&#x8FDB;&#x884C;&#x67E5;&#x627E;&#xFF0C;schema.sql &#x6216;&#x8005; schema_&#x5E73;&#x53F0;&#x7C7B;&#x578B;.sql</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">        String platform = <span class="keyword">this</span>.properties.getPlatform();</span><br><span class="line">        List&lt;String&gt; fallbackResources = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        fallbackResources.add(<span class="string">&quot;classpath*:&quot;</span> + fallback + <span class="string">&quot;-&quot;</span> + platform + <span class="string">&quot;.sql&quot;</span>);</span><br><span class="line">        fallbackResources.add(<span class="string">&quot;classpath*:&quot;</span> + fallback + <span class="string">&quot;.sql&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getResources(propertyName, fallbackResources, <span class="keyword">false</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x83B7;&#x53D6;&#x6570;&#x636E;&#x521D;&#x59CB;&#x5316; sql &#x8DEF;&#x5F84;</span></span><br><span class="line"><span class="comment"> *  1. &#x53EF;&#x4EE5;&#x901A;&#x8FC7; spring.datasource.data &#x6307;&#x5B9A;</span></span><br><span class="line"><span class="comment"> #* 2. &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x7C7B;&#x8DEF;&#x5F84;&#x4E0B; data.sql &#x6216;&#x8005; data_&#x5E73;&#x53F0;&#x7C7B;&#x578B;.sql</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initSchema</span><span class="params">()</span> </span>{</span><br><span class="line">    List&lt;Resource&gt; scripts = <span class="keyword">this</span>.getScripts(<span class="string">&quot;spring.datasource.data&quot;</span>, <span class="keyword">this</span>.properties.getData(), <span class="string">&quot;data&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!scripts.isEmpty()) {</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEnabled()) {</span><br><span class="line">            logger.debug(<span class="string">&quot;Initialization disabled (not running data scripts)&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        String username = <span class="keyword">this</span>.properties.getDataUsername();</span><br><span class="line">        String password = <span class="keyword">this</span>.properties.getDataPassword();</span><br><span class="line">        <span class="keyword">this</span>.runScripts(scripts, username, password);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h6 id="5-JdbcTemplate"><a href="#5-JdbcTemplate" class="headerlink" title="5. JdbcTemplate"></a>5. JdbcTemplate</h6><p>&#x5BB9;&#x5668;&#x4E2D;&#x5DF2;&#x7ECF;&#x81EA;&#x52A8;&#x5BFC;&#x5165;&#x4E86; JdbcTemplate&#xFF0C; &#x76F4;&#x63A5;&#x4F7F;&#x7528; @AutoWired &#x6CE8;&#x89E3;&#x4F7F;&#x7528;&#x5373;&#x53EF;</p>
<p><img src="/2019/10/16/SpringBoot/20191005123927.png" alt></p>
<h5 id="5-&#x6574;&#x5408;-Druid-&#x6570;&#x636E;&#x6E90;"><a href="#5-&#x6574;&#x5408;-Druid-&#x6570;&#x636E;&#x6E90;" class="headerlink" title="5. &#x6574;&#x5408; Druid &#x6570;&#x636E;&#x6E90;"></a>5. &#x6574;&#x5408; Druid &#x6570;&#x636E;&#x6E90;</h5><h6 id="1-&#x5BFC;&#x5165;Druid-&#x4F9D;&#x8D56;"><a href="#1-&#x5BFC;&#x5165;Druid-&#x4F9D;&#x8D56;" class="headerlink" title="1. &#x5BFC;&#x5165;Druid &#x4F9D;&#x8D56;"></a>1. &#x5BFC;&#x5165;Druid &#x4F9D;&#x8D56;</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;-Druid-&#x6570;&#x636E;&#x6E90;"><a href="#2-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;-Druid-&#x6570;&#x636E;&#x6E90;" class="headerlink" title="2. &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528; Druid &#x6570;&#x636E;&#x6E90;"></a>2. &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528; Druid &#x6570;&#x636E;&#x6E90;</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8868;&#x793A;&#x4F7F;&#x7528; Druid &#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x6E90;</span></span><br><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure>

<h6 id="3-&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x6E90;&#x662F;&#x5426;&#x6B63;&#x786E;"><a href="#3-&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x6E90;&#x662F;&#x5426;&#x6B63;&#x786E;" class="headerlink" title="3. &#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x6E90;&#x662F;&#x5426;&#x6B63;&#x786E;"></a>3. &#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x6E90;&#x662F;&#x5426;&#x6B63;&#x786E;</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource datasource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        Connection connection = datasource.getConnection();</span><br><span class="line">        System.out.println(datasource.getClass());</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *	&#x7ED3;&#x679C;:</span></span><br><span class="line"><span class="comment"> 	class com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment">	com.mysql.cj.jdbc.ConnectionImpl@566f1852</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h6 id="4-&#x81EA;&#x5B9A;&#x4E49;-Druid&#x5C5E;&#x6027;&#x914D;&#x7F6E;"><a href="#4-&#x81EA;&#x5B9A;&#x4E49;-Druid&#x5C5E;&#x6027;&#x914D;&#x7F6E;" class="headerlink" title="4. &#x81EA;&#x5B9A;&#x4E49; Druid&#x5C5E;&#x6027;&#x914D;&#x7F6E;"></a>4. &#x81EA;&#x5B9A;&#x4E49; Druid&#x5C5E;&#x6027;&#x914D;&#x7F6E;</h6><p><img src="/2019/10/16/SpringBoot/20191005125453.png" alt></p>
<p>&#x5728;&#x4F7F;&#x7528;JDBC &#x9ED8;&#x8BA4;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5C06; &#x5C5E;&#x6027;&#x914D;&#x7F6E;&#x5728; application.properties, &#x80FD;&#x591F;&#x751F;&#x6548;&#x7684;&#x539F;&#x56E0;&#x662F; DataSource&#x4F1A;&#x8BFB;&#x53D6;&#x8BE5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x89E3;&#x6790;&#x8FD9;&#x51E0;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528; Druid&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x4EC5;&#x4EC5;&#x5728; application.properties &#x4E2D;&#x914D;&#x7F6E;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x4F1A;&#x88AB;&#x8BFB;&#x5165;&#x7684;</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.initialsize</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.datasource.maxActive</span>=<span class="string">20</span></span><br></pre></td></tr></table></figure>

<p>&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x5C06; DruidDataSource &#x653E;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x914D;&#x7F6E;&#x8981;&#x8BFB;&#x53D6;&#x7684;&#x5B57;&#x6BB5;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springboot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684; DruidDataSource&#xFF0C;&#x624D;&#x80FD;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x8BFB;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(<span class="string">&quot;spring.datasource&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DruidDataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6D4B;&#x8BD5;:</p>
<p><img src="/2019/10/16/SpringBoot/20191005143413.png" alt></p>
<h5 id="6-&#x6DFB;&#x52A0;Druid-&#x76D1;&#x63A7;&#x914D;&#x7F6E;"><a href="#6-&#x6DFB;&#x52A0;Druid-&#x76D1;&#x63A7;&#x914D;&#x7F6E;" class="headerlink" title="6. &#x6DFB;&#x52A0;Druid &#x76D1;&#x63A7;&#x914D;&#x7F6E;"></a>6. &#x6DFB;&#x52A0;Druid &#x76D1;&#x63A7;&#x914D;&#x7F6E;</h5><p>Druid &#x76D1;&#x63A7;&#x4E3B;&#x8981;&#x662F;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; Servlet &#x548C; Filter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(<span class="string">&quot;spring.datasource&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DruidDataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Druid &#x76D1;&#x63A7;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">    * 1. WEB &#x76D1;&#x63A7;&#x7684;Servlet &#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">druidServlet</span><span class="params">()</span> </span>{</span><br><span class="line">        ServletRegistrationBean servletRegistrationBean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">&quot;/druid/*&quot;</span>);</span><br><span class="line">        <span class="comment">/* &#x5141;&#x8BB8;&#x6240;&#x6709; IP &#x8BF7;&#x6C42; */</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">&quot;allow&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">/* &#x8BBE;&#x7F6E; &#x767B;&#x9646; &#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801; */</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">&quot;loginUsername&quot;</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">&quot;loginPassword&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> servletRegistrationBean;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Druid Filter &#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">druidFilter</span><span class="params">()</span> </span>{</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">        <span class="comment">/* &#x76D1;&#x63A7;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42; */</span></span><br><span class="line">        filterRegistrationBean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">        <span class="comment">/* &#x9700;&#x8981;&#x5FFD;&#x7565;&#x7684; &#x8BF7;&#x6C42; */</span></span><br><span class="line">        filterRegistrationBean.addInitParameter(<span class="string">&quot;exclusions&quot;</span>, <span class="string">&quot;*.js,*.gif,*.jpg,*.css,/druid/*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6548;&#x679C;:</p>
<p><img src="/2019/10/16/SpringBoot/20191005145159.png" alt></p>
<h4 id="2-&#x6574;&#x5408;-Mybatis"><a href="#2-&#x6574;&#x5408;-Mybatis" class="headerlink" title="2. &#x6574;&#x5408; Mybatis"></a>2. &#x6574;&#x5408; Mybatis</h4><h5 id="1-&#x521B;&#x5EFA;&#x9879;&#x76EE;"><a href="#1-&#x521B;&#x5EFA;&#x9879;&#x76EE;" class="headerlink" title="1. &#x521B;&#x5EFA;&#x9879;&#x76EE;"></a>1. &#x521B;&#x5EFA;&#x9879;&#x76EE;</h5><p>&#x4F7F;&#x7528;Spring initilize &#x521B;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x9009;&#x62E9; Spirng Web + Mysql API + JDBC API + Mybatis Framework &#x8FD9;&#x4E9B;&#x7EC4;&#x4EF6;</p>
<p>&#x7136;&#x540E;&#x5F15;&#x5165;Druid&#x6570;&#x636E;&#x6E90;&#x4F9D;&#x8D56;</p>
<p>&#x751F;&#x6210;&#x7684; pom&#x6587;&#x4EF6;&#x5982;&#x4E0B;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.day<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springbootmybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springbootmybatis<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x9700;&#x8981;&#x5F00;&#x542F; maven &#x7684; auto import &#x529F;&#x80FD;&#xFF0C;&#x5426;&#x5219;&#x5373;&#x4F7F; &#x5DF2;&#x7ECF; &#x52A0;&#x5165;&#x4E86; &#x4F9D;&#x8D56;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x76F4;&#x672A;&#x627E;&#x5230;&#x76F8;&#x5173;&#x7684;&#x7C7B;&#xFF0C;&#x65E0;&#x63D0;&#x793A;</p>
<h5 id="2-&#x914D;&#x7F6E;-Druid-DataSource"><a href="#2-&#x914D;&#x7F6E;-Druid-DataSource" class="headerlink" title="2. &#x914D;&#x7F6E; Druid DataSource"></a>2. &#x914D;&#x7F6E; Druid DataSource</h5><ul>
<li>&#x6DFB;&#x52A0;&#x914D;&#x7F6E;</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/chongyin?serverTimezone=GMT%2B8</span></span><br></pre></td></tr></table></figure>

<ul>
<li>&#x914D;&#x7F6E;&#x7C7B;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceConfig</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684; DruidDataSource&#xFF0C;&#x624D;&#x80FD;&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x8BFB;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(<span class="string">&quot;spring.datasource&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DruidDataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// filter &#x548C; servlet &#x7701;&#x7565;</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="3-&#x521B;&#x5EFA;-mapper"><a href="#3-&#x521B;&#x5EFA;-mapper" class="headerlink" title="3. &#x521B;&#x5EFA; mapper"></a>3. &#x521B;&#x5EFA; mapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Mapper: &#x6307;&#x5B9A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x7684; mapper</span></span><br><span class="line"><span class="comment"> * 1. &#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A;&#x7C7B;&#x4E0A;&#xFF0C;&#x90FD;&#x6DFB;&#x52A0; @Mapper</span></span><br><span class="line"><span class="comment"> * 2. &#x7C7B;&#x4E0A;&#x53EF;&#x4EE5;&#x4E0D;&#x52A0;&#xFF0C;&#x4F46;&#x662F;&#x5728; @SpringBootApplication &#x6CE8;&#x91CA;&#x7684;&#x7C7B;&#x4E0A;&#xFF0C;&#x6DFB;&#x52A0;@MapperScan(value = &quot;com.day.springbootmybatis.mapper&quot;)&#xFF0C;&#x4F1A;&#x5C06;&#x6574;&#x4E2A;&#x5305;&#x4E0B;&#x9762;&#x7684;&#x6240;&#x6709;&#xFF0C;&#x90FD;&#x52A0;&#x5230;&#x91CC;&#x9762;&#x53BB;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">&quot;select id, phone from user where id=#{id}&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * useGeneratedKeys + keyProperty, &#x6765;&#x5C01;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x7684;&#x4E3B;&#x952E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Options</span>(useGeneratedKeys = <span class="keyword">true</span>, keyProperty = <span class="string">&quot;id&quot;</span>)</span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">&quot;insert into user (phone) values(phone)&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="4-&#x4F7F;&#x7528;"><a href="#4-&#x4F7F;&#x7528;" class="headerlink" title="4. &#x4F7F;&#x7528;"></a>4. &#x4F7F;&#x7528;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springbootmybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.day.springbootmybatis.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.day.springbootmybatis.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootmybatisApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *	&#x81EA;&#x52A8;&#x5BFC;&#x5165;mapper &#x5373;&#x53EF;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>{</span><br><span class="line">        User user = userMapper.getUserById(<span class="number">19335</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="5-&#x5B9E;&#x73B0;-&#x4E0B;&#x5212;&#x7EBF;&#x4E0E;-&#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x6620;&#x5C04;"><a href="#5-&#x5B9E;&#x73B0;-&#x4E0B;&#x5212;&#x7EBF;&#x4E0E;-&#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x6620;&#x5C04;" class="headerlink" title="5. &#x5B9E;&#x73B0; &#x4E0B;&#x5212;&#x7EBF;&#x4E0E; &#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x6620;&#x5C04;"></a>5. &#x5B9E;&#x73B0; &#x4E0B;&#x5212;&#x7EBF;&#x4E0E; &#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x6620;&#x5C04;</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springbootmybatis.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.boot.autoconfigure.ConfigurationCustomizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConfigurationCustomizer <span class="title">configurationCustomizer</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Configuration configuration)</span> </span>{</span><br><span class="line">                <span class="comment">/* &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528; &#x4E0B;&#x5212;&#x7EBF;&#xFF0C;&#x6620;&#x5C04;&#x5230; java bean &#x7684;&#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x6CD5; */</span></span><br><span class="line">                configuration.setMapUnderscoreToCamelCase(<span class="keyword">true</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="6-&#x4F7F;&#x7528;-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;"><a href="#6-&#x4F7F;&#x7528;-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;" class="headerlink" title="6. &#x4F7F;&#x7528; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;"></a>6. &#x4F7F;&#x7528; &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;</h5><ul>
<li>&#x914D;&#x7F6E;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line"><span class="meta">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>&#x914D;&#x7F6E; mapper &#x6587;&#x4EF6;</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line"><span class="meta">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.day.springbootmybatis.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.day.springbootmybatis.bean.User&quot;</span>&gt;</span></span><br><span class="line">    select id, phone from user where id=#{id}</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>&#x5C06;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#xFF0C;&#x544A;&#x77E5; springboot</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5728; application.properties &#x4E2D;&#x6DFB;&#x52A0;&#x4E0B;&#x9762;&#x4E24;&#x884C;</span></span><br><span class="line"><span class="meta">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/*.xml</span></span><br><span class="line"><span class="meta">mybatis.config-location</span>=<span class="string">classpath:mybatis-config.xml</span></span><br></pre></td></tr></table></figure>

<p>&#x6D4B;&#x8BD5;&#x5373;&#x53EF;&#x4F7F;&#x7528;&#xFF01;&#xFF01;&#xFF01;</p>
<h3 id="3-JPS"><a href="#3-JPS" class="headerlink" title="3. JPS"></a>3. JPS</h3><h4 id="1-&#x521B;&#x5EFA;&#x9879;&#x76EE;-1"><a href="#1-&#x521B;&#x5EFA;&#x9879;&#x76EE;-1" class="headerlink" title="1. &#x521B;&#x5EFA;&#x9879;&#x76EE;"></a>1. &#x521B;&#x5EFA;&#x9879;&#x76EE;</h4><p>&#x9009;&#x7528;  spring web + spring data jpa + jdbc api + mysql api</p>
<p>&#x5BFC;&#x5165; Druid &#x4F9D;&#x8D56;</p>
<h4 id="2-&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#2-&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="2. &#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>2. &#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://localhost:3306/chongyin?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">    type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="attr">  jpa:</span></span><br><span class="line"><span class="attr">    hibernate:</span></span><br><span class="line"><span class="comment">#       &#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BE5;&#x8868;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;</span></span><br><span class="line"><span class="attr">      ddl-auto:</span> <span class="string">update</span></span><br><span class="line"><span class="comment">#     &#x663E;&#x793A; SQL</span></span><br><span class="line"><span class="attr">    show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="3-&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;"><a href="#3-&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;" class="headerlink" title="3. &#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;"></a>3. &#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springjpa.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Entity: &#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A; &#x4E0E; &#x6570;&#x636E;&#x8868; &#x8FDB;&#x884C;&#x6620;&#x5C04;&#x7684; javabean</span></span><br><span class="line"><span class="comment"> * @Table(name=&quot;MyUser&quot;): &#x6307;&#x5B9A;&#x8868;&#x540D;&#x79F0;&#x4E3A; MyUser, &#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x7C7B;&#x540D; &#x9996;&#x5B57;&#x6BCD;&#x5C0F;&#x5199;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">&quot;MyUser&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Id</span>: &#x8868;&#x660E;&#x8BE5;&#x5217;&#x662F;&#x4E3B;&#x952E;&#x5217;</span></span><br><span class="line"><span class="comment">     *  <span class="doctag">@GeneratedValue</span>: &#x8868;&#x660E;&#x8BE5;&#x5217;&#x81EA;&#x589E;&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x4E86;&#x81EA;&#x589E;&#x7B56;&#x7565;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * @Column &#x6307;&#x5B9A;&#x8BE5;&#x5B57;&#x6BB5; &#x4E0E;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x5E94;</span></span><br><span class="line"><span class="comment">    * &#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x5C5E;&#x6027;&#x7684;&#x540D;&#x79F0;*/</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">&quot;username&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> String Username;</span><br><span class="line">    <span class="meta">@Column</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>{</span><br><span class="line">        Username = username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User{&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, Username=&apos;&quot;</span> + Username + <span class="string">&apos;\&apos;&apos;</span> +</span><br><span class="line">                <span class="string">&quot;, phone=&apos;&quot;</span> + phone + <span class="string">&apos;\&apos;&apos;</span> +</span><br><span class="line">                <span class="string">&apos;}&apos;</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="4-&#x7F16;&#x5199;-Repository"><a href="#4-&#x7F16;&#x5199;-Repository" class="headerlink" title="4. &#x7F16;&#x5199; Repository"></a>4. &#x7F16;&#x5199; Repository</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springjpa.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.day.springjpa.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x6211;&#x4EEC;&#x64CD;&#x4F5C;&#x7684; &#x63A5;&#x53E3;&#xFF0C;&#x76F4;&#x63A5;&#x7EE7;&#x627F; JpaRepository &#x5373;&#x53EF;</span></span><br><span class="line"><span class="comment"> * JpaRepository&lt;User, Integer&gt;&#xFF1A; Integer &#x662F; &#x4E3B;&#x952E;&#x7684;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>, <span class="title">Integer</span>&gt; </span>{</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="5-&#x6D4B;&#x8BD5;"><a href="#5-&#x6D4B;&#x8BD5;" class="headerlink" title="5. &#x6D4B;&#x8BD5;"></a>5. &#x6D4B;&#x8BD5;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.day.springjpa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.day.springjpa.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.day.springjpa.repository.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> com.day.springjpa.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringjpaApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>{</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setPhone(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">        Optional&lt;User&gt; one = userRepository.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(one);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JAVA-SpringBoot/" rel="tag"># JAVA, SpringBoot</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/27/IDEA/" rel="next" title="IDEA">
                <i class="fa fa-chevron-left"></i> IDEA
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/10/16/Java高并发商城/" rel="prev" title="Java高并发商城">
                Java高并发商城 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="DayByDay">
            
              <p class="site-author-name" itemprop="name">DayByDay</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot"><span class="nav-number">1.</span> <span class="nav-text">SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一-入门Helloworld"><span class="nav-number">1.1.</span> <span class="nav-text">一. 入门Helloworld</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Spring-initlize-方式"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. Spring initlize 方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-原理"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-POM中-导入-父项目-版本仲裁"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">1. POM中 导入 父项目(版本仲裁)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-启动器"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">2. 启动器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-主程序"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">3. 主程序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二-resources-目录结构"><span class="nav-number">1.2.</span> <span class="nav-text">二. resources 目录结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三-配置文件"><span class="nav-number">1.3.</span> <span class="nav-text">三. 配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-默认配置文件"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. 默认配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-读取配置文件的值，赋值给类的属性"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. 读取配置文件的值，赋值给类的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#编写-application-yml-文件"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">编写 application.yml 文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编写实体类"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">编写实体类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#测试"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-properties方式"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">使用 properties方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-value-与-ConfigurationProperties-比较"><span class="nav-number">1.3.3.</span> <span class="nav-text">3. @value 与 @ConfigurationProperties 比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-使用自定义的-properties配置文件"><span class="nav-number">1.3.4.</span> <span class="nav-text">4. 使用自定义的 properties配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-PropertySource"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">1. @PropertySource</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-为容器添加组件"><span class="nav-number">1.3.5.</span> <span class="nav-text">5. 为容器添加组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-ImportResource-（不推荐"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">1. @ImportResource （不推荐)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-使用配置类方式"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">2. 使用配置类方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-配置文件占位符"><span class="nav-number">1.3.6.</span> <span class="nav-text">6. 配置文件占位符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Profile"><span class="nav-number">1.3.7.</span> <span class="nav-text">7. Profile</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-多profile-文件的方式"><span class="nav-number">1.3.7.1.</span> <span class="nav-text">1. 多profile 文件的方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-yml多文档块方式"><span class="nav-number">1.3.7.2.</span> <span class="nav-text">2. yml多文档块方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-配置文件加载位置"><span class="nav-number">1.3.8.</span> <span class="nav-text">8. 配置文件加载位置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四-自定配置的原理"><span class="nav-number">1.4.</span> <span class="nav-text">四. 自定配置的原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#loadFactoryNames"><span class="nav-number">1.4.0.0.1.</span> <span class="nav-text">loadFactoryNames</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HttpEncodingProperties"><span class="nav-number">1.4.0.0.2.</span> <span class="nav-text">HttpEncodingProperties</span></a></li></ol></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#五-日志"><span class="nav-number">1.5.</span> <span class="nav-text">五. 日志</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-日志框架"><span class="nav-number">1.5.1.</span> <span class="nav-text">1. 日志框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-如何使用-SLF4j"><span class="nav-number">1.5.2.</span> <span class="nav-text">2. 如何使用 SLF4j</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#注意"><span class="nav-number">1.5.2.0.1.</span> <span class="nav-text">注意:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SLF4J与其他日志实现框架结合"><span class="nav-number">1.5.2.0.2.</span> <span class="nav-text">SLF4J与其他日志实现框架结合</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-统一日志框架"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">1. 统一日志框架</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SpringBoot中依赖"><span class="nav-number">1.5.2.1.1.</span> <span class="nav-text">SpringBoot中依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#排除原框架依赖"><span class="nav-number">1.5.2.1.2.</span> <span class="nav-text">排除原框架依赖</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-日志使用"><span class="nav-number">1.5.3.</span> <span class="nav-text">3. 日志使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-日志框架切换"><span class="nav-number">1.5.4.</span> <span class="nav-text">4. 日志框架切换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-方式一"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">1. 方式一:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-方式二"><span class="nav-number">1.5.4.2.</span> <span class="nav-text">2. 方式二:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六-Web开发"><span class="nav-number">1.6.</span> <span class="nav-text">六.Web开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-使用步骤"><span class="nav-number">1.6.1.</span> <span class="nav-text">1. 使用步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-静态资源映射规则"><span class="nav-number">1.6.2.</span> <span class="nav-text">2. 静态资源映射规则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-webjars-映射到-classpath-META-INF-resources-webjars"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">1. /webjars/** 映射到 classpath:/META-INF/resources/webjars/</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-映射到-“classpath-META-INF-resources-“-“classpath-resources-“-“classpath-static-“-“classpath-public-“，”-“"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">2. /** 映射到 “classpath:/META-INF/resources/“, “classpath:/resources/“, “classpath:/static/“, “classpath:/public/“，”/“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-映射到-静态资源文件夹下-index-html"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">3. / 映射到 静态资源文件夹下 index.html</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-模板引擎（thymeleaf"><span class="nav-number">1.6.3.</span> <span class="nav-text">3. 模板引擎（thymeleaf)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-扩展SpringMVC"><span class="nav-number">1.6.4.</span> <span class="nav-text">4. 扩展SpringMVC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-错误处理"><span class="nav-number">1.6.5.</span> <span class="nav-text">5. 错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定值错误界面"><span class="nav-number">1.6.5.1.</span> <span class="nav-text">定值错误界面:</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-定制错误的html界面"><span class="nav-number">1.6.5.1.1.</span> <span class="nav-text">1. 定制错误的html界面</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-定制错误的json数据"><span class="nav-number">1.6.5.1.2.</span> <span class="nav-text">2. 定制错误的json数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-原理"><span class="nav-number">1.6.5.2.</span> <span class="nav-text">1. 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ErrorPageCustomizer组件"><span class="nav-number">1.6.5.2.1.</span> <span class="nav-text">ErrorPageCustomizer组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#BasicErrorController组件"><span class="nav-number">1.6.5.2.2.</span> <span class="nav-text">BasicErrorController组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DefaultErrorViewResolver组件"><span class="nav-number">1.6.5.2.3.</span> <span class="nav-text">DefaultErrorViewResolver组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DefaultErrorAttributes组件"><span class="nav-number">1.6.5.2.4.</span> <span class="nav-text">DefaultErrorAttributes组件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-配置嵌入式-Servlet-容器"><span class="nav-number">1.6.6.</span> <span class="nav-text">6. 配置嵌入式 Servlet 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-定制修改-Servlet-容器的相关配置"><span class="nav-number">1.6.6.1.</span> <span class="nav-text">1. 定制修改 Servlet 容器的相关配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#方式一"><span class="nav-number">1.6.6.1.1.</span> <span class="nav-text">方式一</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式二"><span class="nav-number">1.6.6.1.2.</span> <span class="nav-text">方式二</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-注册-Servlet-Filter-Listener"><span class="nav-number">1.6.6.2.</span> <span class="nav-text">2. 注册 Servlet, Filter, Listener</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-使用其他的Servlet容器"><span class="nav-number">1.6.6.3.</span> <span class="nav-text">3. 使用其他的Servlet容器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#切换："><span class="nav-number">1.6.6.3.1.</span> <span class="nav-text">切换：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-嵌入式Servlet-容器自动配置原理"><span class="nav-number">1.6.6.4.</span> <span class="nav-text">4. 嵌入式Servlet 容器自动配置原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-嵌入式Servlet启动原理"><span class="nav-number">1.6.6.5.</span> <span class="nav-text">5. 嵌入式Servlet启动原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-使用外置的-Servlet-容器"><span class="nav-number">1.6.6.6.</span> <span class="nav-text">6. 使用外置的 Servlet 容器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七-SpringData"><span class="nav-number">1.6.7.</span> <span class="nav-text">七.SpringData</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-JDBC"><span class="nav-number">1.6.7.1.</span> <span class="nav-text">1. JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-导入依赖"><span class="nav-number">1.6.7.1.1.</span> <span class="nav-text">1. 导入依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-配置数据源"><span class="nav-number">1.6.7.1.2.</span> <span class="nav-text">2. 配置数据源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-编写测试"><span class="nav-number">1.6.7.1.3.</span> <span class="nav-text">3. 编写测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-原理"><span class="nav-number">1.6.7.1.4.</span> <span class="nav-text">4. 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-JDBC包下的类"><span class="nav-number">1.6.7.1.4.1.</span> <span class="nav-text">1. JDBC包下的类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-可以在配置文件中配置的属性"><span class="nav-number">1.6.7.1.4.2.</span> <span class="nav-text">2. 可以在配置文件中配置的属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-DataSource-类型选择"><span class="nav-number">1.6.7.1.4.3.</span> <span class="nav-text">3. DataSource 类型选择</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-启动时执行建表sql和插入数据sql"><span class="nav-number">1.6.7.1.4.4.</span> <span class="nav-text">4. 启动时执行建表sql和插入数据sql</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-JdbcTemplate"><span class="nav-number">1.6.7.1.4.5.</span> <span class="nav-text">5. JdbcTemplate</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-整合-Druid-数据源"><span class="nav-number">1.6.7.1.5.</span> <span class="nav-text">5. 整合 Druid 数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-导入Druid-依赖"><span class="nav-number">1.6.7.1.5.1.</span> <span class="nav-text">1. 导入Druid 依赖</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-修改配置文件，使用-Druid-数据源"><span class="nav-number">1.6.7.1.5.2.</span> <span class="nav-text">2. 修改配置文件，使用 Druid 数据源</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-测试数据源是否正确"><span class="nav-number">1.6.7.1.5.3.</span> <span class="nav-text">3. 测试数据源是否正确</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-自定义-Druid属性配置"><span class="nav-number">1.6.7.1.5.4.</span> <span class="nav-text">4. 自定义 Druid属性配置</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-添加Druid-监控配置"><span class="nav-number">1.6.7.1.6.</span> <span class="nav-text">6. 添加Druid 监控配置</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-整合-Mybatis"><span class="nav-number">1.6.7.2.</span> <span class="nav-text">2. 整合 Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-创建项目"><span class="nav-number">1.6.7.2.1.</span> <span class="nav-text">1. 创建项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-配置-Druid-DataSource"><span class="nav-number">1.6.7.2.2.</span> <span class="nav-text">2. 配置 Druid DataSource</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-创建-mapper"><span class="nav-number">1.6.7.2.3.</span> <span class="nav-text">3. 创建 mapper</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-使用"><span class="nav-number">1.6.7.2.4.</span> <span class="nav-text">4. 使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-实现-下划线与-驼峰命名映射"><span class="nav-number">1.6.7.2.5.</span> <span class="nav-text">5. 实现 下划线与 驼峰命名映射</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-使用-配置文件方式"><span class="nav-number">1.6.7.2.6.</span> <span class="nav-text">6. 使用 配置文件方式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-JPS"><span class="nav-number">1.6.8.</span> <span class="nav-text">3. JPS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-创建项目-1"><span class="nav-number">1.6.8.1.</span> <span class="nav-text">1. 创建项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-编写配置文件"><span class="nav-number">1.6.8.2.</span> <span class="nav-text">2. 编写配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-编写实体类"><span class="nav-number">1.6.8.3.</span> <span class="nav-text">3. 编写实体类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-编写-Repository"><span class="nav-number">1.6.8.4.</span> <span class="nav-text">4. 编写 Repository</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-测试"><span class="nav-number">1.6.8.5.</span> <span class="nav-text">5. 测试</span></a></li></ol></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DayByDay</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
