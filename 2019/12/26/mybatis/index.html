<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JAVA, MyBatis,">










<meta name="description" content="&amp;#x6458;&amp;#x8981; Mybatis&amp;#x7684;&amp;#x7B80;&amp;#x5355;&amp;#x4F7F;&amp;#x7528;">
<meta name="keywords" content="JAVA, MyBatis">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis">
<meta property="og:url" content="http://yoursite.com/2019/12/26/mybatis/index.html">
<meta property="og:site_name" content="DayByDayの小屋">
<meta property="og:description" content="&amp;#x6458;&amp;#x8981; Mybatis&amp;#x7684;&amp;#x7B80;&amp;#x5355;&amp;#x4F7F;&amp;#x7528;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226105351791.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226105406828.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226113310182.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226114249419.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226143746900.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226154811681.png">
<meta property="og:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226154839100.png">
<meta property="og:updated_time" content="2019-12-26T08:06:16.515Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mybatis">
<meta name="twitter:description" content="&amp;#x6458;&amp;#x8981; Mybatis&amp;#x7684;&amp;#x7B80;&amp;#x5355;&amp;#x4F7F;&amp;#x7528;">
<meta name="twitter:image" content="http://yoursite.com/2019/12/26/mybatis/image-20191226105351791.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/12/26/mybatis/">





  <title>mybatis | DayByDayの小屋</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DayByDayの小屋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">编程之路</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/26/mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DayByDay">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DayByDayの小屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">mybatis</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-26T10:20:45+08:00">
                2019-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="&#x6458;&#x8981;"><a href="#&#x6458;&#x8981;" class="headerlink" title="&#x6458;&#x8981;"></a>&#x6458;&#x8981;</h3><blockquote>
<p>Mybatis&#x7684;&#x7B80;&#x5355;&#x4F7F;&#x7528;</p>
</blockquote>
<a id="more"></a>

<h1 id="1-JDBC-&#x7684;&#x4F7F;&#x7528;"><a href="#1-JDBC-&#x7684;&#x4F7F;&#x7528;" class="headerlink" title="1. JDBC &#x7684;&#x4F7F;&#x7528;"></a>1. JDBC &#x7684;&#x4F7F;&#x7528;</h1><h1 id="2-JdbcTemplate&#x7684;&#x4F7F;&#x7528;"><a href="#2-JdbcTemplate&#x7684;&#x4F7F;&#x7528;" class="headerlink" title="2. JdbcTemplate&#x7684;&#x4F7F;&#x7528;"></a>2. JdbcTemplate&#x7684;&#x4F7F;&#x7528;</h1><h1 id="3-Hibernate"><a href="#3-Hibernate" class="headerlink" title="3. Hibernate"></a>3. Hibernate</h1><h1 id="4-Mybatis"><a href="#4-Mybatis" class="headerlink" title="4. Mybatis"></a>4. Mybatis</h1><h2 id="1-&#x80CC;&#x666F;"><a href="#1-&#x80CC;&#x666F;" class="headerlink" title="1. &#x80CC;&#x666F;"></a>1. &#x80CC;&#x666F;</h2><h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><p>&#x7F16;&#x5199;sql =&gt; &#x9884;&#x7F16;&#x8BD1; =&gt; &#x8BBE;&#x7F6E;&#x53C2;&#x6570; =&gt; &#x6267;&#x884C;sql =&gt; &#x5C01;&#x88C5;&#x7ED3;&#x679C;</p>
<h4 id="&#x7279;&#x70B9;"><a href="#&#x7279;&#x70B9;" class="headerlink" title="&#x7279;&#x70B9;:"></a>&#x7279;&#x70B9;:</h4><pre><code>1. sql &#x8BED;&#x53E5;&#x7F16;&#x5199;&#x5728; java&#x4EE3;&#x7801;&#x91CC;&#x9762; &#xFF08;&#x786C;&#x7F16;&#x7801;&#xFF0C;&#x9AD8;&#x8026;&#x5408;)
 2. &#x9884;&#x7F16;&#x8BD1;&#xFF0C;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x6267;&#x884C;sql&#xFF0C;&#x5C01;&#x88C5;&#x7ED3;&#x679C; &#x7B49;&#x9700;&#x8981;&#x624B;&#x52A8;&#xFF0C;&#x6BCF;&#x6B21;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;</code></pre><h3 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h3><p>&#x5168;&#x81EA;&#x52A8;&#x5168;&#x6620;&#x5C04;ORM(Object Relation Mapping)&#x6846;&#x67B6;&#xFF0C;&#x610F;&#x5728;&#x6D88;&#x9664;sql</p>
<p>&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981; &#x63D0;&#x4F9B; JavaBean, &#x5176;&#x4F59;&#x7684; &#x7F16;&#x5199;sql=&gt;&#x9884;&#x7F16;&#x8BD1;=&gt;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;=&gt;&#x6267;&#x884C;sql=&gt;&#x5C01;&#x88C5;&#x7ED3;&#x679C; &#x7B49;&#x662F;&#x9ED1;&#x7BB1;&#x64CD;&#x4F5C;&#xFF0C;&#x5BF9;&#x7528;&#x6237;&#x4E0D;&#x53EF;&#x89C1;</p>
<h4 id="&#x7279;&#x70B9;-1"><a href="#&#x7279;&#x70B9;-1" class="headerlink" title="&#x7279;&#x70B9;:"></a>&#x7279;&#x70B9;:</h4><ol>
<li><p>&#x4F7F;&#x7528;&#x7B80;&#x5355;</p>
</li>
<li><p>&#x9ED1;&#x7BB1;&#x64CD;&#x4F5C;&#xFF0C;&#x7F16;&#x5199;sql&#x90FD;&#x7531;&#x5E95;&#x90E8;&#x5B9E;&#x73B0;</p>
</li>
<li><p>&#x5168;&#x6620;&#x5C04;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;sql&#x8BED;&#x53E5;&#x6210;&#x672C;&#x8F83;&#x9AD8;</p>
</li>
</ol>
<p>==&gt;&#x80FD;&#x5426;&#x6709;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;sql&#x8BED;&#x53E5;&#x7684;&#x7F16;&#x5199;&#x7531; &#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x63A7;&#x5236;&#xFF0C;&#x4F46;&#x662F; &#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF1F;</p>
<h2 id="2-&#x7B80;&#x5355;&#x4F7F;&#x7528;"><a href="#2-&#x7B80;&#x5355;&#x4F7F;&#x7528;" class="headerlink" title="2. &#x7B80;&#x5355;&#x4F7F;&#x7528;"></a>2. &#x7B80;&#x5355;&#x4F7F;&#x7528;</h2><h3 id="1-&#x5BFC;&#x5165;jar&#x5305;"><a href="#1-&#x5BFC;&#x5165;jar&#x5305;" class="headerlink" title="1. &#x5BFC;&#x5165;jar&#x5305;"></a>1. &#x5BFC;&#x5165;jar&#x5305;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mybatis</span><br><span class="line">mysql-connector</span><br><span class="line">log4j</span><br></pre></td></tr></table></figure>

<h3 id="2-mybatis-&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#2-mybatis-&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="2. mybatis &#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>2. mybatis &#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>&#x5168;&#x5C40;&#x6587;&#x4EF6;&#x7528;&#x6765;&#x914D;&#x7F6E;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;</p>
<ol>
<li>&#x6570;&#x636E;&#x6E90;</li>
<li>&#x4E8B;&#x52A1;&#x7BA1;&#x7406;</li>
<li>mapper xml&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;</li>
<li>mybatis &#x5176;&#x4ED6;&#x5168;&#x5C40;&#x914D;&#x7F6E;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta"> PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line"><span class="meta"> &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &#x5C06;&#x6211;&#x4EEC;&#x5199;&#x597D;&#x7684;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;&#xFF08;EmployeeMapper.xml&#xFF09;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x518C;&#x5230;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;mybatis-config.xml&#xFF09;&#x4E2D; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;EmployeeMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-&#x83B7;&#x53D6;-sqlSession"><a href="#3-&#x83B7;&#x53D6;-sqlSession" class="headerlink" title="3. &#x83B7;&#x53D6; sqlSession"></a>3. &#x83B7;&#x53D6; sqlSession</h3><h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><blockquote>
<ol>
<li>SqlSession&#x4EE3;&#x8868;&#x548C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E00;&#x6B21;&#x4F1A;&#x8BDD;&#xFF1B;&#x7528;&#x5B8C;&#x5FC5;&#x987B;&#x5173;&#x95ED;</li>
<li>SqlSession&#x548C;connection&#x4E00;&#x6837;&#x5979;&#x90FD;&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x90FD;&#x5E94;&#x8BE5;&#x53BB;&#x83B7;&#x53D6;&#x65B0;&#x7684;&#x5BF9;&#x8C61;</li>
<li>SqlSession &#x901A;&#x8FC7; SqlSessionFactoryBuilder &#x83B7;&#x53D6;</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">getSqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">		String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">		InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 1&#x3001;&#x83B7;&#x53D6;sqlSessionFactory&#x5BF9;&#x8C61;</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = getSqlSessionFactory();</span><br><span class="line"><span class="comment">// 2&#x3001;&#x83B7;&#x53D6;sqlSession&#x5BF9;&#x8C61;</span></span><br><span class="line">SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">  <span class="comment">// &#x5904;&#x7406;</span></span><br><span class="line">} <span class="keyword">finally</span> {</span><br><span class="line">  openSession.close();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-&#x521B;&#x5EFA;-dao&#x5C42;&#x63A5;&#x53E3;"><a href="#4-&#x521B;&#x5EFA;-dao&#x5C42;&#x63A5;&#x53E3;" class="headerlink" title="4. &#x521B;&#x5EFA; dao&#x5C42;&#x63A5;&#x53E3;"></a>4. &#x521B;&#x5EFA; dao&#x5C42;&#x63A5;&#x53E3;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatis.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mybatis.bean.Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeMapper</span> </span>{</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Employee <span class="title">getEmpById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="5-&#x7F16;&#x5199;-mapper-xml-&#x6587;&#x4EF6;"><a href="#5-&#x7F16;&#x5199;-mapper-xml-&#x6587;&#x4EF6;" class="headerlink" title="5. &#x7F16;&#x5199; mapper xml &#x6587;&#x4EF6;"></a>5. &#x7F16;&#x5199; mapper xml &#x6587;&#x4EF6;</h3><ol>
<li>mapper &#x4E2D; namespace &#x6307;&#x5411; dao&#x5C42;&#x63A5;&#x53E3; &#xFF08;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;)</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta"> PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line"><span class="meta"> &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">namespace:&#x540D;&#x79F0;&#x7A7A;&#x95F4;;&#x6307;&#x5B9A;&#x4E3A;&#x63A5;&#x53E3;&#x7684;&#x5168;&#x7C7B;&#x540D;</span></span><br><span class="line"><span class="comment">id&#xFF1A;&#x552F;&#x4E00;&#x6807;&#x8BC6;</span></span><br><span class="line"><span class="comment">resultType&#xFF1A;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">#{id}&#xFF1A;&#x4ECE;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x53C2;&#x6570;&#x4E2D;&#x53D6;&#x51FA;id&#x503C;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">public Employee getEmpById(Integer id);</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">		select id,last_name lastName,email,gender from tbl_employee where id = #{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-&#x83B7;&#x53D6;dao&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x6D4B;&#x8BD5;"><a href="#6-&#x83B7;&#x53D6;dao&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x6D4B;&#x8BD5;" class="headerlink" title="6. &#x83B7;&#x53D6;dao&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x6D4B;&#x8BD5;"></a>6. &#x83B7;&#x53D6;dao&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x6D4B;&#x8BD5;</h3><p>&#x901A;&#x8FC7; sqlSession &#x7684; getMapper &#x65B9;&#x6CD5;&#xFF0C;&#x83B7;&#x53D6; dao&#x63A5;&#x53E3; &#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61; &#xFF08;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;) </p>
<p>&#x7136;&#x540E;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x884C;&#x5B9E;&#x9645;&#x6267;&#x884C;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">		<span class="comment">// 1&#x3001;&#x83B7;&#x53D6;sqlSessionFactory&#x5BF9;&#x8C61;</span></span><br><span class="line">		SqlSessionFactory sqlSessionFactory = getSqlSessionFactory();</span><br><span class="line">		<span class="comment">// 2&#x3001;&#x83B7;&#x53D6;sqlSession&#x5BF9;&#x8C61;</span></span><br><span class="line">		SqlSession openSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="keyword">try</span> {</span><br><span class="line">			<span class="comment">// 3&#x3001;&#x83B7;&#x53D6;&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;</span></span><br><span class="line">			<span class="comment">//&#x4F1A;&#x4E3A;&#x63A5;&#x53E3;&#x81EA;&#x52A8;&#x7684;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x53BB;&#x6267;&#x884C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x65B9;&#x6CD5;</span></span><br><span class="line">			EmployeeMapper mapper = openSession.getMapper(EmployeeMapper.class);</span><br><span class="line">			Employee employee = mapper.getEmpById(<span class="number">1</span>);</span><br><span class="line">			System.out.println(mapper.getClass());</span><br><span class="line">			System.out.println(employee);</span><br><span class="line">		} <span class="keyword">finally</span> {</span><br><span class="line">			openSession.close();</span><br><span class="line">		}</span><br><span class="line">	}</span><br></pre></td></tr></table></figure>

<h3 id="7-&#x603B;&#x7ED3;"><a href="#7-&#x603B;&#x7ED3;" class="headerlink" title="7. &#x603B;&#x7ED3;"></a>7. &#x603B;&#x7ED3;</h3><p>&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x5B9A;&#x4E49;dao&#x63A5;&#x53E3;&#x548C;&#x63A5;&#x53E3;&#x5BF9;&#x5E94;sql&#x64CD;&#x4F5C;&#x3002;mybatis&#x81EA;&#x52A8;&#x6839;&#x636E; sql&#x548C;&#x63A5;&#x53E3;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF01;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. &#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x7F16;&#x5199; dao &#x5C42;&#x7684; &#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x63A5;&#x53E3;</span><br><span class="line">2. &#x7136;&#x540E;&#x5728; mapper xml &#x4E2D; &#x7F16;&#x5199; &#x5B9E;&#x9645;&#x7684; sql &#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x6307;&#x5B9A; &#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x662F;&#x5BF9; &#x54EA;&#x4E2A;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;</span><br><span class="line">3. service&#x5C42;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; dao&#x63A5;&#x53E3;&#xFF0C;&#x83B7;&#x53D6;&#x5230; &#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x884C;&#x8C03;&#x7528;</span><br></pre></td></tr></table></figure>

<h2 id="3-&#x5168;&#x5C40;&#x914D;&#x7F6E;"><a href="#3-&#x5168;&#x5C40;&#x914D;&#x7F6E;" class="headerlink" title="3. &#x5168;&#x5C40;&#x914D;&#x7F6E;"></a>3. &#x5168;&#x5C40;&#x914D;&#x7F6E;</h2><h3 id="1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;dtd&#x7EA6;&#x675F;"><a href="#1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;dtd&#x7EA6;&#x675F;" class="headerlink" title="1. &#x914D;&#x7F6E;&#x6587;&#x4EF6;dtd&#x7EA6;&#x675F;"></a>1. &#x914D;&#x7F6E;&#x6587;&#x4EF6;dtd&#x7EA6;&#x675F;</h3><p>&#x7F16;&#x5199;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x63D0;&#x793A; ==&gt; &#x9700;&#x8981;&#x5F15;&#x5165; dtd &#x6587;&#x4EF6;</p>
<p>&#x8054;&#x7F51;&#x65F6;:  &#x70B9;&#x51FB; dtd &#x8FDE;&#x63A5;&#xFF0C;&#x8FDB;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x9000;&#x51FA;&#x5373;&#x53EF;</p>
<p>&#x672A;&#x8054;&#x7F51;&#x65F6;: &#x544A;&#x8BC9;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x8BE5;dtd url &#x5BF9;&#x5E94;&#x7684; &#x672C;&#x5730; dtd&#x6587;&#x4EF6;&#x5373;&#x53EF;</p>
<h4 id="1-&#x4ECE;jar&#x5305;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;dtd&#x6587;&#x4EF6;"><a href="#1-&#x4ECE;jar&#x5305;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;dtd&#x6587;&#x4EF6;" class="headerlink" title="1. &#x4ECE;jar&#x5305;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;dtd&#x6587;&#x4EF6;"></a>1. &#x4ECE;jar&#x5305;&#x4E2D;&#xFF0C;&#x83B7;&#x53D6;dtd&#x6587;&#x4EF6;</h4><p>1&gt; &#x89E3;&#x538B; mybatis-*.jar&#x5305;&#xFF0C;&#x83B7;&#x53D6;&#x5230; </p>
<p>&#x200B;    mybatis-3-config.dtd (&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F7F;&#x7528;&#x7684;dtd&#x7EA6;&#x675F;)</p>
<p>&#x200B;    mybatis-3-mapper.dtd (mapper xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F7F;&#x7528;&#x7684;dtd&#x7EA6;&#x675F;)</p>
<p>2&gt; &#x5728;xml&#x4E2D;&#xFF0C;&#x914D;&#x7F6E; url &#x4E0E;&#x5BF9;&#x5E94;&#x7684; dtd</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; mybatis-3-config.dtd</p>
<p>mapper xml&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; mybatis-3-mapper.dtd</p>
<p><img src="/2019/12/26/mybatis/image-20191226105351791.png" alt="image-20191226105351791"></p>
<p><img src="/2019/12/26/mybatis/image-20191226105406828.png" alt="image-20191226105406828"></p>
<h3 id="2-properties-&#x6807;&#x7B7E;"><a href="#2-properties-&#x6807;&#x7B7E;" class="headerlink" title="2. properties &#x6807;&#x7B7E;"></a>2. properties &#x6807;&#x7B7E;</h3><blockquote>
<p>&#x7528;&#x6765;&#x5F15;&#x5165;&#x5916;&#x90E8; properties &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;</p>
</blockquote>
<p>resource &#x5C5E;&#x6027;&#x7528;&#x6765;: &#x5F15;&#x5165;&#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x8D44;&#x6E90;</p>
<p>Url &#x5C5E;&#x6027;&#x7528;&#x6765;: &#x5F15;&#x5165;&#x7F51;&#x7EDC;&#x8DEF;&#x5F84;&#x6216;&#x8005;&#x78C1;&#x76D8;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x8D44;&#x6E90;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta"> PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line"><span class="meta"> &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;dbconfig.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span> <span class="attr">url</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-settings"><a href="#3-settings" class="headerlink" title="3. settings"></a>3. settings</h3><h4 id="1-&#x5F00;&#x542F;&#x9A7C;&#x5CF0;&#x547D;&#x540D;"><a href="#1-&#x5F00;&#x542F;&#x9A7C;&#x5CF0;&#x547D;&#x540D;" class="headerlink" title="1. &#x5F00;&#x542F;&#x9A7C;&#x5CF0;&#x547D;&#x540D;"></a>1. &#x5F00;&#x542F;&#x9A7C;&#x5CF0;&#x547D;&#x540D;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">		2&#x3001;settings&#x5305;&#x542B;&#x5F88;&#x591A;&#x91CD;&#x8981;&#x7684;&#x8BBE;&#x7F6E;&#x9879;</span></span><br><span class="line"><span class="comment">		setting:&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x9879;</span></span><br><span class="line"><span class="comment">			name&#xFF1A;&#x8BBE;&#x7F6E;&#x9879;&#x540D;</span></span><br><span class="line"><span class="comment">			value&#xFF1A;&#x8BBE;&#x7F6E;&#x9879;&#x53D6;&#x503C;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-typeAliases"><a href="#4-typeAliases" class="headerlink" title="4. typeAliases"></a>4. typeAliases</h3><blockquote>
<p>&#x7528;&#x6765;&#x7ED9; java &#x5168;&#x9650;&#x5B9A;&#x7C7B;&#x540D; &#x8D77;&#x4E00;&#x4E2A;&#x522B;&#x540D;</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 1&#x3001;typeAlias:&#x4E3A;&#x67D0;&#x4E2A;java&#x7C7B;&#x578B;&#x8D77;&#x522B;&#x540D;</span></span><br><span class="line"><span class="comment">				type:&#x6307;&#x5B9A;&#x8981;&#x8D77;&#x522B;&#x540D;&#x7684;&#x7C7B;&#x578B;&#x5168;&#x7C7B;&#x540D;;&#x9ED8;&#x8BA4;&#x522B;&#x540D;&#x5C31;&#x662F;&#x7C7B;&#x540D;&#x5C0F;&#x5199;&#xFF1B;employee</span></span><br><span class="line"><span class="comment">				alias:&#x6307;&#x5B9A;&#x65B0;&#x7684;&#x522B;&#x540D;</span></span><br><span class="line"><span class="comment">		 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;typeAlias type=&quot;com.atguigu.mybatis.bean.Employee&quot; alias=&quot;emp&quot;/&gt; --&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 2&#x3001;package:&#x4E3A;&#x67D0;&#x4E2A;&#x5305;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x7C7B;&#x6279;&#x91CF;&#x8D77;&#x522B;&#x540D; </span></span><br><span class="line"><span class="comment">				name&#xFF1A;&#x6307;&#x5B9A;&#x5305;&#x540D;&#xFF08;&#x4E3A;&#x5F53;&#x524D;&#x5305;&#x4EE5;&#x53CA;&#x4E0B;&#x9762;&#x6240;&#x6709;&#x7684;&#x540E;&#x4EE3;&#x5305;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x7C7B;&#x90FD;&#x8D77;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x522B;&#x540D;&#xFF08;&#x7C7B;&#x540D;&#x5C0F;&#x5199;&#xFF09;&#xFF0C;&#xFF09;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mybatis.bean&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 3&#x3001;&#x6279;&#x91CF;&#x8D77;&#x522B;&#x540D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;@Alias&#x6CE8;&#x89E3;&#x4E3A;&#x67D0;&#x4E2A;&#x7C7B;&#x578B;&#x6307;&#x5B9A;&#x65B0;&#x7684;&#x522B;&#x540D; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Environments"><a href="#5-Environments" class="headerlink" title="5. Environments"></a>5. Environments</h3><p>mybatis &#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x591A;&#x79CD;&#x73AF;&#x5883;&#xFF0C;&#x6BCF;&#x4E2A;&#x73AF;&#x5883;&#x5C31;&#x662F;&#x4E00;&#x4E2A; environment</p>
<p>1&gt; &#x6BCF;&#x4E2A; environment &#x5FC5;&#x987B;&#x5305;&#x542B;&#x4E00;&#x4E2A; transactionManager &#x548C; dataSource</p>
<p>2&gt;  id &#x662F; &#x5F53;&#x524D;&#x73AF;&#x5883;&#x7684; &#x552F;&#x4E00;&#x6807;&#x8BC6;</p>
<p>3&gt; environments &#x4F7F;&#x7528; default &#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x73AF;&#x5883;&#xFF0C;&#x8FBE;&#x5230;&#x5FEB;&#x901F;&#x5207;&#x6362;</p>
<p>4&gt; transactionManager &#x662F; &#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;</p>
<ul>
<li>JDBC: JdbcTransactionFactory</li>
<li>MANAGED: ManagedTransactionFactory</li>
<li>&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;: &#x5B9E;&#x73B0; TransactionFactory&#x63A5;&#x53E3;</li>
</ul>
<p>&#x6CE8;: Configuration.class &#x914D;&#x7F6E;&#x4E86; JDBC MANAGED &#x7B49;&#x522B;&#x540D;&#x4EE5;&#x53CA;&#x5176;&#x771F;&#x5B9E;&#x7C7B;&#x578B;</p>
<p>5&gt; dataSource &#x6570;&#x636E;&#x6E90;</p>
<ul>
<li>UNPOOLED</li>
<li>POOLED</li>
<li>JNDI</li>
<li>&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x6E90;: &#x5B9E;&#x73B0; DataSourceFactory&#x63A5;&#x53E3;</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev_mysql&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev_mysql&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.driver}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.url}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.username}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.password}&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev_oracle&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${orcl.driver}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${orcl.url}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${orcl.username}&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${orcl.password}&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-databaseIdProvider"><a href="#6-databaseIdProvider" class="headerlink" title="6. databaseIdProvider"></a>6. databaseIdProvider</h3><p>&#x7528;&#x6765;&#x652F;&#x6301;&#x591A;&#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;&#xFF08;&#x540C;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#xFF0C;&#x6709;&#x591A;&#x4E2A;&#x7248;&#x672C;&#x7684;sql&#x8BED;&#x53E5;&#xFF0C;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x652F;&#x6301;mysql&#xFF0C;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x652F;&#x6301;orcale&#x7B49;)</p>
<h4 id="1-&#x914D;&#x7F6E;-databaseIdProvider"><a href="#1-&#x914D;&#x7F6E;-databaseIdProvider" class="headerlink" title="1. &#x914D;&#x7F6E; databaseIdProvider"></a>1. &#x914D;&#x7F6E; databaseIdProvider</h4><p>&#x5982;&#x679C;&#x77E5;&#x9053;&#x5B9E;&#x9645;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;?</p>
<p>&#x200B;    &#x6570;&#x636E;&#x5E93;&#x9A71;&#x52A8;  =&gt; &#x6709; getDatabaseProductName()&#x65B9;&#x6CD5; ==&gt; &#x80FD;&#x591F;&#x83B7;&#x53D6;&#x5230; &#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;&#x7684;&#x6807;&#x8BC6;&#x4FE1;&#x606F;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;&#x8D77;&#x522B;&#x540D; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Oracle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;SQL Server&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlserver&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x5728;-sql-&#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;-databaseId"><a href="#2-&#x5728;-sql-&#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;-databaseId" class="headerlink" title="2. &#x5728; sql &#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A; databaseId"></a>2. &#x5728; sql &#x8BED;&#x53E5;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A; databaseId</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line"> --&gt;</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">		select * from tbl_employee where id = #{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">databaseId</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">		select * from tbl_employee where id = #{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">databaseId</span>=<span class="string">&quot;oracle&quot;</span>&gt;</span></span><br><span class="line">		select EMPLOYEE_ID id,LAST_NAME	lastName,EMAIL email </span><br><span class="line">		from employees where EMPLOYEE_ID=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-mappers"><a href="#7-mappers" class="headerlink" title="7. mappers"></a>7. mappers</h3><p>&#x5C06;&#x6211;&#x4EEC;&#x5199;&#x597D;&#x7684;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;&#xFF08;EmployeeMapper.xml&#xFF09;&#x6CE8;&#x518C;&#x5230;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;mybatis-config.xml&#xFF09;&#x4E2D;</p>
<h4 id="1-&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;"><a href="#1-&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;" class="headerlink" title="1. &#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;"></a>1. &#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;</h4><p>&#x6B64;&#x79CD;&#x65B9;&#x5F0F;&#x4E0B;&#xFF0C;dao&#x5C42;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#xFF0C;&#x7136;&#x540E; &#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x7F16;&#x5199; xml &#x6587;&#x4EF6; &#xFF08;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5728;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x6807;&#x660E;&#xFF0C;xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5728;&#x54EA;)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			mapper:&#x6CE8;&#x518C;&#x4E00;&#x4E2A;sql&#x6620;&#x5C04; </span></span><br><span class="line"><span class="comment">				&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">				resource&#xFF1A;&#x5F15;&#x7528;&#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">					mybatis/mapper/EmployeeMapper.xml</span></span><br><span class="line"><span class="comment">				url&#xFF1A;&#x5F15;&#x7528;&#x7F51;&#x8DEF;&#x8DEF;&#x5F84;&#x6216;&#x8005;&#x78C1;&#x76D8;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">					file:///var/mappers/AuthorMapper.xml</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/mapper/EmployeeMapper.xml&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x6CE8;&#x518C;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;"><a href="#2-&#x6CE8;&#x518C;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="2. &#x6CE8;&#x518C;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;"></a>2. &#x6CE8;&#x518C;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 	</span></span><br><span class="line"><span class="comment">				&#x6CE8;&#x518C;&#x63A5;&#x53E3;</span></span><br><span class="line"><span class="comment">				class&#xFF1A;&#x5F15;&#x7528;&#xFF08;&#x6CE8;&#x518C;&#xFF09;&#x63A5;&#x53E3;&#xFF0C;</span></span><br><span class="line"><span class="comment">					1&#x3001;&#x6709;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;&#xFF0C;&#x6620;&#x5C04;&#x6587;&#x4EF6;&#x540D;&#x5FC5;&#x987B;&#x548C;&#x63A5;&#x53E3;&#x540C;&#x540D;&#xFF0C;&#x5E76;&#x4E14;&#x653E;&#x5728;&#x4E0E;&#x63A5;&#x53E3;&#x540C;&#x4E00;&#x76EE;&#x5F55;&#x4E0B;&#xFF1B;</span></span><br><span class="line"><span class="comment">					2&#x3001;&#x6CA1;&#x6709;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x6709;&#x7684;sql&#x90FD;&#x662F;&#x5229;&#x7528;&#x6CE8;&#x89E3;&#x5199;&#x5728;&#x63A5;&#x53E3;&#x4E0A;;</span></span><br><span class="line"><span class="comment">					&#x63A8;&#x8350;&#xFF1A;</span></span><br><span class="line"><span class="comment">						&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x590D;&#x6742;&#x7684;Dao&#x63A5;&#x53E3;&#x6211;&#x4EEC;&#x6765;&#x5199;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="comment">						&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x7B80;&#x5355;&#x7684;Dao&#x63A5;&#x53E3;&#x4E3A;&#x4E86;&#x5F00;&#x53D1;&#x5FEB;&#x901F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#xFF1B;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapperAnnotation&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-&#x6279;&#x91CF;&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;"><a href="#3-&#x6279;&#x91CF;&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="3. &#x6279;&#x91CF;&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;"></a>3. &#x6279;&#x91CF;&#x6CE8;&#x518C;&#x7684;&#x65B9;&#x5F0F;</h4><p>&#x901A;&#x8FC7; package name &#x65B9;&#x5F0F;&#xFF0C;&#x6307;&#x5B9A; &#x4E00;&#x4E2A;&#x5305;&#x4E0B; &#x6240;&#x6709;&#x7684; &#x63A5;&#x53E3;&#x90FD;&#x88AB;&#x6CE8;&#x518C;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x653E;&#x7F6E;&#x63A5;&#x53E3;&#x5BF9;&#x5E94;&#x7684; &#x6620;&#x5C04;&#x6587;&#x4EF6;&#x5462;?</p>
<p>&#x200B;    1) &#x5C06; &#x6620;&#x5C04;&#x6587;&#x4EF6; &#x4E0E; &#x63A5;&#x53E3; &#x6587;&#x4EF6; &#x653E;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5305;&#x4E0B;</p>
<p>&#x200B;    2) &#x65B9;&#x5F0F;&#x4E00;&#x867D;&#x7136;&#x53EF;&#x884C;&#xFF0C;&#x4F46;&#x662F; java &#x4E0E; xml &#x6DF7;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x4E0D;&#x5408;&#x7406;</p>
<p>&#x200B;    ==&gt; &#x7531;&#x4E8E; &#x7C7B;&#x8DEF;&#x5F84;&#x4E0B;&#xFF0C;&#x76F8;&#x540C;&#x5305;&#x63A5;&#x53E3; &#x6700;&#x7EC8;&#x90FD;&#x662F;&#x653E;&#x5728;&#x4E00;&#x8D77;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5728; conf &#x4E0B;&#xFF0C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x540C;&#x6837;&#x7684;&#x5305;&#xFF0C;&#x5C06;xml &#x653E;&#x5728;&#x6B64;&#x5305;&#x4E0B;&#xFF0C;&#x5B9E;&#x9645;&#x4F4D;&#x7F6E;&#x90FD;&#x662F;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x6279;&#x91CF;&#x6CE8;&#x518C;&#xFF1A; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mybatis.dao&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2019/12/26/mybatis/image-20191226113310182.png" alt="image-20191226113310182"></p>
<h2 id="4-mapper-&#x6620;&#x5C04;&#x6587;&#x4EF6;"><a href="#4-mapper-&#x6620;&#x5C04;&#x6587;&#x4EF6;" class="headerlink" title="4. mapper &#x6620;&#x5C04;&#x6587;&#x4EF6;"></a>4. mapper &#x6620;&#x5C04;&#x6587;&#x4EF6;</h2><h3 id="1-&#x5F71;&#x54CD;&#x884C;&#x6570;"><a href="#1-&#x5F71;&#x54CD;&#x884C;&#x6570;" class="headerlink" title="1. &#x5F71;&#x54CD;&#x884C;&#x6570;"></a>1. &#x5F71;&#x54CD;&#x884C;&#x6570;</h3><p>mybatis &#x5141;&#x8BB8; &#x589E;&#x5220;&#x6539; &#x76F4;&#x63A5; &#x5B9A;&#x4E49;&#x4EE5;&#x4E0B;&#x7C7B;&#x578B;&#x7684;&#x8FD4;&#x56DE;&#x503C;</p>
<ul>
<li>Integer</li>
<li>Long</li>
<li>Boolean</li>
<li>void</li>
</ul>
<p>==&gt; &#x5BF9;&#x4E8E; Insert, Update, Delete &#x7B49;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x5F71;&#x54CD;&#x884C;&#x6570;&#xFF0C;&#x76F4;&#x63A5;&#x5B9A;&#x4E49; &#x4E0A;&#x8FF0;&#x7C7B;&#x578B;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x5373;&#x53EF;</p>
<p>&#x6CE8;&#x610F;: &#x76F4;&#x63A5;&#x5728;&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x503C;&#x586B;&#x5199;&#xFF0C;mybatis &#x4F1A;&#x6839;&#x636E;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x4E0D;&#x9700;&#x8981; &#x5199; resultType</p>
<h3 id="2-&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x4E0E;&#x624B;&#x52A8;&#x63D0;&#x4EA4;"><a href="#2-&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x4E0E;&#x624B;&#x52A8;&#x63D0;&#x4EA4;" class="headerlink" title="2. &#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x4E0E;&#x624B;&#x52A8;&#x63D0;&#x4EA4;"></a>2. &#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x4E0E;&#x624B;&#x52A8;&#x63D0;&#x4EA4;</h3><p><img src="/2019/12/26/mybatis/image-20191226114249419.png" alt="image-20191226114249419"></p>
<p>&#x4F7F;&#x7528; openSession() &#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5BF9;&#x4E8E; &#x589E;&#x5220;&#x6539;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x63D0;&#x4EA4;&#xFF1B;</p>
<p>&#x5982;&#x679C;&#x60F3;&#x8981;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; openSession(true); &#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6; sqlSession</p>
<h3 id="3-&#x81EA;&#x589E;&#x4E3B;&#x952E;"><a href="#3-&#x81EA;&#x589E;&#x4E3B;&#x952E;" class="headerlink" title="3. &#x81EA;&#x589E;&#x4E3B;&#x952E;"></a>3. &#x81EA;&#x589E;&#x4E3B;&#x952E;</h3><ol>
<li>useGeneratedKeys=&#x201D;true&#x201D;&#xFF1B;&#x4F7F;&#x7528;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x83B7;&#x53D6;&#x4E3B;&#x952E;&#x503C;&#x7B56;&#x7565;</li>
<li>keyProperty&#xFF1B;&#x6307;&#x5B9A;&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x952E;&#x5C5E;&#x6027;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;mybatis&#x83B7;&#x53D6;&#x5230;&#x4E3B;&#x952E;&#x503C;&#x4EE5;&#x540E;&#xFF0C;&#x5C06;&#x8FD9;&#x4E2A;&#x503C;&#x5C01;&#x88C5;&#x7ED9;javaBean&#x7684;&#x54EA;&#x4E2A;&#x5C5E;&#x6027;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- public void addEmp(Employee employee); --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- parameterType&#xFF1A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C; </span></span><br><span class="line"><span class="comment">	&#x83B7;&#x53D6;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x7684;&#x503C;&#xFF1A;</span></span><br><span class="line"><span class="comment">		mysql&#x652F;&#x6301;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#xFF0C;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x503C;&#x7684;&#x83B7;&#x53D6;&#xFF0C;mybatis&#x4E5F;&#x662F;&#x5229;&#x7528;statement.getGenreatedKeys()&#xFF1B;</span></span><br><span class="line"><span class="comment">		useGeneratedKeys=&quot;true&quot;&#xFF1B;&#x4F7F;&#x7528;&#x81EA;&#x589E;&#x4E3B;&#x952E;&#x83B7;&#x53D6;&#x4E3B;&#x952E;&#x503C;&#x7B56;&#x7565;</span></span><br><span class="line"><span class="comment">		keyProperty&#xFF1B;&#x6307;&#x5B9A;&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x952E;&#x5C5E;&#x6027;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;mybatis&#x83B7;&#x53D6;&#x5230;&#x4E3B;&#x952E;&#x503C;&#x4EE5;&#x540E;&#xFF0C;&#x5C06;&#x8FD9;&#x4E2A;&#x503C;&#x5C01;&#x88C5;&#x7ED9;javaBean&#x7684;&#x54EA;&#x4E2A;&#x5C5E;&#x6027;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmp&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">databaseId</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">		insert into tbl_employee(last_name,email,gender) </span><br><span class="line">		values(#{lastName},#{email},#{gender})</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-&#x53C2;&#x6570;&#x5904;&#x7406;"><a href="#4-&#x53C2;&#x6570;&#x5904;&#x7406;" class="headerlink" title="4. &#x53C2;&#x6570;&#x5904;&#x7406;"></a>4. &#x53C2;&#x6570;&#x5904;&#x7406;</h3><h4 id="1-&#x5355;&#x4E2A;&#x53C2;&#x6570;"><a href="#1-&#x5355;&#x4E2A;&#x53C2;&#x6570;" class="headerlink" title="1. &#x5355;&#x4E2A;&#x53C2;&#x6570;"></a>1. &#x5355;&#x4E2A;&#x53C2;&#x6570;</h4><p>&#x5355;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;mybatis&#x4E0D;&#x505A;&#x81EA;&#x52A8;&#x5904;&#x7406;&#xFF0C; #{&#x4EFB;&#x4F55;&#x540D;&#x79F0;} &#x90FD;&#x53EF;&#x4EE5;&#x53D6;&#x5230;&#x53C2;&#x6570;&#x7684;&#x503C;</p>
<h4 id="2-&#x591A;&#x4E2A;&#x53C2;&#x6570;"><a href="#2-&#x591A;&#x4E2A;&#x53C2;&#x6570;" class="headerlink" title="2. &#x591A;&#x4E2A;&#x53C2;&#x6570;"></a>2. &#x591A;&#x4E2A;&#x53C2;&#x6570;</h4><p>&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x4F1A;&#x505A;&#x7279;&#x6B8A;&#x7684;&#x5904;&#x7406;&#x3002;mybatis &#x5C06;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5C01;&#x88C5;&#x6210;&#x4E86;&#x4E00;&#x4E2A;map&#xFF0C;&#x5176;&#x4E2D; map &#x7684;key&#x503C; &#x4E3A; param1, param2  , &#x2026;. paramN &#x6216;&#x8005; &#x53C2;&#x6570;&#x7684;&#x7D22;&#x5F15; 0, 1, value&#x5BF9;&#x5E94;&#x7684;&#x5C31;&#x662F; &#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x503C;</p>
<p>==&gt; &#x56E0;&#x6B64; &#x76F4;&#x63A5;&#x4F7F;&#x7528; #{id} #{lastname} &#x65B9;&#x5F0F; &#x662F;&#x53D6;&#x4E0D;&#x5230;&#x503C;&#x7684;</p>
<p>&#x200B;    &#x89E3;&#x51B3;: &#x4F7F;&#x7528;&#x547D;&#x540D;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x5F0F; @Param(&#x201C;&#x81EA;&#x5B9A;&#x4E49;&#x7684;key&#x201D;)</p>
<p>&#x200B;            &#x660E;&#x786E;&#x6307;&#x5B9A;&#x5C01;&#x88C5;&#x53C2;&#x6570;&#x4E3A;map&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;key&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x662F; param1&#x7684;&#x65B9;&#x5F0F;</p>
<h4 id="3-&#x4F20;&#x5165;&#x5355;&#x4E2A;-pojo"><a href="#3-&#x4F20;&#x5165;&#x5355;&#x4E2A;-pojo" class="headerlink" title="3. &#x4F20;&#x5165;&#x5355;&#x4E2A; pojo"></a>3. &#x4F20;&#x5165;&#x5355;&#x4E2A; pojo</h4><p> #{pojo&#x7684;&#x5C5E;&#x6027;&#x540D;} &#x53D6;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x5373;&#x53EF;</p>
<h4 id="4-&#x4F20;&#x5165;&#x5355;&#x4E2A;-map&#x7684;&#x65B9;&#x5F0F;"><a href="#4-&#x4F20;&#x5165;&#x5355;&#x4E2A;-map&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="4. &#x4F20;&#x5165;&#x5355;&#x4E2A; map&#x7684;&#x65B9;&#x5F0F;"></a>4. &#x4F20;&#x5165;&#x5355;&#x4E2A; map&#x7684;&#x65B9;&#x5F0F;</h4><p>#{map&#x4E2D;&#x7684;key} &#x53D6;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x5373;&#x53EF;</p>
<h4 id="5-TO-Transfer-Object-&#x5BF9;&#x8C61;"><a href="#5-TO-Transfer-Object-&#x5BF9;&#x8C61;" class="headerlink" title="5. TO(Transfer Object)&#x5BF9;&#x8C61;"></a>5. TO(Transfer Object)&#x5BF9;&#x8C61;</h4><p>&#x5982;&#x679C; &#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;javabean&#xFF0C;&#x53EF;&#x4EE5;&#x5C01;&#x88C5;&#x4E00;&#x4E2A; TO &#x5BF9;&#x8C61;&#xFF0C;&#x76F4;&#x63A5;&#x4F20;&#x5165;</p>
<h4 id="6-&#x591A;&#x4E2A;&#x53C2;&#x6570;-POJO"><a href="#6-&#x591A;&#x4E2A;&#x53C2;&#x6570;-POJO" class="headerlink" title="6. &#x591A;&#x4E2A;&#x53C2;&#x6570; + POJO"></a>6. &#x591A;&#x4E2A;&#x53C2;&#x6570; + POJO</h4><p><img src="/2019/12/26/mybatis/image-20191226143746900.png" alt="image-20191226143746900"></p>
<h4 id="7-Collection&#x53C2;&#x6570;"><a href="#7-Collection&#x53C2;&#x6570;" class="headerlink" title="7. Collection&#x53C2;&#x6570;"></a>7. Collection&#x53C2;&#x6570;</h4><p>&#x5BF9; Collection(List, Set)&#x7C7B;&#x578B;&#xFF0C;&#x6216;&#x8005; &#x6570;&#x7EC4;&#x7C7B;&#x578B;&#xFF0C;&#x4E5F;&#x4F1A;&#x505A;&#x7279;&#x6B8A;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5C06;&#x4F20;&#x5165;&#x7684;list&#x6216;&#x8005;&#x6570;&#x7EC4;&#xFF0C;&#x5C01;&#x88C5;&#x5230;map&#x4E2D;&#x3002;&#x5C01;&#x88C5;map&#x662F;&#xFF0C;&#x5982;&#x679C;&#x662F; List&#xFF0C;key&#x5C31;&#x662F; list; &#x5982;&#x679C;&#x662F;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#xFF0C;key&#x5C31;&#x662F; array</p>
<h3 id="5-&#x4E0E;-&#x7684;&#x533A;&#x522B;"><a href="#5-&#x4E0E;-&#x7684;&#x533A;&#x522B;" class="headerlink" title="5. #{}&#x4E0E;${}&#x7684;&#x533A;&#x522B;"></a>5. #{}&#x4E0E;${}&#x7684;&#x533A;&#x522B;</h3><h4 id="1"><a href="#1" class="headerlink" title="1. #{}"></a>1. #{}</h4><p>&#x4EE5;&#x9884;&#x7F16;&#x8BD1;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5C06;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x5230; sql&#x8BED;&#x53E5;&#x4E2D;&#x3002;PreparedStatement &#x65B9;&#x5F0F;</p>
<h4 id="2"><a href="#2" class="headerlink" title="2. ${}"></a>2. ${}</h4><p>&#x53EA;&#x662F;&#x5C06;&#x53C2;&#x6570;&#x62FC;&#x63A5;&#x5230; sql &#x8BED;&#x53E5;&#x4E2D;</p>
<h4 id="3-&#x4F5C;&#x7528;"><a href="#3-&#x4F5C;&#x7528;" class="headerlink" title="3. &#x4F5C;&#x7528;"></a>3. &#x4F5C;&#x7528;</h4><p>#{} &#x7528;&#x6765;&#x4F7F;&#x7528; &#x9884;&#x7F16;&#x8BD1;&#x65B9;&#x5F0F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t_1 where id=#{id}</span><br><span class="line">==&gt; select * from t_1 where id=?</span><br></pre></td></tr></table></figure>

<p>${} &#x7528;&#x6765; &#x52A8;&#x6001;&#x7684;&#x66FF;&#x6362; &#x8868;&#x540D;&#xFF0C;&#x884C;&#x540D;&#x7B49;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t_1 where ${&#x5217;&#x540D;&#x79F0;}=3</span><br><span class="line">==&gt; select * from t_1 where &#x5217;&#x540D;=3</span><br></pre></td></tr></table></figure>

<h3 id="6-select&#x5143;&#x7D20;"><a href="#6-select&#x5143;&#x7D20;" class="headerlink" title="6.select&#x5143;&#x7D20;"></a>6.select&#x5143;&#x7D20;</h3><h4 id="1-id-&#x5C5E;&#x6027;"><a href="#1-id-&#x5C5E;&#x6027;" class="headerlink" title="1. id &#x5C5E;&#x6027;"></a>1. id &#x5C5E;&#x6027;</h4><p>&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x7B26;</p>
<h4 id="2-parameterType"><a href="#2-parameterType" class="headerlink" title="2. parameterType:"></a>2. parameterType:</h4><p>&#x53C2;&#x6570;&#x7C7B;&#x578B;, &#x53EF;&#x4EE5;&#x4E0D;&#x4F20;&#xFF0C;mybatis &#x4F1A;&#x6839;&#x636E; TypeHandler &#x81EA;&#x52A8;&#x63A8;&#x65AD;</p>
<h4 id="3-resultType"><a href="#3-resultType" class="headerlink" title="3. resultType:"></a>3. resultType:</h4><p>&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;. &#x522B;&#x540D; &#x6216;&#x8005; &#x5168;&#x7C7B;&#x540D;&#x3002;&#x4E0D;&#x80FD;&#x548C; resultMap&#x540C;&#x65F6;&#x4F7F;&#x7528;</p>
<p>&#x6CE8;&#x610F;: &#x5982;&#x679C;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#xFF0C;&#x90A3;&#x4E48;&#x8981;&#x5199;&#x96C6;&#x5408;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x578B;</p>
<h4 id="4-&#x8FD4;&#x56DE;&#x503C;&#x4E3A;-Map-lt-Integer-Employee-gt"><a href="#4-&#x8FD4;&#x56DE;&#x503C;&#x4E3A;-Map-lt-Integer-Employee-gt" class="headerlink" title="4. &#x8FD4;&#x56DE;&#x503C;&#x4E3A; Map&lt;Integer, Employee&gt;"></a>4. &#x8FD4;&#x56DE;&#x503C;&#x4E3A; Map&lt;Integer, Employee&gt;</h4><p>&#x5176;&#x4E2D; key &#x662F; &#x8FD9;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x4E3B;&#x952E;&#x503C;&#xFF0C; value &#x662F; &#x5C01;&#x88C5;&#x7684; java pojo&#x5BF9;&#x8C61;</p>
<ol>
<li>resultType &#x662F; Employee &#x5BF9;&#x8C61;&#x7C7B;&#x578B;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public Map&lt;Integer, Employee&gt; getEmpByLastNameLikeReturnMap(String lastName);  --&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByLastNameLikeReturnMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> 		select * from tbl_employee where last_name like #{lastName}</span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x6307;&#x5B9A; map &#x7684;key &#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x5217;&#x7684;&#x503C;</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeMapper</span> </span>{</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//&#x591A;&#x6761;&#x8BB0;&#x5F55;&#x5C01;&#x88C5;&#x4E00;&#x4E2A;map&#xFF1A;Map&lt;Integer,Employee&gt;:&#x952E;&#x662F;&#x8FD9;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x4E3B;&#x952E;&#xFF0C;&#x503C;&#x662F;&#x8BB0;&#x5F55;&#x5C01;&#x88C5;&#x540E;&#x7684;javaBean</span></span><br><span class="line">	<span class="comment">//@MapKey:&#x544A;&#x8BC9;mybatis&#x5C01;&#x88C5;&#x8FD9;&#x4E2A;map&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x5C5E;&#x6027;&#x4F5C;&#x4E3A;map&#x7684;key</span></span><br><span class="line">	<span class="meta">@MapKey</span>(<span class="string">&quot;lastName&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Map&lt;String, Employee&gt; <span class="title">getEmpByLastNameLikeReturnMap</span><span class="params">(String lastName)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="7-&#x81EA;&#x52A8;&#x6620;&#x5C04;"><a href="#7-&#x81EA;&#x52A8;&#x6620;&#x5C04;" class="headerlink" title="7. &#x81EA;&#x52A8;&#x6620;&#x5C04;"></a>7. &#x81EA;&#x52A8;&#x6620;&#x5C04;</h3><p>&#x524D;&#x63D0;:</p>
<p>&#x200B;    1&gt; select &#x6807;&#x7B7E;&#xFF0C;&#x4F7F;&#x7528; resultType &#x5C5E;&#x6027;</p>
<p>&#x200B;    2&gt; resultType &#x4E2D; &#x5B9A;&#x4E49;&#x4E00;&#x4E2A; java bean &#x65F6;</p>
<p>&#x5F53; sql &#x8BED;&#x53E5;&#x67E5;&#x8BE2;&#x51FA;&#x7ED3;&#x679C;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x5E94;&#x8F93;&#x51FA;&#x914D;&#x7F6E;&#x7684; Java &#x5305;&#x88C5;&#x7C7B;&#x4E2D;&#x6709;&#x76F8;&#x540C;&#x540D;&#x79F0;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x4E14;&#x62E5;&#x6709; set &#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x8BE5;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x6620;&#x5C04;</p>
<p>&#x914D;&#x7F6E;:</p>
<p>&#x200B;    &#x5168;&#x5C40;setting&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;autoMappingBehavior &#x5C5E;&#x6027;</p>
<h3 id="8-ResultMap"><a href="#8-ResultMap" class="headerlink" title="8. ResultMap"></a>8. ResultMap</h3><p>&#x81EA;&#x5B9A;&#x4E49;&#x7ED3;&#x679C;&#x96C6;&#x6620;&#x5C04;</p>
<h4 id="1-&#x7B80;&#x5355;&#x6620;&#x5C04;"><a href="#1-&#x7B80;&#x5355;&#x6620;&#x5C04;" class="headerlink" title="1. &#x7B80;&#x5355;&#x6620;&#x5C04;"></a>1. &#x7B80;&#x5355;&#x6620;&#x5C04;</h4><p>&#x6CE8;&#x610F;: &#x5BF9;&#x4E8E;&#x4E3B;&#x952E;&#x5217;&#xFF0C;&#x8981;&#x4F7F;&#x7528; id&#xFF0C;&#x4F1A;&#x52A0;&#x5FEB;&#x901F;&#x5EA6;</p>
<p>1) &#x5176;&#x4E2D; column &#x662F; &#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5217;&#x540D;&#xFF0C;property &#x662F; java &#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5C5E;&#x6027;    </p>
<p>2) &#x5176;&#x4ED6;&#x4E0D;&#x6307;&#x5B9A;&#x7684;&#x5217;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x5C01;&#x88C5;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5EFA;&#x8BAE;&#x5C06;&#x5168;&#x90E8;&#x7684;&#x6620;&#x5C04;&#x89C4;&#x5219;&#x90FD;&#x5199;&#x4E0A;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapperPlus&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--&#x81EA;&#x5B9A;&#x4E49;&#x67D0;&#x4E2A;javaBean&#x7684;&#x5C01;&#x88C5;&#x89C4;&#x5219;</span></span><br><span class="line"><span class="comment">	type&#xFF1A;&#x81EA;&#x5B9A;&#x4E49;&#x89C4;&#x5219;&#x7684;Java&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">	id:&#x552F;&#x4E00;id&#x65B9;&#x4FBF;&#x5F15;&#x7528;</span></span><br><span class="line"><span class="comment">	  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MySimpleEmp&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&#x6307;&#x5B9A;&#x4E3B;&#x952E;&#x5217;&#x7684;&#x5C01;&#x88C5;&#x89C4;&#x5219;</span></span><br><span class="line"><span class="comment">		id&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x4F1A;&#x5E95;&#x5C42;&#x6709;&#x4F18;&#x5316;&#xFF1B;</span></span><br><span class="line"><span class="comment">		column&#xFF1A;&#x6307;&#x5B9A;&#x54EA;&#x4E00;&#x5217;</span></span><br><span class="line"><span class="comment">		property&#xFF1A;&#x6307;&#x5B9A;&#x5BF9;&#x5E94;&#x7684;javaBean&#x5C5E;&#x6027;</span></span><br><span class="line"><span class="comment">		  --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x5B9A;&#x4E49;&#x666E;&#x901A;&#x5217;&#x5C01;&#x88C5;&#x89C4;&#x5219; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x5176;&#x4ED6;&#x4E0D;&#x6307;&#x5B9A;&#x7684;&#x5217;&#x4F1A;&#x81EA;&#x52A8;&#x5C01;&#x88C5;&#xFF1A;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5199;resultMap&#x5C31;&#x628A;&#x5168;&#x90E8;&#x7684;&#x6620;&#x5C04;&#x89C4;&#x5219;&#x90FD;&#x5199;&#x4E0A;&#x3002; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- resultMap:&#x81EA;&#x5B9A;&#x4E49;&#x7ED3;&#x679C;&#x96C6;&#x6620;&#x5C04;&#x89C4;&#x5219;&#xFF1B;  --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpById&quot;</span>  <span class="attr">resultMap</span>=<span class="string">&quot;MySimpleEmp&quot;</span>&gt;</span></span><br><span class="line">		select * from tbl_employee where id=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x9AD8;&#x7EA7;&#x5C01;&#x88C5;"><a href="#2-&#x9AD8;&#x7EA7;&#x5C01;&#x88C5;" class="headerlink" title="2. &#x9AD8;&#x7EA7;&#x5C01;&#x88C5;"></a>2. &#x9AD8;&#x7EA7;&#x5C01;&#x88C5;</h4><h5 id="1-Java-bean-&#x4E2D;-&#x5305;&#x542B;-java-bean"><a href="#1-Java-bean-&#x4E2D;-&#x5305;&#x542B;-java-bean" class="headerlink" title="1. Java bean &#x4E2D; &#x5305;&#x542B; java bean"></a>1. Java bean &#x4E2D; &#x5305;&#x542B; java bean</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String lastName;</span><br><span class="line">	<span class="keyword">private</span> String email;</span><br><span class="line">	<span class="keyword">private</span> String gender;</span><br><span class="line">	<span class="keyword">private</span> Department dept;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String departmentName;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Employee&gt; emps;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x65B9;&#x5F0F;&#x4E00;: &#x67E5;&#x8BE2;&#x51FA;&#x5458;&#x5DE5;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x67E5;&#x8BE2;&#x51FA;&#x90E8;&#x95E8;&#x7684;&#x4FE1;&#x606F;</p>
<p>&#x7EA7;&#x8054;&#x5C5E;&#x6027;&#x7684;&#x65B9;&#x5F0F;: </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDifEmp&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.departmentName&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDept&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDifEmp&quot;</span>&gt;</span></span><br><span class="line">		SELECT e.id id,e.last_name last_name,e.gender gender,e.d_id d_id,</span><br><span class="line">		d.id did,d.dept_name dept_name FROM tbl_employee e,tbl_dept d</span><br><span class="line">		WHERE e.d_id=d.id AND e.id=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>association&#x7684;&#x65B9;&#x5F0F;:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDifEmp2&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--  association&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8054;&#x5408;&#x7684;javaBean&#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment">		property=&quot;dept&quot;&#xFF1A;&#x6307;&#x5B9A;&#x54EA;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x8054;&#x5408;&#x7684;&#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment">		javaType:&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x578B;[&#x4E0D;&#x80FD;&#x7701;&#x7565;]</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Department&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDept&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDifEmp2&quot;</span>&gt;</span></span><br><span class="line">		SELECT e.id id,e.last_name last_name,e.gender gender,e.d_id d_id,</span><br><span class="line">		d.id did,d.dept_name dept_name FROM tbl_employee e,tbl_dept d</span><br><span class="line">		WHERE e.d_id=d.id AND e.id=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x65B9;&#x5F0F;&#x4E8C;: &#x4F7F;&#x7528; association &#x8FDB;&#x884C;&#x5206;&#x6B65;&#x67E5;&#x8BE2;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &#x4F7F;&#x7528;association&#x8FDB;&#x884C;&#x5206;&#x6B65;&#x67E5;&#x8BE2;&#xFF1A;</span></span><br><span class="line"><span class="comment">		1&#x3001;&#x5148;&#x6309;&#x7167;&#x5458;&#x5DE5;id&#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">		2&#x3001;&#x6839;&#x636E;&#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#x4FE1;&#x606F;&#x4E2D;&#x7684;d_id&#x503C;&#x53BB;&#x90E8;&#x95E8;&#x8868;&#x67E5;&#x51FA;&#x90E8;&#x95E8;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">		3&#x3001;&#x90E8;&#x95E8;&#x8BBE;&#x7F6E;&#x5230;&#x5458;&#x5DE5;&#x4E2D;&#xFF1B;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	 </span><br><span class="line">	 <span class="comment">&lt;!--  id  last_name  email   gender    d_id   --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyEmpByStep&quot;</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="comment">&lt;!-- association&#x5B9A;&#x4E49;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x7684;&#x5C01;&#x88C5;&#x89C4;&#x5219;</span></span><br><span class="line"><span class="comment">	 		select:&#x8868;&#x660E;&#x5F53;&#x524D;&#x5C5E;&#x6027;&#x662F;&#x8C03;&#x7528;select&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x67E5;&#x51FA;&#x7684;&#x7ED3;&#x679C;</span></span><br><span class="line"><span class="comment">	 		column:&#x6307;&#x5B9A;&#x5C06;&#x54EA;&#x4E00;&#x5217;&#x7684;&#x503C;&#x4F20;&#x7ED9;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">	 		</span></span><br><span class="line"><span class="comment">	 		&#x6D41;&#x7A0B;&#xFF1A;&#x4F7F;&#x7528;select&#x6307;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#xFF08;&#x4F20;&#x5165;column&#x6307;&#x5B9A;&#x7684;&#x8FD9;&#x5217;&#x53C2;&#x6570;&#x7684;&#x503C;&#xFF09;&#x67E5;&#x51FA;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C01;&#x88C5;&#x7ED9;property&#x6307;&#x5B9A;&#x7684;&#x5C5E;&#x6027;</span></span><br><span class="line"><span class="comment">	 	 --&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> </span></span><br><span class="line"><span class="tag">	 		<span class="attr">select</span>=<span class="string">&quot;com.atguigu.mybatis.dao.DepartmentMapper.getDeptById&quot;</span></span></span><br><span class="line"><span class="tag">	 		<span class="attr">column</span>=<span class="string">&quot;d_id&quot;</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!--  public Employee getEmpByIdStep(Integer id);--&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyEmpByStep&quot;</span>&gt;</span></span><br><span class="line">	 	select * from tbl_employee where id=#{id}</span><br><span class="line">	 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_parameter!=null&quot;</span>&gt;</span></span><br><span class="line">	 		and 1=1</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x65B9;&#x5F0F;&#x4E09;: association&#x5206;&#x6B65;&#x67E5;&#x8BE2; + &#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;</p>
<p>&#x5373;&#x6BCF;&#x6B21;&#x5148;&#x67E5;&#x8BE2;&#x5F97;&#x5230; Employee&#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x662F; &#x90E8;&#x95E8;&#x4FE1;&#x606F;&#x5728;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x53BB;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;</p>
<p>&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x7684;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">		2&#x3001;settings&#x5305;&#x542B;&#x5F88;&#x591A;&#x91CD;&#x8981;&#x7684;&#x8BBE;&#x7F6E;&#x9879;</span></span><br><span class="line"><span class="comment">		setting:&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x9879;</span></span><br><span class="line"><span class="comment">			name&#xFF1A;&#x8BBE;&#x7F6E;&#x9879;&#x540D;</span></span><br><span class="line"><span class="comment">			value&#xFF1A;&#x8BBE;&#x7F6E;&#x9879;&#x53D6;&#x503C;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;NULL&quot;</span>/&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--&#x663E;&#x793A;&#x7684;&#x6307;&#x5B9A;&#x6BCF;&#x4E2A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x66F4;&#x6539;&#x7684;&#x914D;&#x7F6E;&#x7684;&#x503C;&#xFF0C;&#x5373;&#x4F7F;&#x4ED6;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x3002;&#x9632;&#x6B62;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x5E26;&#x6765;&#x7684;&#x95EE;&#x9898;  --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-discriminator-&#x9274;&#x522B;&#x5668;"><a href="#9-discriminator-&#x9274;&#x522B;&#x5668;" class="headerlink" title="9. discriminator(&#x9274;&#x522B;&#x5668;)"></a>9. discriminator(&#x9274;&#x522B;&#x5668;)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- =======================&#x9274;&#x522B;&#x5668;============================ --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;discriminator javaType=&quot;&quot;&gt;&lt;/discriminator&gt;</span></span><br><span class="line"><span class="comment">		&#x9274;&#x522B;&#x5668;&#xFF1A;mybatis&#x53EF;&#x4EE5;&#x4F7F;&#x7528;discriminator&#x5224;&#x65AD;&#x67D0;&#x5217;&#x7684;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x67D0;&#x5217;&#x7684;&#x503C;&#x6539;&#x53D8;&#x5C01;&#x88C5;&#x884C;&#x4E3A;</span></span><br><span class="line"><span class="comment">		&#x5C01;&#x88C5;Employee&#xFF1A;</span></span><br><span class="line"><span class="comment">			&#x5982;&#x679C;&#x67E5;&#x51FA;&#x7684;&#x662F;&#x5973;&#x751F;&#xFF1A;&#x5C31;&#x628A;&#x90E8;&#x95E8;&#x4FE1;&#x606F;&#x67E5;&#x8BE2;&#x51FA;&#x6765;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x67E5;&#x8BE2;&#xFF1B;</span></span><br><span class="line"><span class="comment">			&#x5982;&#x679C;&#x662F;&#x7537;&#x751F;&#xFF0C;&#x628A;last_name&#x8FD9;&#x4E00;&#x5217;&#x7684;&#x503C;&#x8D4B;&#x503C;&#x7ED9;email;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyEmpDis&quot;</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">	 	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	 		column&#xFF1A;&#x6307;&#x5B9A;&#x5224;&#x5B9A;&#x7684;&#x5217;&#x540D;</span></span><br><span class="line"><span class="comment">	 		javaType&#xFF1A;&#x5217;&#x503C;&#x5BF9;&#x5E94;&#x7684;java&#x7C7B;&#x578B;  --&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line">	 		<span class="comment">&lt;!--&#x5973;&#x751F;  resultType:&#x6307;&#x5B9A;&#x5C01;&#x88C5;&#x7684;&#x7ED3;&#x679C;&#x7C7B;&#x578B;&#xFF1B;&#x4E0D;&#x80FD;&#x7F3A;&#x5C11;&#x3002;/resultMap--&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">	 			<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> </span></span><br><span class="line"><span class="tag">			 		<span class="attr">select</span>=<span class="string">&quot;com.atguigu.mybatis.dao.DepartmentMapper.getDeptById&quot;</span></span></span><br><span class="line"><span class="tag">			 		<span class="attr">column</span>=<span class="string">&quot;d_id&quot;</span>&gt;</span></span><br><span class="line">		 		<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">	 		<span class="comment">&lt;!--&#x7537;&#x751F; ;&#x5982;&#x679C;&#x662F;&#x7537;&#x751F;&#xFF0C;&#x628A;last_name&#x8FD9;&#x4E00;&#x5217;&#x7684;&#x503C;&#x8D4B;&#x503C;&#x7ED9;email; --&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">		 		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">			 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">			 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">			 	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-collection"><a href="#10-collection" class="headerlink" title="10. collection"></a>10. collection</h3><p>&#x9700;&#x8981;&#x67E5;&#x8BE2;&#x90E8;&#x95E8;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x67E5;&#x8BE2;&#x8BE5;&#x90E8;&#x95E8;&#x4E0B;&#x6240;&#x6709;&#x7684; &#x5458;&#x5DE5;&#x4FE1;&#x606F;</p>
<h4 id="1-&#x5D4C;&#x5957;&#x7ED3;&#x679C;&#x7684;&#x65B9;&#x5F0F;"><a href="#1-&#x5D4C;&#x5957;&#x7ED3;&#x679C;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="1. &#x5D4C;&#x5957;&#x7ED3;&#x679C;&#x7684;&#x65B9;&#x5F0F;"></a>1. &#x5D4C;&#x5957;&#x7ED3;&#x679C;&#x7684;&#x65B9;&#x5F0F;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&#x5D4C;&#x5957;&#x7ED3;&#x679C;&#x96C6;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;collection&#x6807;&#x7B7E;&#x5B9A;&#x4E49;&#x5173;&#x8054;&#x7684;&#x96C6;&#x5408;&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x5C01;&#x88C5;&#x89C4;&#x5219;  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Department&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDept&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			collection&#x5B9A;&#x4E49;&#x5173;&#x8054;&#x96C6;&#x5408;&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x7684;&#x5C01;&#x88C5;&#x89C4;&#x5219; </span></span><br><span class="line"><span class="comment">			ofType:&#x6307;&#x5B9A;&#x96C6;&#x5408;&#x91CC;&#x9762;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- &#x5B9A;&#x4E49;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x5C01;&#x88C5;&#x89C4;&#x5219; --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- public Department getDeptByIdPlus(Integer id); --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByIdPlus&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDept&quot;</span>&gt;</span></span><br><span class="line">		SELECT d.id did,d.dept_name dept_name,</span><br><span class="line">				e.id eid,e.last_name last_name,e.email email,e.gender gender</span><br><span class="line">		FROM tbl_dept d</span><br><span class="line">		LEFT JOIN tbl_employee e</span><br><span class="line">		ON d.id=e.d_id</span><br><span class="line">		WHERE d.id=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x5206;&#x6BB5;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x5F0F;"><a href="#2-&#x5206;&#x6BB5;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x5F0F;" class="headerlink" title="2. &#x5206;&#x6BB5;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x5F0F;"></a>2. &#x5206;&#x6BB5;&#x67E5;&#x8BE2;&#x7684;&#x65B9;&#x5F0F;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- collection&#xFF1A;&#x5206;&#x6BB5;&#x67E5;&#x8BE2; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Department&quot;</span> <span class="attr">id</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> </span></span><br><span class="line"><span class="tag">			<span class="attr">select</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapperPlus.getEmpsByDeptId&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">column</span>=<span class="string">&quot;{deptId=id}&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;lazy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- public Department getDeptByIdStep(Integer id); --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;MyDeptStep&quot;</span>&gt;</span></span><br><span class="line">		select id,dept_name from tbl_dept where id=#{id}</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-&#x52A8;&#x6001;-SQL"><a href="#11-&#x52A8;&#x6001;-SQL" class="headerlink" title="11. &#x52A8;&#x6001; SQL"></a>11. &#x52A8;&#x6001; SQL</h3><h4 id="1-where-if"><a href="#1-where-if" class="headerlink" title="1. where+if"></a>1. where+if</h4><p>where: &#x7528;&#x6765;&#x53BB;&#x9664;&#x6700;&#x5DE6;&#x4FA7;&#x7684; and</p>
<p>if: &#x6EE1;&#x8DB3;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x6DFB;&#x52A0;&#x6761;&#x4EF6;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &#x67E5;&#x8BE2;&#x5458;&#x5DE5;&#xFF0C;&#x8981;&#x6C42;&#xFF0C;&#x643A;&#x5E26;&#x4E86;&#x54EA;&#x4E2A;&#x5B57;&#x6BB5;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x5C31;&#x5E26;&#x4E0A;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C; --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- public List&lt;Employee&gt; getEmpsByConditionIf(Employee employee); --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionIf&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line"> 	select * from tbl_employee</span><br><span class="line"> 	<span class="comment">&lt;!-- where --&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	 	<span class="comment">&lt;!-- test&#xFF1A;&#x5224;&#x65AD;&#x8868;&#x8FBE;&#x5F0F;&#xFF08;OGNL&#xFF09;</span></span><br><span class="line"><span class="comment">	 	OGNL&#x53C2;&#x7167;PPT&#x6216;&#x8005;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;</span></span><br><span class="line"><span class="comment">	 	  	 c:if  test</span></span><br><span class="line"><span class="comment">	 	&#x4ECE;&#x53C2;&#x6570;&#x4E2D;&#x53D6;&#x503C;&#x8FDB;&#x884C;&#x5224;&#x65AD;</span></span><br><span class="line"><span class="comment">	 	</span></span><br><span class="line"><span class="comment">	 	&#x9047;&#x89C1;&#x7279;&#x6B8A;&#x7B26;&#x53F7;&#x5E94;&#x8BE5;&#x53BB;&#x5199;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#xFF1A;</span></span><br><span class="line"><span class="comment">	 	&amp;&amp;&#xFF1A;</span></span><br><span class="line"><span class="comment">	 	--&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">	 		id=#{id}</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null &amp;amp;&amp;amp; lastName!=&amp;quot;&amp;quot;&quot;</span>&gt;</span></span><br><span class="line">	 		and last_name like #{lastName}</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email.trim()!=&amp;quot;&amp;quot;&quot;</span>&gt;</span></span><br><span class="line">	 		and email=#{email}</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line">	 	<span class="comment">&lt;!-- ognl&#x4F1A;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;&#x6570;&#x5B57;&#x7684;&#x8F6C;&#x6362;&#x5224;&#x65AD;  &quot;0&quot;==0 --&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender==0 or gender==1&quot;</span>&gt;</span></span><br><span class="line">	 	 	and gender=#{gender}</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-trim-if&#x65B9;&#x5F0F;"><a href="#2-trim-if&#x65B9;&#x5F0F;" class="headerlink" title="2. trim+if&#x65B9;&#x5F0F;"></a>2. trim+if&#x65B9;&#x5F0F;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public List&lt;Employee&gt; getEmpsByConditionTrim(Employee employee);  --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionTrim&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">	 	select * from tbl_employee</span><br><span class="line">	 	<span class="comment">&lt;!-- &#x540E;&#x9762;&#x591A;&#x51FA;&#x7684;and&#x6216;&#x8005;or where&#x6807;&#x7B7E;&#x4E0D;&#x80FD;&#x89E3;&#x51B3; </span></span><br><span class="line"><span class="comment">	 	prefix=&quot;&quot;:&#x524D;&#x7F00;&#xFF1A;trim&#x6807;&#x7B7E;&#x4F53;&#x4E2D;&#x662F;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x4E32; &#x540E;&#x7684;&#x7ED3;&#x679C;&#x3002;</span></span><br><span class="line"><span class="comment">	 			prefix&#x7ED9;&#x62FC;&#x4E32;&#x540E;&#x7684;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x52A0;&#x4E00;&#x4E2A;&#x524D;&#x7F00; </span></span><br><span class="line"><span class="comment">	 	prefixOverrides=&quot;&quot;:</span></span><br><span class="line"><span class="comment">	 			&#x524D;&#x7F00;&#x8986;&#x76D6;&#xFF1A; &#x53BB;&#x6389;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x524D;&#x9762;&#x591A;&#x4F59;&#x7684;&#x5B57;&#x7B26;</span></span><br><span class="line"><span class="comment">	 	suffix=&quot;&quot;:&#x540E;&#x7F00;</span></span><br><span class="line"><span class="comment">	 			suffix&#x7ED9;&#x62FC;&#x4E32;&#x540E;&#x7684;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x52A0;&#x4E00;&#x4E2A;&#x540E;&#x7F00; </span></span><br><span class="line"><span class="comment">	 	suffixOverrides=&quot;&quot;</span></span><br><span class="line"><span class="comment">	 			&#x540E;&#x7F00;&#x8986;&#x76D6;&#xFF1A;&#x53BB;&#x6389;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x540E;&#x9762;&#x591A;&#x4F59;&#x7684;&#x5B57;&#x7B26;</span></span><br><span class="line"><span class="comment">	 			</span></span><br><span class="line"><span class="comment">	 	--&gt;</span></span><br><span class="line">	 	<span class="comment">&lt;!-- &#x81EA;&#x5B9A;&#x4E49;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x622A;&#x53D6;&#x89C4;&#x5219; --&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">		 		id=#{id} and</span><br><span class="line">		 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null &amp;amp;&amp;amp; lastName!=&amp;quot;&amp;quot;&quot;</span>&gt;</span></span><br><span class="line">		 		last_name like #{lastName} and</span><br><span class="line">		 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null and email.trim()!=&amp;quot;&amp;quot;&quot;</span>&gt;</span></span><br><span class="line">		 		email=#{email} and</span><br><span class="line">		 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line">		 	<span class="comment">&lt;!-- ognl&#x4F1A;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;&#x6570;&#x5B57;&#x7684;&#x8F6C;&#x6362;&#x5224;&#x65AD;  &quot;0&quot;==0 --&gt;</span></span><br><span class="line">		 	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender==0 or gender==1&quot;</span>&gt;</span></span><br><span class="line">		 	 	gender=#{gender}</span><br><span class="line">		 	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-where-choose"><a href="#3-where-choose" class="headerlink" title="3. where+choose"></a>3. where+choose</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- public List&lt;Employee&gt; getEmpsByConditionChoose(Employee employee); --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">	 	select * from tbl_employee </span><br><span class="line">	 	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	 		<span class="comment">&lt;!-- &#x5982;&#x679C;&#x5E26;&#x4E86;id&#x5C31;&#x7528;id&#x67E5;&#xFF0C;&#x5982;&#x679C;&#x5E26;&#x4E86;lastName&#x5C31;&#x7528;lastName&#x67E5;;&#x53EA;&#x4F1A;&#x8FDB;&#x5165;&#x5176;&#x4E2D;&#x4E00;&#x4E2A; --&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">	 			<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;id!=null&quot;</span>&gt;</span></span><br><span class="line">	 				id=#{id}</span><br><span class="line">	 			<span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">	 			<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null&quot;</span>&gt;</span></span><br><span class="line">	 				last_name like #{lastName}</span><br><span class="line">	 			<span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">	 			<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;email!=null&quot;</span>&gt;</span></span><br><span class="line">	 				email = #{email}</span><br><span class="line">	 			<span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">	 			<span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">	 				gender = 0</span><br><span class="line">	 			<span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">	 		<span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-set-if"><a href="#4-set-if" class="headerlink" title="4. set+if"></a>4. set+if</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public void updateEmp(Employee employee);  --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateEmp&quot;</span>&gt;</span></span><br><span class="line">	 	<span class="comment">&lt;!-- Set&#x6807;&#x7B7E;&#x7684;&#x4F7F;&#x7528; --&gt;</span></span><br><span class="line">	 	update tbl_employee </span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName!=null&quot;</span>&gt;</span></span><br><span class="line">				last_name=#{lastName},</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email!=null&quot;</span>&gt;</span></span><br><span class="line">				email=#{email},</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null&quot;</span>&gt;</span></span><br><span class="line">				gender=#{gender}</span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		where id=#{id}</span><br></pre></td></tr></table></figure>

<h4 id="5-foreach"><a href="#5-foreach" class="headerlink" title="5. foreach"></a>5. foreach</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--public List&lt;Employee&gt; getEmpsByConditionForeach(List&lt;Integer&gt; ids);  --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpsByConditionForeach&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.Employee&quot;</span>&gt;</span></span><br><span class="line">	 	select * from tbl_employee</span><br><span class="line">	 	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	 		collection&#xFF1A;&#x6307;&#x5B9A;&#x8981;&#x904D;&#x5386;&#x7684;&#x96C6;&#x5408;&#xFF1A;</span></span><br><span class="line"><span class="comment">	 			list&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#x4F1A;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x5C01;&#x88C5;&#x5728;map&#x4E2D;&#xFF0C;map&#x7684;key&#x5C31;&#x53EB;list</span></span><br><span class="line"><span class="comment">	 		item&#xFF1A;&#x5C06;&#x5F53;&#x524D;&#x904D;&#x5386;&#x51FA;&#x7684;&#x5143;&#x7D20;&#x8D4B;&#x503C;&#x7ED9;&#x6307;&#x5B9A;&#x7684;&#x53D8;&#x91CF;</span></span><br><span class="line"><span class="comment">	 		separator:&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x4E4B;&#x95F4;&#x7684;&#x5206;&#x9694;&#x7B26;</span></span><br><span class="line"><span class="comment">	 		open&#xFF1A;&#x904D;&#x5386;&#x51FA;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x62FC;&#x63A5;&#x4E00;&#x4E2A;&#x5F00;&#x59CB;&#x7684;&#x5B57;&#x7B26;</span></span><br><span class="line"><span class="comment">	 		close:&#x904D;&#x5386;&#x51FA;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x62FC;&#x63A5;&#x4E00;&#x4E2A;&#x7ED3;&#x675F;&#x7684;&#x5B57;&#x7B26;</span></span><br><span class="line"><span class="comment">	 		index:&#x7D22;&#x5F15;&#x3002;&#x904D;&#x5386;list&#x7684;&#x65F6;&#x5019;&#x662F;index&#x5C31;&#x662F;&#x7D22;&#x5F15;&#xFF0C;item&#x5C31;&#x662F;&#x5F53;&#x524D;&#x503C;</span></span><br><span class="line"><span class="comment">	 				      &#x904D;&#x5386;map&#x7684;&#x65F6;&#x5019;index&#x8868;&#x793A;&#x7684;&#x5C31;&#x662F;map&#x7684;key&#xFF0C;item&#x5C31;&#x662F;map&#x7684;&#x503C;</span></span><br><span class="line"><span class="comment">	 		</span></span><br><span class="line"><span class="comment">	 		#{&#x53D8;&#x91CF;&#x540D;}&#x5C31;&#x80FD;&#x53D6;&#x51FA;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x4E5F;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x904D;&#x5386;&#x51FA;&#x7684;&#x5143;&#x7D20;</span></span><br><span class="line"><span class="comment">	 	  --&gt;</span></span><br><span class="line">	 	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;item_id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span></span></span><br><span class="line"><span class="tag">	 		<span class="attr">open</span>=<span class="string">&quot;where id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">	 		#{item_id}</span><br><span class="line">	 	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-&#x6279;&#x91CF;&#x4FDD;&#x5B58;"><a href="#6-&#x6279;&#x91CF;&#x4FDD;&#x5B58;" class="headerlink" title="6. &#x6279;&#x91CF;&#x4FDD;&#x5B58;"></a>6. &#x6279;&#x91CF;&#x4FDD;&#x5B58;</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &#x6279;&#x91CF;&#x4FDD;&#x5B58; --&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!--public void addEmps(@Param(&quot;emps&quot;)List&lt;Employee&gt; emps);  --&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!--MySQL&#x4E0B;&#x6279;&#x91CF;&#x4FDD;&#x5B58;&#xFF1A;&#x53EF;&#x4EE5;foreach&#x904D;&#x5386;   mysql&#x652F;&#x6301;values(),(),()&#x8BED;&#x6CD5;--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEmps&quot;</span>&gt;</span></span><br><span class="line">	 	insert into tbl_employee(</span><br><span class="line">	 		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;insertColumn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">	 	) </span><br><span class="line">		values</span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">			(#{emp.lastName},#{emp.email},#{emp.gender},#{emp.dept.id})</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">insert</span>&gt;</span><span class="comment">&lt;!--   --&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="12-&#x62BD;&#x53D6;sql"><a href="#12-&#x62BD;&#x53D6;sql" class="headerlink" title="12. &#x62BD;&#x53D6;sql"></a>12. &#x62BD;&#x53D6;sql</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	  	&#x62BD;&#x53D6;&#x53EF;&#x91CD;&#x7528;&#x7684;sql&#x7247;&#x6BB5;&#x3002;&#x65B9;&#x4FBF;&#x540E;&#x9762;&#x5F15;&#x7528; </span></span><br><span class="line"><span class="comment">	  	1&#x3001;sql&#x62BD;&#x53D6;&#xFF1A;&#x7ECF;&#x5E38;&#x5C06;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x5217;&#x540D;&#xFF0C;&#x6216;&#x8005;&#x63D2;&#x5165;&#x7528;&#x7684;&#x5217;&#x540D;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#x65B9;&#x4FBF;&#x5F15;&#x7528;</span></span><br><span class="line"><span class="comment">	  	2&#x3001;include&#x6765;&#x5F15;&#x7528;&#x5DF2;&#x7ECF;&#x62BD;&#x53D6;&#x7684;sql&#xFF1A;</span></span><br><span class="line"><span class="comment">	  	3&#x3001;include&#x8FD8;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E9B;property&#xFF0C;sql&#x6807;&#x7B7E;&#x5185;&#x90E8;&#x5C31;&#x80FD;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5C5E;&#x6027;</span></span><br><span class="line"><span class="comment">	  			include-property&#xFF1A;&#x53D6;&#x503C;&#x7684;&#x6B63;&#x786E;&#x65B9;&#x5F0F;${prop},</span></span><br><span class="line"><span class="comment">	  			#{&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;}</span></span><br><span class="line"><span class="comment">	  --&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;insertColumn&quot;</span>&gt;</span></span><br><span class="line">	  		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&apos;oracle&apos;&quot;</span>&gt;</span></span><br><span class="line">	  			employee_id,last_name,email</span><br><span class="line">	  		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	  		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId==&apos;mysql&apos;&quot;</span>&gt;</span></span><br><span class="line">	  			last_name,email,gender,d_id</span><br><span class="line">	  		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-&#x7F13;&#x5B58;"><a href="#5-&#x7F13;&#x5B58;" class="headerlink" title="5. &#x7F13;&#x5B58;"></a>5. &#x7F13;&#x5B58;</h2><h3 id="1-&#x4E00;&#x7EA7;&#x7F13;&#x5B58;"><a href="#1-&#x4E00;&#x7EA7;&#x7F13;&#x5B58;" class="headerlink" title="1. &#x4E00;&#x7EA7;&#x7F13;&#x5B58;"></a>1. &#x4E00;&#x7EA7;&#x7F13;&#x5B58;</h3><p>&#x53C8;&#x79F0;(&#x672C;&#x5730;&#x7F13;&#x5B58;): sqlSession&#x7EA7;&#x522B;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x662F;&#x4E00;&#x76F4;&#x5F00;&#x542F;&#x7684;&#xFF1B;SqlSession&#x7EA7;&#x522B;&#x7684;&#x4E00;&#x4E2A;Map</p>
<ul>
<li>&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x540C;&#x4E00;&#x6B21;&#x4F1A;&#x8BDD;&#x671F;&#x95F4;&#x67E5;&#x8BE2;&#x5230;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x653E;&#x5728;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x4E2D;</li>
<li>&#x4EE5;&#x540E;&#x5982;&#x679C;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x62FF;&#xFF0C;&#x6CA1;&#x5FC5;&#x8981;&#x518D;&#x53BB;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;</li>
</ul>
<h4 id="&#x5931;&#x6548;&#x60C5;&#x51B5;"><a href="#&#x5931;&#x6548;&#x60C5;&#x51B5;" class="headerlink" title="&#x5931;&#x6548;&#x60C5;&#x51B5;"></a>&#x5931;&#x6548;&#x60C5;&#x51B5;</h4><ul>
<li>sqlSession&#x4E0D;&#x540C;</li>
<li>sqlSession&#x76F8;&#x540C;&#xFF0C;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x4E0D;&#x540C;.(&#x5F53;&#x524D;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;&#x8FD8;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x6570;&#x636E;)</li>
<li>sqlSession&#x76F8;&#x540C;&#xFF0C;&#x4E24;&#x6B21;&#x67E5;&#x8BE2;&#x4E4B;&#x95F4;&#x6267;&#x884C;&#x4E86;&#x589E;&#x5220;&#x6539;&#x64CD;&#x4F5C;(&#x8FD9;&#x6B21;&#x589E;&#x5220;&#x6539;&#x53EF;&#x80FD;&#x5BF9;&#x5F53;&#x524D;&#x6570;&#x636E;&#x6709;&#x5F71;&#x54CD;)</li>
<li>sqlSession&#x76F8;&#x540C;&#xFF0C;&#x624B;&#x52A8;&#x6E05;&#x9664;&#x4E86;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#xFF08;&#x7F13;&#x5B58;&#x6E05;&#x7A7A;&#xFF09;</li>
</ul>
<h3 id="2-&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;"><a href="#2-&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;" class="headerlink" title="2. &#x4E8C;&#x7EA7;&#x7F13;&#x5B58;"></a>2. &#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</h3><p>&#x53C8;&#x79F0;&#xFF08;&#x5168;&#x5C40;&#x7F13;&#x5B58;&#xFF09;&#xFF1A;&#x57FA;&#x4E8E;namespace&#x7EA7;&#x522B;&#x7684;&#x7F13;&#x5B58;&#xFF1A;&#x4E00;&#x4E2A;namespace&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</p>
<h4 id="&#x5DE5;&#x4F5C;&#x673A;&#x5236;"><a href="#&#x5DE5;&#x4F5C;&#x673A;&#x5236;" class="headerlink" title="&#x5DE5;&#x4F5C;&#x673A;&#x5236;"></a>&#x5DE5;&#x4F5C;&#x673A;&#x5236;</h4><ol>
<li>&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5C31;&#x653E;&#x5728;&#x4E86;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x7684;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;</li>
<li>&#x5982;&#x679C;&#x4F1A;&#x8BDD;&#x5173;&#x95ED;&#xFF0C;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x4FDD;&#x5B58;&#x5230;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;</li>
<li>&#x65B0;&#x7684;&#x4F1A;&#x8BDD;&#x5728;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x4F1A;&#x53C2;&#x7167;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x4FE1;&#x606F;</li>
</ol>
<h4 id="&#x6CE8;&#x610F;"><a href="#&#x6CE8;&#x610F;" class="headerlink" title="&#x6CE8;&#x610F;:"></a>&#x6CE8;&#x610F;:</h4><ul>
<li>&#x4E0D;&#x540C;&#x7684;namespace&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x5B58;</li>
<li>&#x4F1A;&#x8BDD;&#x5173;&#x95ED;&#x4E4B;&#x540E;&#xFF0C;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x624D;&#x4F1A;&#x88AB;&#x4FDD;&#x5B58;&#x5230; &#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;</li>
</ul>
<h4 id="&#x4F7F;&#x7528;"><a href="#&#x4F7F;&#x7528;" class="headerlink" title="&#x4F7F;&#x7528;:"></a>&#x4F7F;&#x7528;:</h4><ol>
<li>&#x5F00;&#x542F;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&#x663E;&#x5F0F;&#x7684;&#x6307;&#x5B9A;&#x6BCF;&#x4E2A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x66F4;&#x6539;&#x7684;&#x914D;&#x7F6E;&#x7684;&#x503C;&#xFF0C;&#x5373;&#x4F7F;&#x4ED6;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x3002;&#x9632;&#x6B62;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x5E26;&#x6765;&#x7684;&#x95EE;&#x9898;  --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x5728; mapper xml &#x4E2D;&#xFF0C;&#x4F7F;&#x7528;cache&#x914D;&#x7F6E;</li>
</ol>
<p>&#x6CE8;&#x610F;: &#x7531;&#x4E8E;&#x7F13;&#x5B58;&#x53EF;&#x80FD;&#x4F1A;&#x5E8F;&#x5217;&#x5316;&#x5BF9;&#x8C61; ==&gt; POJO &#x9700;&#x8981;&#x5B9E;&#x73B0; &#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  </span></span><br><span class="line"><span class="comment">	eviction:&#x7F13;&#x5B58;&#x7684;&#x56DE;&#x6536;&#x7B56;&#x7565;&#xFF1A;</span></span><br><span class="line"><span class="comment">		&#x2022; LRU &#x2013; &#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#xFF1A;&#x79FB;&#x9664;&#x6700;&#x957F;&#x65F6;&#x95F4;&#x4E0D;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span></span><br><span class="line"><span class="comment">		&#x2022; FIFO &#x2013; &#x5148;&#x8FDB;&#x5148;&#x51FA;&#xFF1A;&#x6309;&#x5BF9;&#x8C61;&#x8FDB;&#x5165;&#x7F13;&#x5B58;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x79FB;&#x9664;&#x5B83;&#x4EEC;&#x3002;</span></span><br><span class="line"><span class="comment">		&#x2022; SOFT &#x2013; &#x8F6F;&#x5F15;&#x7528;&#xFF1A;&#x79FB;&#x9664;&#x57FA;&#x4E8E;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x72B6;&#x6001;&#x548C;&#x8F6F;&#x5F15;&#x7528;&#x89C4;&#x5219;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span></span><br><span class="line"><span class="comment">		&#x2022; WEAK &#x2013; &#x5F31;&#x5F15;&#x7528;&#xFF1A;&#x66F4;&#x79EF;&#x6781;&#x5730;&#x79FB;&#x9664;&#x57FA;&#x4E8E;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x72B6;&#x6001;&#x548C;&#x5F31;&#x5F15;&#x7528;&#x89C4;&#x5219;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span></span><br><span class="line"><span class="comment">		&#x2022; &#x9ED8;&#x8BA4;&#x7684;&#x662F; LRU&#x3002;</span></span><br><span class="line"><span class="comment">	flushInterval&#xFF1A;&#x7F13;&#x5B58;&#x5237;&#x65B0;&#x95F4;&#x9694;</span></span><br><span class="line"><span class="comment">		&#x7F13;&#x5B58;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x6E05;&#x7A7A;&#x4E00;&#x6B21;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x6E05;&#x7A7A;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6BEB;&#x79D2;&#x503C;</span></span><br><span class="line"><span class="comment">	readOnly:&#x662F;&#x5426;&#x53EA;&#x8BFB;&#xFF1A;</span></span><br><span class="line"><span class="comment">		true&#xFF1A;&#x53EA;&#x8BFB;&#xFF1B;mybatis&#x8BA4;&#x4E3A;&#x6240;&#x6709;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x53EA;&#x8BFB;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x3002;</span></span><br><span class="line"><span class="comment">				 mybatis&#x4E3A;&#x4E86;&#x52A0;&#x5FEB;&#x83B7;&#x53D6;&#x901F;&#x5EA6;&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5F15;&#x7528;&#x4EA4;&#x7ED9;&#x7528;&#x6237;&#x3002;&#x4E0D;&#x5B89;&#x5168;&#xFF0C;&#x901F;&#x5EA6;&#x5FEB;</span></span><br><span class="line"><span class="comment">		false&#xFF1A;&#x975E;&#x53EA;&#x8BFB;&#xFF1A;mybatis&#x89C9;&#x5F97;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x3002;</span></span><br><span class="line"><span class="comment">				mybatis&#x4F1A;&#x5229;&#x7528;&#x5E8F;&#x5217;&#x5316;&amp;&#x53CD;&#x5E8F;&#x5217;&#x7684;&#x6280;&#x672F;&#x514B;&#x9686;&#x4E00;&#x4EFD;&#x65B0;&#x7684;&#x6570;&#x636E;&#x7ED9;&#x4F60;&#x3002;&#x5B89;&#x5168;&#xFF0C;&#x901F;&#x5EA6;&#x6162;</span></span><br><span class="line"><span class="comment">	size&#xFF1A;&#x7F13;&#x5B58;&#x5B58;&#x653E;&#x591A;&#x5C11;&#x5143;&#x7D20;&#xFF1B;</span></span><br><span class="line"><span class="comment">	type=&quot;&quot;&#xFF1A;&#x6307;&#x5B9A;&#x81EA;&#x5B9A;&#x4E49;&#x7F13;&#x5B58;&#x7684;&#x5168;&#x7C7B;&#x540D;&#xFF1B;</span></span><br><span class="line"><span class="comment">			&#x5B9E;&#x73B0;Cache&#x63A5;&#x53E3;&#x5373;&#x53EF;&#xFF1B;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;false&quot;</span> <span class="attr">size</span>=<span class="string">&quot;1024&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x5F15;&#x7528;&#x7F13;&#x5B58;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.DepartmentMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &#x5F15;&#x7528;&#x7F13;&#x5B58;&#xFF1A;namespace&#xFF1A;&#x6307;&#x5B9A;&#x548C;&#x54EA;&#x4E2A;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4E0B;&#x7684;&#x7F13;&#x5B58;&#x4E00;&#x6837; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache-ref</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapper&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-&#x76F8;&#x5173;&#x5C5E;&#x6027;&#xFF0C;&#x8BBE;&#x7F6E;"><a href="#3-&#x76F8;&#x5173;&#x5C5E;&#x6027;&#xFF0C;&#x8BBE;&#x7F6E;" class="headerlink" title="3. &#x76F8;&#x5173;&#x5C5E;&#x6027;&#xFF0C;&#x8BBE;&#x7F6E;"></a>3. &#x76F8;&#x5173;&#x5C5E;&#x6027;&#xFF0C;&#x8BBE;&#x7F6E;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x548C;&#x7F13;&#x5B58;&#x6709;&#x5173;&#x7684;&#x8BBE;&#x7F6E;/&#x5C5E;&#x6027;&#xFF1A;</span><br><span class="line">	1&#xFF09;&#x3001;cacheEnabled=true&#xFF1A;false&#xFF1A;&#x5173;&#x95ED;&#x7F13;&#x5B58;&#xFF08;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x5173;&#x95ED;&#xFF09;(&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4E00;&#x76F4;&#x53EF;&#x7528;&#x7684;)</span><br><span class="line">	2&#xFF09;&#x3001;&#x6BCF;&#x4E2A;select&#x6807;&#x7B7E;&#x90FD;&#x6709;useCache=&quot;true&quot;&#xFF1A;</span><br><span class="line">			false&#xFF1A;&#x4E0D;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#xFF08;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x4F9D;&#x7136;&#x4F7F;&#x7528;&#xFF0C;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x4E0D;&#x4F7F;&#x7528;&#xFF09;</span><br><span class="line">	3&#xFF09;&#x3001;&#x3010;&#x6BCF;&#x4E2A;&#x589E;&#x5220;&#x6539;&#x6807;&#x7B7E;&#x7684;&#xFF1A;flushCache=&quot;true&quot;&#xFF1A;&#xFF08;&#x4E00;&#x7EA7;&#x4E8C;&#x7EA7;&#x90FD;&#x4F1A;&#x6E05;&#x9664;&#xFF09;&#x3011;</span><br><span class="line">			&#x589E;&#x5220;&#x6539;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x5C31;&#x4F1A;&#x6E05;&#x695A;&#x7F13;&#x5B58;&#xFF1B;</span><br><span class="line">	 		&#x6D4B;&#x8BD5;&#xFF1A;flushCache=&quot;true&quot;&#xFF1A;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x5C31;&#x6E05;&#x7A7A;&#x4E86;&#xFF1B;&#x4E8C;&#x7EA7;&#x4E5F;&#x4F1A;&#x88AB;&#x6E05;&#x9664;&#xFF1B;</span><br><span class="line">      &#x67E5;&#x8BE2;&#x6807;&#x7B7E;&#xFF1A;flushCache=&quot;false&quot;&#xFF1A;</span><br><span class="line">      &#x5982;&#x679C;flushCache=true;&#x6BCF;&#x6B21;&#x67E5;&#x8BE2;&#x4E4B;&#x540E;&#x90FD;&#x4F1A;&#x6E05;&#x7A7A;&#x7F13;&#x5B58;&#xFF1B;&#x7F13;&#x5B58;&#x662F;&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#xFF1B;</span><br><span class="line">	4&#xFF09;&#x3001;sqlSession.clearCache();&#x53EA;&#x662F;&#x6E05;&#x695A;&#x5F53;&#x524D;session&#x7684;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#xFF1B;</span><br><span class="line">	5&#xFF09;&#x3001;localCacheScope&#xFF1A;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x4F5C;&#x7528;&#x57DF;&#xFF1A;&#xFF08;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;SESSION&#xFF09;&#xFF1B;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5728;&#x4F1A;&#x8BDD;&#x7F13;&#x5B58;&#x4E2D;&#xFF1B;</span><br><span class="line">   		STATEMENT&#xFF1A;&#x53EF;&#x4EE5;&#x7981;&#x7528;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#xFF1B;</span><br></pre></td></tr></table></figure>

<p><img src="/2019/12/26/mybatis/image-20191226154811681.png" alt="image-20191226154811681"></p>
<h3 id="4-&#x7F13;&#x5B58;&#x63A5;&#x53E3;"><a href="#4-&#x7F13;&#x5B58;&#x63A5;&#x53E3;" class="headerlink" title="4. &#x7F13;&#x5B58;&#x63A5;&#x53E3;"></a>4. &#x7F13;&#x5B58;&#x63A5;&#x53E3;</h3><p>Mybatis &#x5BF9;&#x7F13;&#x5B58;&#x505A;&#x7684;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x4E13;&#x4E1A; ==&gt; &#x53EF;&#x4EE5;&#x6574;&#x5408;&#x5176;&#x4ED6;&#x7F13;&#x5B58;&#x6846;&#x67B6;&#xFF08;Mybatis &#x63D0;&#x4F9B;&#x4E86; Cache &#x63A5;&#x53E3;)</p>
<p><img src="/2019/12/26/mybatis/image-20191226154839100.png" alt="image-20191226154839100"></p>
<h2 id="6-&#x6574;&#x5408;ehcache"><a href="#6-&#x6574;&#x5408;ehcache" class="headerlink" title="6. &#x6574;&#x5408;ehcache"></a>6. &#x6574;&#x5408;ehcache</h2><h3 id="1-&#x6574;&#x5408;&#x6B65;&#x9AA4;"><a href="#1-&#x6574;&#x5408;&#x6B65;&#x9AA4;" class="headerlink" title="1. &#x6574;&#x5408;&#x6B65;&#x9AA4;"></a>1. &#x6574;&#x5408;&#x6B65;&#x9AA4;</h3><ol>
<li>&#x5728; mybatis github&#x7684;&#x9879;&#x76EE;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x627E;&#x5230; ehache-cache &#x9002;&#x914D;&#x5305;</li>
<li>&#x5BFC;&#x5165;&#x5305; ehcache &#x7684; &#x6838;&#x5FC3;&#x5305;&#xFF0C;&#x65E5;&#x5FD7;&#x5305;&#xFF0C;&#x6574;&#x5408;&#x5305;</li>
<li>&#x6DFB;&#x52A0; ehcache.xml &#x6587;&#x4EF6;</li>
<li>&#x5728; cache&#x6807;&#x7B7E;&#x4E2D;&#xFF0C;type&#x6307;&#x5B9A;&#x4E3A; EhcacheCache</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.dao.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-Spring-&#x6574;&#x5408;-Mybatis"><a href="#7-Spring-&#x6574;&#x5408;-Mybatis" class="headerlink" title="7. Spring &#x6574;&#x5408; Mybatis"></a>7. Spring &#x6574;&#x5408; Mybatis</h2><ol>
<li>Spring &#x7BA1;&#x7406;&#x6570;&#x636E;&#x6E90;</li>
<li>Spring &#x7BA1;&#x7406;&#x4E8B;&#x52A1;</li>
<li>Spring &#x521B;&#x5EFA;&#x51FA;SqlSessionFactory bean</li>
<li>Spring &#x521B;&#x5EFA;&#x51FA; sqlSession bean</li>
<li>&#x626B;&#x63CF;&#x6240;&#x6709;mapper&#xFF0C;&#x8BA9;mapper &#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x6CE8;&#x5165;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mybatis-spring</span>=<span class="string">&quot;http://mybatis.org/schema/mybatis-spring&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://mybatis.org/schema/mybatis-spring http://mybatis.org/schema/mybatis-spring-1.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Spring&#x5E0C;&#x671B;&#x7BA1;&#x7406;&#x6240;&#x6709;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7EC4;&#x4EF6;&#xFF0C;&#x7B49;&#x3002;&#x3002;&#x3002; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mybatis&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- &#x5F15;&#x5165;&#x6570;&#x636E;&#x5E93;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:dbconfig.properties&quot;</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- Spring&#x7528;&#x6765;&#x63A7;&#x5236;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x6570;&#x636E;&#x6E90;&#x3001;&#x4E8B;&#x52A1;&#x63A7;&#x5236;&#x3001;aop --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.url}&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.driver}&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.username}&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.password}&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- spring&#x4E8B;&#x52A1;&#x7BA1;&#x7406; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- &#x5F00;&#x542F;&#x57FA;&#x4E8E;&#x6CE8;&#x89E3;&#x7684;&#x4E8B;&#x52A1; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;dataSourceTransactionManager&quot;</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	&#x6574;&#x5408;mybatis </span></span><br><span class="line"><span class="comment">		&#x76EE;&#x7684;&#xFF1A;1&#x3001;spring&#x7BA1;&#x7406;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x3002;mapper&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</span></span><br><span class="line"><span class="comment">				service==&gt;Dao   @Autowired:&#x81EA;&#x52A8;&#x6CE8;&#x5165;mapper&#xFF1B;</span></span><br><span class="line"><span class="comment">			2&#x3001;spring&#x7528;&#x6765;&#x7BA1;&#x7406;&#x4E8B;&#x52A1;&#xFF0C;spring&#x58F0;&#x660E;&#x5F0F;&#x4E8B;&#x52A1;</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--&#x521B;&#x5EFA;&#x51FA;SqlSessionFactory&#x5BF9;&#x8C61;  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- configLocation&#x6307;&#x5B9A;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--mapperLocations: &#x6307;&#x5B9A;mapper&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis/mapper/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!--&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6279;&#x91CF;&#x6267;&#x884C;&#x7684;sqlSession  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- &#x626B;&#x63CF;&#x6240;&#x6709;&#x7684;mapper&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8BA9;&#x8FD9;&#x4E9B;mapper&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x6CE8;&#x5165;&#xFF1B;</span></span><br><span class="line"><span class="comment">	base-package&#xFF1A;&#x6307;&#x5B9A;mapper&#x63A5;&#x53E3;&#x7684;&#x5305;&#x540D;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mybatis-spring:scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mybatis.dao&quot;</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;property name=&quot;basePackage&quot; value=&quot;com.atguigu.mybatis.dao&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	&lt;/bean&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="8-MyBatis-&#x9006;&#x5411;&#x5DE5;&#x7A0B;"><a href="#8-MyBatis-&#x9006;&#x5411;&#x5DE5;&#x7A0B;" class="headerlink" title="8. MyBatis &#x9006;&#x5411;&#x5DE5;&#x7A0B;"></a>8. MyBatis &#x9006;&#x5411;&#x5DE5;&#x7A0B;</h2><p>&#x7B80;&#x79F0;MBG&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x4E3A;MyBatis&#x6846;&#x67B6;&#x4F7F;&#x7528;&#x8005;&#x5B9A; &#x5236;&#x7684;&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x7684;&#x6839;&#x636E;&#x8868;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684; &#x6620;&#x5C04;&#x6587;&#x4EF6;&#xFF0C;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x53CA;bean&#x7C7B;&#x3002;&#x652F;&#x6301;&#x57FA;&#x672C;&#x7684;&#x589E;&#x5220; &#x6539;&#x67E5;&#xFF0C;&#x4EE5;&#x53CA;QBC&#x98CE;&#x683C;&#x7684;&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x3002;&#x4F46;&#x662F;&#x8868;&#x8FDE;&#x63A5;&#x3001; &#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7B49;&#x8FD9;&#x4E9B;&#x590D;&#x6742;sql&#x7684;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5DE5;&#x7F16;&#x5199; </p>
<h2 id="9-PageHelper-&#x63D2;&#x4EF6;"><a href="#9-PageHelper-&#x63D2;&#x4EF6;" class="headerlink" title="9. PageHelper &#x63D2;&#x4EF6;"></a>9. PageHelper &#x63D2;&#x4EF6;</h2><p><a href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master" target="_blank" rel="noopener">https://github.com/pagehelper/Mybatis-PageHelper/blob/master</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JAVA-MyBatis/" rel="tag"># JAVA, MyBatis</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/10/22/Spring/" rel="next" title="spring">
                <i class="fa fa-chevron-left"></i> spring
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/12/28/java8/" rel="prev" title="java8">
                java8 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="DayByDay">
            
              <p class="site-author-name" itemprop="name">DayByDay</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#摘要"><span class="nav-number">1.</span> <span class="nav-text">摘要</span></a></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#1-JDBC-的使用"><span class="nav-number"></span> <span class="nav-text">1. JDBC 的使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-JdbcTemplate的使用"><span class="nav-number"></span> <span class="nav-text">2. JdbcTemplate的使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Hibernate"><span class="nav-number"></span> <span class="nav-text">3. Hibernate</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Mybatis"><span class="nav-number"></span> <span class="nav-text">4. Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-背景"><span class="nav-number"></span> <span class="nav-text">1. 背景</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JDBC"><span class="nav-number">1.</span> <span class="nav-text">JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点"><span class="nav-number">1.1.</span> <span class="nav-text">特点:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate"><span class="nav-number">2.</span> <span class="nav-text">Hibernate</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-1"><span class="nav-number">2.1.</span> <span class="nav-text">特点:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-简单使用"><span class="nav-number"></span> <span class="nav-text">2. 简单使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-导入jar包"><span class="nav-number">1.</span> <span class="nav-text">1. 导入jar包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-mybatis-全局配置文件"><span class="nav-number">2.</span> <span class="nav-text">2. mybatis 全局配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-获取-sqlSession"><span class="nav-number">3.</span> <span class="nav-text">3. 获取 sqlSession</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SqlSession"><span class="nav-number">3.1.</span> <span class="nav-text">SqlSession</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-创建-dao层接口"><span class="nav-number">4.</span> <span class="nav-text">4. 创建 dao层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-编写-mapper-xml-文件"><span class="nav-number">5.</span> <span class="nav-text">5. 编写 mapper xml 文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-获取dao接口实现类对象，测试"><span class="nav-number">6.</span> <span class="nav-text">6. 获取dao接口实现类对象，测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-总结"><span class="nav-number">7.</span> <span class="nav-text">7. 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-全局配置"><span class="nav-number"></span> <span class="nav-text">3. 全局配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-配置文件dtd约束"><span class="nav-number">1.</span> <span class="nav-text">1. 配置文件dtd约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-从jar包中，获取dtd文件"><span class="nav-number">1.1.</span> <span class="nav-text">1. 从jar包中，获取dtd文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-properties-标签"><span class="nav-number">2.</span> <span class="nav-text">2. properties 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-settings"><span class="nav-number">3.</span> <span class="nav-text">3. settings</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-开启驼峰命名"><span class="nav-number">3.1.</span> <span class="nav-text">1. 开启驼峰命名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-typeAliases"><span class="nav-number">4.</span> <span class="nav-text">4. typeAliases</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Environments"><span class="nav-number">5.</span> <span class="nav-text">5. Environments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-databaseIdProvider"><span class="nav-number">6.</span> <span class="nav-text">6. databaseIdProvider</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-配置-databaseIdProvider"><span class="nav-number">6.1.</span> <span class="nav-text">1. 配置 databaseIdProvider</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-在-sql-语句中，指定-databaseId"><span class="nav-number">6.2.</span> <span class="nav-text">2. 在 sql 语句中，指定 databaseId</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-mappers"><span class="nav-number">7.</span> <span class="nav-text">7. mappers</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-注册配置文件方式"><span class="nav-number">7.1.</span> <span class="nav-text">1. 注册配置文件方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-注册接口的方式"><span class="nav-number">7.2.</span> <span class="nav-text">2. 注册接口的方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-批量注册的方式"><span class="nav-number">7.3.</span> <span class="nav-text">3. 批量注册的方式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-mapper-映射文件"><span class="nav-number"></span> <span class="nav-text">4. mapper 映射文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-影响行数"><span class="nav-number">1.</span> <span class="nav-text">1. 影响行数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-自动提交与手动提交"><span class="nav-number">2.</span> <span class="nav-text">2. 自动提交与手动提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-自增主键"><span class="nav-number">3.</span> <span class="nav-text">3. 自增主键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-参数处理"><span class="nav-number">4.</span> <span class="nav-text">4. 参数处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-单个参数"><span class="nav-number">4.1.</span> <span class="nav-text">1. 单个参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-多个参数"><span class="nav-number">4.2.</span> <span class="nav-text">2. 多个参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-传入单个-pojo"><span class="nav-number">4.3.</span> <span class="nav-text">3. 传入单个 pojo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-传入单个-map的方式"><span class="nav-number">4.4.</span> <span class="nav-text">4. 传入单个 map的方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-TO-Transfer-Object-对象"><span class="nav-number">4.5.</span> <span class="nav-text">5. TO(Transfer Object)对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-多个参数-POJO"><span class="nav-number">4.6.</span> <span class="nav-text">6. 多个参数 + POJO</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-Collection参数"><span class="nav-number">4.7.</span> <span class="nav-text">7. Collection参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-与-的区别"><span class="nav-number">5.</span> <span class="nav-text">5. #{}与${}的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1"><span class="nav-number">5.1.</span> <span class="nav-text">1. #{}</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2"><span class="nav-number">5.2.</span> <span class="nav-text">2. ${}</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-作用"><span class="nav-number">5.3.</span> <span class="nav-text">3. 作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-select元素"><span class="nav-number">6.</span> <span class="nav-text">6.select元素</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-id-属性"><span class="nav-number">6.1.</span> <span class="nav-text">1. id 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-parameterType"><span class="nav-number">6.2.</span> <span class="nav-text">2. parameterType:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-resultType"><span class="nav-number">6.3.</span> <span class="nav-text">3. resultType:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-返回值为-Map-lt-Integer-Employee-gt"><span class="nav-number">6.4.</span> <span class="nav-text">4. 返回值为 Map&lt;Integer, Employee&gt;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-自动映射"><span class="nav-number">7.</span> <span class="nav-text">7. 自动映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-ResultMap"><span class="nav-number">8.</span> <span class="nav-text">8. ResultMap</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-简单映射"><span class="nav-number">8.1.</span> <span class="nav-text">1. 简单映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-高级封装"><span class="nav-number">8.2.</span> <span class="nav-text">2. 高级封装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-Java-bean-中-包含-java-bean"><span class="nav-number">8.2.1.</span> <span class="nav-text">1. Java bean 中 包含 java bean</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-discriminator-鉴别器"><span class="nav-number">9.</span> <span class="nav-text">9. discriminator(鉴别器)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-collection"><span class="nav-number">10.</span> <span class="nav-text">10. collection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-嵌套结果的方式"><span class="nav-number">10.1.</span> <span class="nav-text">1. 嵌套结果的方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-分段查询的方式"><span class="nav-number">10.2.</span> <span class="nav-text">2. 分段查询的方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-动态-SQL"><span class="nav-number">11.</span> <span class="nav-text">11. 动态 SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-where-if"><span class="nav-number">11.1.</span> <span class="nav-text">1. where+if</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-trim-if方式"><span class="nav-number">11.2.</span> <span class="nav-text">2. trim+if方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-where-choose"><span class="nav-number">11.3.</span> <span class="nav-text">3. where+choose</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-set-if"><span class="nav-number">11.4.</span> <span class="nav-text">4. set+if</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-foreach"><span class="nav-number">11.5.</span> <span class="nav-text">5. foreach</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-批量保存"><span class="nav-number">11.6.</span> <span class="nav-text">6. 批量保存</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-抽取sql"><span class="nav-number">12.</span> <span class="nav-text">12. 抽取sql</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-缓存"><span class="nav-number"></span> <span class="nav-text">5. 缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-一级缓存"><span class="nav-number">1.</span> <span class="nav-text">1. 一级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#失效情况"><span class="nav-number">1.1.</span> <span class="nav-text">失效情况</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-二级缓存"><span class="nav-number">2.</span> <span class="nav-text">2. 二级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作机制"><span class="nav-number">2.1.</span> <span class="nav-text">工作机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注意"><span class="nav-number">2.2.</span> <span class="nav-text">注意:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用"><span class="nav-number">2.3.</span> <span class="nav-text">使用:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-相关属性，设置"><span class="nav-number">3.</span> <span class="nav-text">3. 相关属性，设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-缓存接口"><span class="nav-number">4.</span> <span class="nav-text">4. 缓存接口</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-整合ehcache"><span class="nav-number"></span> <span class="nav-text">6. 整合ehcache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-整合步骤"><span class="nav-number">1.</span> <span class="nav-text">1. 整合步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Spring-整合-Mybatis"><span class="nav-number"></span> <span class="nav-text">7. Spring 整合 Mybatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-MyBatis-逆向工程"><span class="nav-number"></span> <span class="nav-text">8. MyBatis 逆向工程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-PageHelper-插件"><span class="nav-number"></span> <span class="nav-text">9. PageHelper 插件</span></a></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DayByDay</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
